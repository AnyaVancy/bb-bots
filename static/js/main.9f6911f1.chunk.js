(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){e.exports=n(39)},28:function(e,t,n){},33:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(19),s=n.n(r),o=n(1),c=n(2),l=n(6),u=n(4),h=n(5),m=n(8),d=(n(28),n(3)),p=function e(t){Object(o.a)(this,e),this.name="",this.imageURL="",t&&Object.assign(this,t)},v=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).isEvicted=!1,n.isJury=!1,n.id=0,n.nominations=0,n.hohWins=0,n.povWins=0,n.popularity=0,n.deltaPopularity=0,n.relationships={},n.superiors=new Set,n.getFriendEnemyCount=function(){throw new Error("Failed to get friend / enemy count for houseguest ".concat(n.id," (").concat(n.name,")"))},Object.assign(Object(m.a)(Object(m.a)(n)),e),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"relationshipWith",value:function(e){return this.relationships[e.id]}}]),t}(p),f=n(12),E=n.n(f);function b(e){return e?Math.round(100*e):0}function g(e,t){for(var n={},a=0;a<e;a++)a!==t&&(n[a]=0);return n}var y=n(7),w=n(14),O=n(40),j=new O.a([]);function k(){return j.value}var S=function(){function e(){Object(o.a)(this,e),this.view=new tt({controller:this})}return Object(c.a)(e,[{key:"inject",value:function(e){this.view=e}}]),e}(),x=function(){function e(t){Object(o.a)(this,e),this.rng=void 0,this.rng=w.a.xorshift128plus(t)}return Object(c.a)(e,[{key:"randomFloat",value:function(){var e,t=this.rng.next(),n=Object(y.a)(t,2);return e=n[0],this.rng=n[1],e/2147483647}},{key:"randomInt",value:function(e,t){var n,a=w.a.uniformIntDistribution(e,t,this.rng),i=Object(y.a)(a,2);return n=i[0],this.rng=i[1],n}},{key:"flipCoin",value:function(){var e,t=this.rng.next(),n=Object(y.a)(t,2);return e=n[0],this.rng=n[1],e%2===0}},{key:"seed",value:function(e){this.rng=w.a.xorshift128plus(e)}}]),e}();function C(){return N.value}var N=new O.a(new x(0)),H=(j.subscribe({next:function(e){var t="";e.forEach(function(e){return t+=e.name}),N.next(new x(function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n}(t)))}}),new O.a(null));function W(){return H.value}function F(e){!e||W()&&W().id===e.id?H.next(null):H.next(e)}var P=n(15),U=137,I=252,T=137,D=252,R=137,M=137,A=51,B=255,L=249,J=function(){function e(t){var n=this;Object(o.a)(this,e),this.subs=[],this.view=void 0,this.defaultState=void 0,this.refreshData=function(e){e?(e=e).id!==n.view.props.id?n.view.setState({popularity:e.relationships[n.view.props.id]}):n.view.setState({popularity:2}):n.view.setState(n.defaultState)},this.view=t,this.defaultState={popularity:this.view.props.popularity}}return Object(c.a)(e,[{key:"backgroundColor",value:function(e,t){if(t&&(t>1||t<-1))return this.rgbToHex(A,B,L);var n=(function(e){if(!e)return 0;var t=e*e;return e>=0?2*e-t:t+2*e}(t)+1)/2;return e.isEvicted?void 0:this.rgbToHex(D+n*(U-D),R+n*(I-R),M+n*(T-M))}},{key:"subscribe",value:function(){var e=[];e.push(H.subscribe({next:this.refreshData})),this.subs=e}},{key:"unsubscribe",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"componentToHex",value:function(e){var t=Math.round(e).toString(16);return 1==t.length?"0"+t:t}},{key:"rgbToHex",value:function(e,t,n){return"#"+this.componentToHex(e)+this.componentToHex(t)+this.componentToHex(n)}}]),e}(),Q=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).controller=void 0,n.controller=new J(Object(m.a)(Object(m.a)(n))),n.state=n.controller.defaultState,n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){Object(P.isNullOrUndefined)(this.props.id)||this.controller.subscribe()}},{key:"componentWillUnmount",value:function(){this.controller.unsubscribe()}},{key:"onClick",value:function(){!Object(P.isNullOrUndefined)(this.props.id)&&this.props.relationships&&F({id:this.props.id,relationships:this.props.relationships,isEvicted:!!this.props.isEvicted,popularity:this.props.popularity||0,superiors:this.props.superiors})}},{key:"render",value:function(){var e=this,t=this.props,n=function(e){var t=e.isEvicted?"grayscale":"";return t=e.isJury?"sepia":t}(t),a=[];t.generateSubtitle&&(a=t.generateSubtitle(this.props,this.state));var r="";return t.isJury?r="jury":t.isEvicted&&(r="evicted"),i.a.createElement("div",{onClick:function(){return e.onClick()},style:{backgroundColor:this.controller.backgroundColor(t,this.state.popularity)},className:"memory-wall-portrait ".concat(r)},i.a.createElement("img",{className:n,src:t.imageURL,style:{width:100,height:100}}),i.a.createElement("br",null),t.name,i.a.createElement("br",null),!!t.generateSubtitle&&i.a.createElement("small",{className:"portrait-history"},a))}}]),t}(i.a.Component);var V;n(33);!function(e){e.Friend="FRIEND",e.Queen="QUEEN",e.Pawn="PAWN",e.Enemy="ENEMY"}(V||(V={}));var z={FRIEND:"\u2665",ENEMY:"\ud83d\udc94",PAWN:"PAWN",QUEEN:"QUEEN"};function $(e,t,n){var a=n>e,i=n>t;return a&&i?V.Friend:a&&!i?V.Pawn:!a&&i?V.Queen:V.Enemy}function K(e,t,n){var a=0,r=t.popularity;r&&(r>1||r<-1)&&(r=e.popularity);var s=[];if(r&&!e.isEvicted){var o="".concat(b(r),"%"),c=function(e,t){if(b(e.popularity)!==b(t))return 0;return e.deltaPopularity?b(e.deltaPopularity):0}(e,r);if(n&&0!==c)o+="".concat(c>0?" | \u2191":" | \u2193"," ").concat(c,"%");s.push(i.a.createElement("div",{key:a++},o))}if(G(e)?s.push(i.a.createElement("div",{key:a++},"".concat(G(e)))):s.push(i.a.createElement("br",{key:a++,style:{lineHeight:1}})),e.isEvicted||null===W())s.push(i.a.createElement("br",{key:a++,style:{lineHeight:1}}));else{var l=W();if(l.id!==e.id){var u=function(e,t){var n=[];return n.push(z[$(e.popularity||0,t.popularity,e.relationships[t.id])]),n}(e,l);s=s.concat(u.map(function(e){return i.a.createElement("div",{key:a++},e)}))}else{var h=function(e){var t=[],n=e.getFriendEnemyCount?e.getFriendEnemyCount():{friends:0,enemies:0};return t.push("".concat(n.friends," ").concat(z[V.Friend]," | ").concat(n.enemies," ").concat(z[V.Enemy])),t}(e);s=s.concat(h.map(function(e){return i.a.createElement("div",{key:a++},e)}))}}return s}function Y(e,t){return K(e,t,!1)}function q(e,t){return K(e,t,!0)}function G(e){return"".concat(e.hohWins?"\u2654 ".concat(e.hohWins):"").concat(e.povWins&&e.hohWins?"|\ud83d\udec7 ".concat(e.povWins):e.povWins?"\ud83d\udec7 ".concat(e.povWins):"").concat((e.hohWins||e.povWins)&&e.nominations?"|":"").concat(e.nominations?"\u2718 ".concat(e.nominations):"")}function _(e,t){return i.a.createElement(Q,Object.assign({},e,{key:t,generateSubtitle:Y}))}var X=-1;function Z(e){return i.a.createElement("div",{key:X++,className:"columns is-gapless is-mobile is-multiline ".concat(e.centered&&"is-centered")},_(e.houseguest))}function ee(e){var t=[];return e.houseguests&&0!==e.houseguests.length?(e.houseguests.forEach(function(n){e.detailed?t.push(function(e,t){return i.a.createElement(Q,Object.assign({},e,{key:t,generateSubtitle:q}))}(n,X++)):t.push(_(n,X++))}),i.a.createElement("div",{className:"columns is-gapless is-mobile is-multiline ".concat(e.centered&&"is-centered")},t)):i.a.createElement("div",null)}function te(e){return i.a.createElement("div",{className:"memory-wall"},function(e){if(!e.houseguests||0===e.houseguests.length)return null;return i.a.createElement("div",{style:{margin:"auto",maxWidth:e.houseguests.length<26?700:-1}},i.a.createElement(ee,{houseguests:e.houseguests,centered:!0,detailed:!0}))}(e))}var ne=n(22),ae=n(16),ie=n.n(ae),re=n(20),se=n(21),oe=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={name:e.name},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({name:e.name})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"edit-portrait"},i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement("div",{className:"x-button noselect",onDoubleClick:function(){return e.props.onDelete()}},"\u2718"),i.a.createElement("img",{src:this.props.imageUrl,style:{width:100,height:100}}),i.a.createElement("br",null),i.a.createElement("input",{className:"memory-wall-portrait",contentEditable:!0,onChange:function(){return e.props.onChange},spellCheck:!1,value:this.state.name})))}}]),t}(i.a.Component),ce=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={text:""},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"onSubmit",value:function(){var e=this.state.text.split(/\r?\n/),t=[];e.forEach(function(e){var n=e.split("/").pop(),a=n?n.split("#")[0].split("?")[0].replace(/\.[^\/.]+$/,"").replace(/[-_]/g," "):null;e.substr(0,e.indexOf(" "))&&(a=e.substr(e.indexOf(" ")+1)),a&&t.push({name:a,imageURL:e})}),this.props.onSubmit(t),this.setState({text:""})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:this.props.className},i.a.createElement("textarea",{className:"textarea",onChange:function(t){e.setState({text:t.target.value})},value:this.state.text}),i.a.createElement("button",{onClick:function(){return e.onSubmit()}},"Import links"))}}]),t}(i.a.Component),le={eliminates:0,canPlayWith:function(e){return e>2}},ue=function e(t){Object(o.a)(this,e),this.title="Pregame",this.scenes=[],this.render=void 0,this.gameState=void 0,this.type=le,this.gameState=t,this.render=i.a.createElement(Ee,{cast:t.houseguests})};function he(e){var t=Object(a.useState)("16"),n=Object(y.a)(t,2),r=n[0],s=n[1];return i.a.createElement("div",null,i.a.createElement("button",{disabled:""===r,className:"button is-primary",onClick:function(){return e.random(parseInt(r))}},"Random"),i.a.createElement(me,{value:r,onChange:s}))}function me(e){return i.a.createElement("input",{className:"input",type:"text",style:{width:"3em",marginLeft:5},value:e.value,onChange:function(t){var n=t.target.value;/^\d*$/g.test(n)&&e.onChange(n)}})}var de=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).appendProfiles=function(e){var t=Object(d.a)({},n.state);e.forEach(function(e){return t.players.push(e)}),n.setState(t)},n.submit=Object(re.a)(ie.a.mark(function e(){return ie.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.players,j.next(t),be.next(i.a.createElement(Ee,{cast:n.state.players})),F(null),e.next=5,Oe(null);case 5:return e.next=7,Oe(new ue(new Xe(n.state.players)));case 7:case"end":return e.stop()}var t},e)})),n.random=function(e){var t=n.state.players;t=(t=Object(f.shuffle)(t)).slice(0,e),n.setState({players:t})},n.handleUpload=function(e){n.handleFiles(e.target.files)},n.handleDrop=function(e,t){e&&n.handleFiles(e)},n.state={players:e.cast||[]},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=this;return function(n){var a=n.target.value.replace(/\r?\n|\r/g,""),i=Object(d.a)({},t.state);i.players[e]=new p({imageURL:i.players[e].imageURL,name:a}),t.setState(i)}}},{key:"deleteMethod",value:function(e){var t=this;return function(){var n=Object(d.a)({},t.state);n.players.splice(e,1),t.setState(n)}}},{key:"getFiles",value:function(){var e=this,t=this.state.players;if(t){var n=[],a=0;return t.forEach(function(t){return n.push(i.a.createElement(oe,{name:t.name,imageUrl:t.imageURL,onDelete:e.deleteMethod(a),onChange:e.handleChange(a),key:(++a).toString()}))}),i.a.createElement("div",{className:"columns is-gapless is-mobile is-multiline is-centered"},n)}}},{key:"render",value:function(){var e=this;return i.a.createElement(se.a,{onDrop:this.handleDrop},i.a.createElement("div",{className:"level"},i.a.createElement(ce,{onSubmit:this.appendProfiles}),i.a.createElement("div",{className:"level-item"},i.a.createElement("button",{className:"button is-danger",onClick:function(){return e.setState({players:[]})}},"Delete all")),i.a.createElement("div",{className:"level-item"},i.a.createElement(he,{random:this.random})),i.a.createElement("div",{className:"level-item"},i.a.createElement("button",{className:"button is-primary",disabled:this.state.players.length<3,onClick:this.submit},"Submit"))),"~ Drop images ~",i.a.createElement("input",{type:"file",multiple:!0,onChange:this.handleUpload}),this.getFiles())}},{key:"handleFiles",value:function(e){for(var t=Object(d.a)({},this.state),n=0;n<e.length;n++){var a=e[n];a.type.match(/image\/*/)&&t.players.push(new p({name:a.name.substr(0,a.name.lastIndexOf("."))||a.name,imageURL:URL.createObjectURL(a)}))}this.setState(t)}}]),t}(i.a.Component);n(38);function pe(){return i.a.createElement("div",{className:"topbar-link",onClick:function(){be.next(i.a.createElement(de,{cast:k()}))}},"Edit Cast")}function ve(){return i.a.createElement("div",{className:"topbar-link",onClick:function(){be.next(i.a.createElement(de,{cast:k()}))}},"Edit Season")}function fe(){return i.a.createElement("div",{className:"level box is-mobile",style:{marginTop:30}},i.a.createElement("div",{className:"level-item"},i.a.createElement(pe,null)),i.a.createElement("div",{className:"level-item"},i.a.createElement(ve,null)))}function Ee(e){return 0===e.cast.length?i.a.createElement("div",null,"Cast is empty. ",i.a.createElement(pe,null)):i.a.createElement("div",null,"Welcome to Big Brother!",i.a.createElement(te,{houseguests:e.cast}),i.a.createElement(Se,null))}var be=new O.a(i.a.createElement(Ee,{cast:[]})),ge=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).contentStream=void 0,n.state={content:null},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentWillMount",value:function(){var e=this;this.contentStream=be.subscribe(function(t){e.setState({content:t})})}},{key:"componentDidUpdate",value:function(e,t){t.content!==this.state.content&&window.scrollTo(0,0)}},{key:"componentWillUnmount",value:function(){this.contentStream.unsubscribe()}},{key:"render",value:function(){return i.a.createElement("div",{className:"box"},this.state.content)}}]),t}(i.a.Component),ye=new O.a(null),we=new ne.a;function Oe(e){ye.next(e)}function je(e){we.next(e)}var ke=function(){function e(t){var n=this;Object(o.a)(this,e),this.view=void 0,this.subscriptions=[],this.season=new ze,this.scenes=[],this.selectedEpisode=0,this.switchSceneRelative=function(e){var t=n.view.state.selectedScene,a=n.scenes.length,i=t+e;if(!(i<0)){var r=n.view.state.episodes[n.view.state.episodes.length-1];if(i<a)n.switchToScene(i);else if(i===a){var s=r.gameState,o=qe(r.gameState).length,c=n.season.whichEpisodeType(o);o>2&&(Oe(n.season.renderEpisode(s,c)),n.switchSceneRelative(1))}}},this.view=t,this.subscriptions.push(ye.subscribe({next:function(e){return n.onNewEpisode(e)}})),this.subscriptions.push(we.subscribe({next:function(e){return n.switchSceneRelative(e)}})),this.subscriptions.push(j.subscribe({next:function(e){return n.season=new ze}}))}return Object(c.a)(e,[{key:"getSelectedEpisode",value:function(){return this.selectedEpisode}},{key:"switchToScene",value:function(e){be.next(this.scenes[e].scene.render),this.selectedEpisode=this.scenes[e].index,this.view.setState({selectedScene:e})}},{key:"handleKeyDown",value:function(e){37===e.keyCode?je(-1):39===e.keyCode&&je(1)}},{key:"onNewEpisode",value:function(e){var t=this;if(e){var n=Object(d.a)({},this.view.state),a=(0===this.scenes.length?-1:this.scenes[this.scenes.length-1].index)+1;this.scenes.push({scene:e,index:a}),e.scenes.forEach(function(e){return t.scenes.push({scene:e,index:a})}),n.episodes.push(e),this.view.setState(n)}else this.view.setState({episodes:[],selectedScene:0}),this.scenes=[]}},{key:"destroy",value:function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})}}]),e}();function Se(){return i.a.createElement("button",{className:"button is-primary",onClick:function(){return je(1)}},"Continue")}var xe=function(e,t){return e.relationships[t.id]};function Ce(e,t){return function(e,t,n){var a=0,i=-1/0;return t.forEach(function(t,r){var s=n(e,t);s>i&&(a=r,i=s)}),a}(e,t,xe)}function Ne(e,t,n){var a=0,i=1/0;return t.forEach(function(t,r){var s=n(e,t);s<i&&(a=r,i=s)}),a}function He(e,t){var n=e.hero,a=e.villain,i=0,r=0;return t.forEach(function(e){e.id!==n.id&&e.id!==a.id&&(xe(n,e)>xe(a,e)?i++:r++)}),i>r}function We(e,t){return 2*e.superiors.size!==t.remainingPlayers-1}function Fe(e,t,n){return _e(n)?function(e,t,n){var a=t[0],i=t[1],r=e.superiors.has(a.id),s=e.superiors.has(i.id);if(r===s)return Pe(e,t);if(n.remainingPlayers-e.superiors.size-1===1&&(r||s))return console.log("I, ".concat(e.name,", have only one inferior so I must evict nominee ").concat(r?0:1)),r?0:1;var o=We(e,n)===r?0:1,c=o?0:1,l=$(e.popularity,t[o].popularity,e.relationships[t[o].id])===V.Friend,u=$(e.popularity,t[c].popularity,e.relationships[t[c].id])===V.Friend;return l&&u?c:o}(e,t,n):Pe(e,t)}function Pe(e,t){var n=t[0],a=t[1],i=$(e.popularity,n.popularity,e.relationships[n.id]),r=$(e.popularity,a.popularity,e.relationships[a.id]);return i===V.Enemy&&r===V.Enemy?n.popularity>a.popularity?0:1:i===V.Enemy&&r!==V.Enemy||i!==V.Friend&&r===V.Friend?0:r===V.Enemy&&i!==V.Enemy||r!==V.Friend&&i===V.Friend?1:Ne(e,t,xe)}function Ue(e,t,n){var a=function(e,t,n){var a=t;return _e(n)&&We(e,n)&&(a=2*e.superiors.size<n.remainingPlayers-1?t.filter(function(t){return!e.superiors.has(t.id)}):t.filter(function(t){return e.superiors.has(t.id)})),new Set(a.map(function(e){return e.id}))}(e,t,n),i=t.filter(function(e){return a.has(e.id)});return 0===i.length&&(i=t),i[Ne(e,i,xe)].id}function Ie(e,t){var n=-1,a=$(e.popularity,t[0].popularity,e.relationshipWith(t[0])),i=$(e.popularity,t[1].popularity,e.relationshipWith(t[1]));return a===V.Friend&&i!==V.Friend?n=0:i===V.Friend&&a!==V.Friend?n=1:a===V.Friend&&i===V.Friend&&(n=Math.max(t[0].popularity,t[1].popularity)===t[0].popularity?0:1),t[n]}var Te={canPlayWith:function(e){return e>1},eliminates:1};function De(e,t,n,a){var r,s="";n[0]=$e(e,n[0].id),n[1]=$e(e,n[1].id),t=$e(e,t.id),(r=function(e,t,n){var a=null;return e.id==t[0].id||e.id==t[1].id?a=e:(_e(n),a=Ie(e,t),4===qe(n).length&&(a=null)),a||null}(a,n,e))?a.id==n[0].id||a.id==n[1].id?s+="...to use the power of veto on myself.":s+="...to use the power of veto on ".concat(r.name,"."):s+="... not to use the power of veto.";var o="",c="",l=n;if(r){l=n.filter(function(e){return e.id!=r.id}),c+=" ".concat(t.name,", since I have just vetoed one of your nominations, you must name a replacement nominee.");var u=Object(d.a)({},$e(e,Ue(t,Ke(e.houseguests,[t,n[0],n[1],a]),e)));u.nominations++,l.push(u),$e(e,u.id).nominations++,o="My replacement nominee is ".concat(u.name,".")}return[{title:"Veto Ceremony",gameState:e,render:i.a.createElement("div",null,"This is the Veto Ceremony.",i.a.createElement("br",null),"".concat(n[0].name," and ").concat(n[1].name," have been nominated for eviction."),i.a.createElement(ee,{houseguests:n}),"But I have the power to veto one of these nominations.",i.a.createElement("br",null),i.a.createElement("b",null,"I have decided...",i.a.createElement(Z,{houseguest:a}),s),c,o&&i.a.createElement(Z,{houseguest:t}),i.a.createElement("b",null,o),i.a.createElement(ee,{houseguests:l}),i.a.createElement(Se,null))},l]}function Re(e,t){var n=$e(e,t);n.isEvicted=!0,e.remainingPlayers-2<=Qe()&&(n.isJury=!0),_e(e)&&qe(e).forEach(function(e){e.superiors.delete(n.id)}),e.remainingPlayers--}var Me=function e(t){var n,a,r;Object(o.a)(this,e),this.title=void 0,this.scenes=[],this.render=void 0,this.gameState=void 0,this.type=Te;var s,c,l=function(e){var t=new Ze(e),n=e.previousHOH?[e.previousHOH]:[],a=Ye(t.houseguests,n);t.previousHOH=a,t.phase++,a.hohWins+=1;var r={title:"HoH Competition",gameState:e,render:i.a.createElement("div",null,n.length>0&&"Houseguests, it's time to find a new Head of Household. As outgoing HoH, ".concat(n[0].name," will not compete. "),i.a.createElement(Z,{houseguest:a}),a.name," has won Head of Household!",i.a.createElement("br",null),i.a.createElement(Se,null))};return[new Xe(t),r,a]}(t),u=Object(y.a)(l,3);n=u[0],a=u[1],r=u[2],this.scenes.push(a);var h,m,p=function(e,t){var n=new Ze(e),a=Ke(qe(n),[t]),r=$e(n,Ue(t,a,n)),s=$e(n,Ue(t,Ke(a,[r]),n));r.nominations++,s.nominations++;var o=Object(f.shuffle)([r,s]),c={title:"Nomination Ceremony",gameState:n,render:i.a.createElement("div",null,i.a.createElement(Z,{houseguest:t}),i.a.createElement("br",null),"This is the nomination ceremony. It is my responsibility as the Head of Household to nominate two houseguests for eviction.",i.a.createElement("br",null),i.a.createElement("b",null,"My first nominee is...",i.a.createElement("br",null),i.a.createElement(Z,{houseguest:o[0]}),i.a.createElement("br",null),"My second nominee is...",i.a.createElement("br",null),i.a.createElement(Z,{houseguest:o[1]}),"I have nominated you, ".concat(o[0].name," and you, ").concat(o[1].name," for eviction."),i.a.createElement("br",null)),i.a.createElement(Se,null))};return[new Xe(n),c,[r,s]]}(n,r),v=Object(y.a)(p,3);n=v[0],s=v[1],c=v[2],this.scenes.push(s);var E,b=function(e,t,n,a){var r=new Ze(e),s=qe(r),o=[],c=s.length<=6;if(c)for(o.push(Object(d.a)({},t)),o.push(Object(d.a)({},n)),o.push(Object(d.a)({},a));o.length<s.length;)o.push(Object(d.a)({},Ye(s,o)));else o.push(Object(d.a)({},t)),o.push(Object(d.a)({},n)),o.push(Object(d.a)({},a)),o.push(Object(d.a)({},Ye(s,o))),o.push(Object(d.a)({},Ye(s,o))),o.push(Object(d.a)({},Ye(s,o)));var l,u=Ye(o);(u=$e(r,u.id)).povWins++,l=c?"Everyone left in the house will compete in this challenge.":"".concat(t.name,", as Head of Household, and ").concat(n.name," and ").concat(a.name," as nominees, will compete, as well as 3 others chosen by random draw.");var h=[o[3]];o[4]&&h.push(o[4]),o[5]&&h.push(o[5]);var m={title:"Veto Competition",gameState:e,render:i.a.createElement("div",null,"It's time to pick players for the veto competition.",i.a.createElement("br",null),i.a.createElement(ee,{houseguests:[t,n,a]}),i.a.createElement("br",null),l,i.a.createElement("br",null),i.a.createElement(ee,{houseguests:h}),"...",i.a.createElement(ee,{houseguests:[u]}),"".concat(u.name," has won the Golden Power of Veto!"),i.a.createElement("br",null),i.a.createElement(Se,null))};return[new Xe(r),m,u]}(n,r,c[0],c[1]),g=Object(y.a)(b,3);n=g[0],h=g[1],m=g[2],this.scenes.push(h);var w,O=De(n,r,c,m),j=Object(y.a)(O,2);E=j[0],c=j[1],this.scenes.push(E);var k=function(e,t,n){var a=new Ze(e);n=Object(f.shuffle)(n);var r=[[],[]];qe(a).forEach(function(e){e.id!==n[0].id&&e.id!==n[1].id&&e.id!==t.id&&r[Fe(e,n,a)].push(e)});var s,o=r[0].length,c=r[1].length,l=o===c,u=0;l&&(u=Fe(t,n,a)),s=o>c?n[0]:c>o?n[1]:n[u],Re(a,s.id);var h=0===o||0===c?"By a unanimous vote...":"By a vote of ".concat(o," to ").concat(c,"..."),m={title:"Live Eviction",gameState:e,render:i.a.createElement("div",null,i.a.createElement("p",{style:{textAlign:"center"}},i.a.createElement("b",null,h," ")),i.a.createElement("div",{className:"columns is-centered"},i.a.createElement("div",{className:"column box"},i.a.createElement(ee,{houseguests:r[0],centered:!0})),i.a.createElement("div",{className:"column box"},i.a.createElement(ee,{houseguests:r[1],centered:!0}))),l&&i.a.createElement("div",null,i.a.createElement("p",{style:{textAlign:"center"}},i.a.createElement("b",null," We have a tie.")," ",i.a.createElement("br",null),"".concat(t.name,", as current Head of Household, you must cast the sole vote to evict.")),i.a.createElement(ee,{houseguests:[t],centered:!0}),i.a.createElement("p",{style:{textAlign:"center"}},i.a.createElement("b",null,"I vote to evict ","".concat(s.name,".")))),i.a.createElement(ee,{houseguests:[$e(a,n[0].id),$e(a,n[1].id)],centered:!0}),i.a.createElement("p",{style:{textAlign:"center"}},i.a.createElement("b",null,"".concat(s.name,"... you have been evicted from the Big Brother House."))),i.a.createElement(Se,null))};return[a,m]}(n,r,c),S=Object(y.a)(k,2);n=S[0],w=S[1],this.scenes.push(w),this.title="Week ".concat(n.phase),this.render=i.a.createElement("div",null,"Week ".concat(n.phase),i.a.createElement(te,{houseguests:t.houseguests})," ",i.a.createElement("br",null),i.a.createElement(Se,null)),this.gameState=new Xe(n)},Ae={canPlayWith:function(e){return 3===e},eliminates:2};function Be(e){for(var t=Ge(e),n=qe(e),a=[0,0],r=t.map(function(e){var t=function(e,t){return Ce(e,t)}(e,n);return a[t]++,t}),s=[],o=0;o<r.length;o++)s.push(i.a.createElement("div",{className:"columns",key:"jury-vote".concat(o)},i.a.createElement(Z,{houseguest:t[o]}),i.a.createElement("p",null,i.a.createElement("b",null,"".concat(t[o].name," has voted for..."))),i.a.createElement(Z,{houseguest:n[r[o]]})));var c=a[0]>a[1]?n[0]:n[1];return{title:"Jury Votes",gameState:e,render:i.a.createElement("div",null,s,i.a.createElement(Z,{houseguest:c}),"Congratulations, ".concat(c.name,", you are the winner of Big Brother!!!"))}}var Le=function e(t){var n,a,r;Object(o.a)(this,e),this.title=void 0,this.scenes=[],this.render=void 0,this.gameState=void 0,this.type=Ae,this.title="Finale",this.render=i.a.createElement("div",null,"Finale Night",i.a.createElement(te,{houseguests:t.houseguests})," ",i.a.createElement("br",null),i.a.createElement(Se,null));var s,c=function(e){var t=new Ze(e),n=qe(e),a=Ye(n),r=n.filter(function(e){return e.id!==a.id}),s=Ye(n,[a]),o=$e(t,Ye([a,s]).id);o.hohWins++;var c={title:"Final HoH Competition",gameState:t,render:i.a.createElement("div",null,i.a.createElement("p",null,"The final 3 houseguests compete in the endurance competition."),i.a.createElement(ee,{houseguests:n}),i.a.createElement(Z,{houseguest:a}),i.a.createElement("p",null,i.a.createElement("b",null,"".concat(a.name," has won the endurance competition!"))),i.a.createElement("hr",null),i.a.createElement("p",null,"".concat(r[0].name," and ").concat(r[1].name," compete in the skill competition.")),i.a.createElement(ee,{houseguests:r}),i.a.createElement(Z,{houseguest:s}),i.a.createElement("p",null,i.a.createElement("b",null,"".concat(s.name," has won the skill competition!"))),i.a.createElement("hr",null),i.a.createElement("p",null,"".concat(a.name," and ").concat(s.name," compete in the quiz competition.")),i.a.createElement(ee,{houseguests:[a,s]}),i.a.createElement(Z,{houseguest:o}),i.a.createElement("p",null,i.a.createElement("b",null,"Congratulations ".concat(o.name,", you are the final Head of Household!"))),i.a.createElement(Se,null))};return t.phase++,[new Xe(t),c,o]}(t),l=Object(y.a)(c,3);n=l[0],a=l[1],r=l[2],this.scenes.push(a);var u,h=function(e,t){var n=new Ze(e),a=qe(n).filter(function(e){return e.id!==t.id}),r=a[Fe(t,a,n)];Re(n,r.id);var s={title:"Final Eviction",gameState:n,render:i.a.createElement("div",null,i.a.createElement("div",{style:{textAlign:"center"}},"As the final HoH of the season, ".concat(t.name,", you may now cast the sole vote to evict."),i.a.createElement(Z,{houseguest:t,centered:!0}),i.a.createElement("b",null,i.a.createElement("p",null,"I vote to evict ".concat(r.name,"."))),i.a.createElement(ee,{houseguests:a,centered:!0}),i.a.createElement("p",null,"It's official... ",r.name,", you will be the final person leaving the Big Brother House.")),i.a.createElement(Se,null))};return[new Xe(n),s]}(n,r),m=Object(y.a)(h,2);n=m[0],s=m[1],this.scenes.push(s),u=Be(n),this.scenes.push(u),this.gameState=n};var Je=function(){function e(){Object(o.a)(this,e)}return Object(c.a)(e,[{key:"nextEpisode",value:function(e,t){var n=new Ze(e);0===e.phase&&function(e){for(var t=0;t<e.length;t++)for(var n=e[t].relationships,a=t+1;a<e.length;a++){var i=e[a].relationships,r=C().randomFloat();i[t]=r,n[a]=r}}(n.houseguests),_e(e)&&0===Ge(e).length&&function(e){for(var t=0;t<e.length;t++)for(var n=e[t],a=t+1;a<e.length;a++){var i=e[a];He({hero:n,villain:i},e)?i.superiors.add(n.id):n.superiors.add(i.id)}}(qe(n)),function(e){qe(e).forEach(function(t){var n=function(e,t){var n=0,a=0,i=e.id;return t.forEach(function(e){e.id!==i&&(a++,n+=e.relationships[i])}),0===a?0:n/a}(t,qe(e));t.deltaPopularity=(b(n)-b(t.popularity))/100,t.popularity=n})}(n),function(e){var t=qe(e);t.forEach(function(e){e.getFriendEnemyCount=function(){var n=0,a=0;return t.forEach(function(t){var i=$(e.popularity,t.popularity,e.relationshipWith(t));e.id!==t.id&&(i===V.Friend?n++:i===V.Enemy&&a++)}),{friends:n,enemies:a}}})}(n);var a=new Xe(n);switch(t){case Te:return new Me(a);case Ae:return new Le(a);default:throw new Error("Unsupported Episode Type")}}}]),e}();function Qe(){return Ve}var Ve=7;j.subscribe({next:function(e){var t=e.length;(t=Math.round(.55*t))%2===0&&t--,Ve=t}});var ze=function(){function e(){Object(o.a)(this,e),this.factory=void 0,this.factory=new Je}return Object(c.a)(e,[{key:"renderEpisode",value:function(e,t){return this.factory.nextEpisode(e,t)}},{key:"whichEpisodeType",value:function(e){return 3===e?Ae:Te}}]),e}();function $e(e,t){var n=e.houseguests.find(function(e){return e.id===t});if(!n)throw new Error("Failed to find houseguest with id ".concat(t));return n}function Ke(e,t){var n=t.map(function(e){return e.id});return e.filter(function(e){return!n.includes(e.id)&&!e.isEvicted})}function Ye(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===e.length)throw new Error("Tried to get a random player from a list of 0 players.");var n=Ke(e,t);return n[C().randomInt(0,n.length-1)]}function qe(e){return e.houseguests.filter(function(e){return!e.isEvicted})}function Ge(e){return e.houseguests.filter(function(e){return e.isJury})}function _e(e){return e.remainingPlayers-2<=Qe()}var Xe=function e(t){var n=this;if(Object(o.a)(this,e),this.houseguests=[],this.remainingPlayers=0,this.phase=0,this.previousHOH=void 0,t instanceof Array){var a=t;this.remainingPlayers=a.length;var i=-1;a.forEach(function(e){n.houseguests.push(new v(Object(d.a)({},e,{id:++i,relationships:g(a.length,i)})))})}else Object.assign(this,t)},Ze=function e(t){Object(o.a)(this,e),this.houseguests=[],this.remainingPlayers=0,this.phase=0,this.previousHOH=void 0;var n=E.a.cloneDeep(t);Object.assign(this,n)},et=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).controller=void 0,n.controller=new ke(Object(m.a)(Object(m.a)(n))),n.state={episodes:[],selectedScene:0},Oe(new ue(new Xe([]))),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.controller.handleKeyDown)}},{key:"componentWillUnmount",value:function(){this.controller.destroy()}},{key:"render",value:function(){return i.a.createElement("div",{className:"box",style:{minWidth:140}},this.getEpisodes())}},{key:"getHighlight",value:function(e,t){return t===this.state.selectedScene?i.a.createElement("mark",null,e):e}},{key:"getEpisodes",value:function(){var e=this,t=[],n=-1,a=0;return this.state.episodes.forEach(function(r){var s=++n;t.push(i.a.createElement("b",{key:s,onClick:function(){e.controller.switchToScene(s)}},e.getHighlight(r.title,s))),t.push(i.a.createElement("br",{key:--a})),r.scenes.forEach(function(s){var o=++n;e.controller.getSelectedEpisode()===r.gameState.phase&&(t.push(i.a.createElement("a",{key:o,onClick:function(){return e.controller.switchToScene(o)}},e.getHighlight(s.title,o))),t.push(i.a.createElement("br",{key:--a})))})}),t}}]),t}(i.a.Component),tt=function(e){function t(e){var n;return Object(o.a)(this,t),n=Object(l.a)(this,Object(u.a)(t).call(this,e)),e.controller.inject(Object(m.a)(Object(m.a)(n))),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"main-page"},i.a.createElement(fe,null),i.a.createElement("div",{className:"columns"},i.a.createElement("div",{className:"column is-narrow"},i.a.createElement(et,null)),i.a.createElement("div",{className:"column"},i.a.createElement(ge,null))))}}]),t}(i.a.Component),nt=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement(tt,{controller:new S})}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(nt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[23,1,2]]]);
//# sourceMappingURL=main.9f6911f1.chunk.js.map