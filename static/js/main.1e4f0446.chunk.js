(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,n){e.exports=n(53)},39:function(e,t,n){},53:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(18),o=n.n(i),c=n(1),s=n(2),u=n(6),l=n(5),h=n(7),m=n(12),d=(n(39),n(8)),f=n(13),v=n.n(f),p=n(15),g=n(9),b=n(4),E=n(17),y=function e(t){Object(c.a)(this,e),this.name="",this.imageURL="",t&&Object.assign(this,t)},w=function(){function e(t,n){if(Object(c.a)(this,e),this.beats=void 0,this.outOf=void 0,0===n)throw new Error("Power ranking attempted to divide by zero");this.beats=t,this.outOf=n}return Object(s.a)(e,[{key:"toFloat",get:function(){return this.beats/this.outOf}}]),e}(),O=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).isEvicted=!1,n.isJury=!1,n.id=0,n.nominations=0,n.hohWins=0,n.povWins=0,n.popularity=0,n.deltaPopularity=0,n.relationships={},n.targets=[n.id,n.id],n.powerRanking=new w(0,1),n.superiors=new Set,n.friends=0,n.enemies=0,n.targetingMe=0,Object.assign(Object(m.a)(Object(m.a)(n)),e),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"relationshipWith",value:function(e){return this.relationships[e.id]}}]),t}(y),j=n(11),k=n.n(j);function x(e){return e?Math.round(100*e):0}function S(e){return null!==e&&void 0!==e}function C(e){return null===e||void 0===e}function M(e,t){for(var n={},a=0;a<e;a++)a!==t&&(n[a]=0);return n}var N=n(19),W=n(54),A=n(30);function P(e){!e||Ut()&&Ut().id===e.id?Ht.next(null):Ht.next(e)}function I(e){var t=Math.round(e).toString(16);return 1==t.length?"0"+t:t}var L=function(){function e(t,n,a){Object(c.a)(this,e),this.r=void 0,this.g=void 0,this.b=void 0,this.r=t,this.g=n,this.b=a}return Object(s.a)(e,[{key:"toHex",value:function(){return"#"+I(this.r)+I(this.g)+I(this.b)}},{key:"toRgba",value:function(){return"rgba(".concat(this.r,", ").concat(this.g,", ").concat(this.b,", 1)")}}]),e}();function F(e,t,n){return new L(e.r+n*(t.r-e.r),e.g+n*(t.g-e.g),e.b+n*(t.b-e.b)).toHex()}var H=new L(51,255,249),U=function(){function e(t){var n=this;Object(c.a)(this,e),this.subs=[],this.view=void 0,this.refreshData=function(e){e?e.id!==n.view.props.id?n.view.setState({popularity:e.relationships[n.view.props.id],powerRanking:n.comparePowerRankings(e)}):n.view.setState({popularity:2,powerRanking:new w(2,1)}):n.view.setState(n.defaultState)},this.view=t}return Object(s.a)(e,[{key:"backgroundColor",value:function(e){var t=Ut();return null!==t&&t.id===e.id?H.toHex():e.isEvicted?void 0:this.view.state.displayMode.backgroundColor(this.view.state)}},{key:"subscribe",value:function(){var e=this,t=[];t.push(Ht.subscribe({next:this.refreshData})),t.push(Dt.subscribe({next:function(t){return e.view.setState({displayMode:t})}})),this.subs=t}},{key:"unsubscribe",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"comparePowerRankings",value:function(e){if(!e.superiors)return new w(0,1);var t=void 0===this.view.props.id?-1:this.view.props.id;return e.superiors.has(t)?new w(1,1):new w(0,1)}},{key:"defaultState",get:function(){return{popularity:this.view.props.popularity,displayMode:Dt.value,powerRanking:this.view.props.powerRanking}}}]),e}(),R=n(3);function D(){var e=Object(b.a)(["\n    filter: sepia(100%);\n"]);return D=function(){return e},e}function T(){var e=Object(b.a)(["\n    filter: grayscale(100%);\n"]);return T=function(){return e},e}function V(){var e=Object(b.a)(["\n    min-width: 100px;\n    width: 100%;\n    width: -moz-available; /* For Mozzila */\n    width: -webkit-fill-available; /* For Chrome */\n    width: stretch; /* Unprefixed */\n    -webkit-transition-property: none;\n    -moz-transition-property: none;\n    -o-transition-property: none;\n    transition-property: none;\n"]);return V=function(){return e},e}function B(){var e=Object(b.a)(["\n    font-weight: 100;\n    color: #c3ae88;\n    background-color: #5d5340;\n    filter: brightness(0.6);\n"]);return B=function(){return e},e}function z(){var e=Object(b.a)(["\n    font-weight: 100;\n    color: grey;\n    background-color: #111111;\n"]);return z=function(){return e},e}function _(){var e=Object(b.a)(["\n    margin: 5px;\n    border: 1px solid ",";\n    color: black;\n    border-radius: 5px;\n    text-align: center;\n    font-weight: 600;\n    width: 7rem;\n    word-wrap: break-word;\n    -webkit-transition-property: none;\n    -moz-transition-property: none;\n    -o-transition-property: none;\n    transition-property: none;\n"]);return _=function(){return e},e}function G(){var e=Object(b.a)(["\n    font-weight: 100;\n    font-size: small;\n"]);return G=function(){return e},e}var Q=R.c.small(G()),J=R.c.div(_(),function(e){return e.theme.portraitBorder}),Y=Object(R.c)(J)(z()),q=Object(R.c)(J)(B()),K=R.c.img(V()),X=Object(R.c)(K)(T()),$=Object(R.c)(K)(D()),Z=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).controller=void 0,n.controller=new U(Object(m.a)(Object(m.a)(n))),n.state=n.controller.defaultState,n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){C(this.props.id)||this.controller.subscribe()}},{key:"componentWillUnmount",value:function(){this.controller.unsubscribe()}},{key:"onClick",value:function(){!C(this.props.id)&&this.props.relationships&&P({id:this.props.id,relationships:this.props.relationships,isEvicted:!!this.props.isEvicted,popularity:this.props.popularity||0,superiors:this.props.superiors})}},{key:"render",value:function(){var e,t=this,n=this.props,a=function(e){var t=e.isEvicted?X:K;return t=e.isJury?$:t}(n);e=this.state.displayMode.generateSubtitle(this.props,this.state,!!n.detailed);var i=J;return n.isJury?i=q:n.isEvicted&&(i=Y),r.a.createElement(i,{onClick:function(){return t.onClick()},style:{backgroundColor:this.controller.backgroundColor(n)}},r.a.createElement(a,{src:n.imageURL,style:{height:100,width:"-moz-available"}}),r.a.createElement("br",null),n.name,r.a.createElement("br",null),r.a.createElement(Q,null,e))}}]),t}(r.a.Component);function ee(e,t){return r.a.createElement(Z,Object.assign({},e,{key:t,detailed:!1}))}var te=n(27),ne=n.n(te);function ae(){var e=Object(b.a)(["\n    max-width: 200px;\n    padding: 3px 8px;\n    color: #fff;\n    text-align: center;\n    background-color: #000;\n    border-radius: 4px;\n"]);return ae=function(){return e},e}var re=R.c.p(ae()),ie=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={visible:!1},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(ne.a,{position:["top","bottom"],isOpen:this.state.visible,content:r.a.createElement(re,null,this.props.text)},r.a.createElement("div",{onMouseEnter:function(){return e.setState({visible:!0})},onMouseLeave:function(){return e.setState({visible:!1})}},this.props.children))}}]),t}(r.a.Component),oe=-1;function ce(e){return r.a.createElement("div",{key:oe++,className:"columns is-gapless is-mobile is-multiline ".concat(e.centered?"is-centered":"")},e.children)}function se(e){var t=r.a.createElement(ce,{centered:e.centered},ee(e.houseguest));return e.houseguest.tooltip?r.a.createElement(ce,{centered:e.centered},r.a.createElement(ie,{text:e.houseguest.tooltip},ee(e.houseguest))):t}function ue(e){var t=[];return e.houseguests&&0!==e.houseguests.length?(e.houseguests.forEach(function(n){var a;a=e.detailed?function(e,t){return r.a.createElement(Z,Object.assign({},e,{key:t,detailed:!0}))}(n,oe++):ee(n,oe++),n.tooltip&&(a=r.a.createElement(ie,{key:oe++,text:n.tooltip},a)),t.push(a)}),r.a.createElement("div",{className:"columns is-gapless is-mobile is-multiline ".concat(e.centered&&"is-centered")},t)):r.a.createElement("div",null)}function le(e){return e.houseguests&&0!==e.houseguests.length?r.a.createElement("div",{style:{margin:"auto",maxWidth:e.houseguests.length<26?800:-1}},r.a.createElement(ue,{houseguests:e.houseguests,centered:!0,detailed:!0})):r.a.createElement("div",null)}function he(){return r.a.createElement("button",{className:"button is-primary",onClick:function(){return Lt(1)}},"Continue")}var me=n(28);function de(){var e=Object(b.a)(["\n    color: #300808;\n\n    :active {\n        color: #ff7133;\n        background-color: #ffd8c7;\n    }\n    :hover {\n        color: red;\n        background-color: #ffe1ea;\n    }\n"]);return de=function(){return e},e}function fe(){var e=Object(b.a)(["\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -khtml-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n"]);return fe=function(){return e},e}function ve(){var e=Object(b.a)(["\n    padding: 5px;\n    margin: 5px;\n    border: 1px solid ",";\n    color: black;\n    border-radius: 5px;\n    font-weight: 600;\n    width: 7rem;\n    word-wrap: break-word;\n"]);return ve=function(){return e},e}function pe(){var e=Object(b.a)(["\n    padding: 5px;\n    margin: 5px;\n    border: 1px solid grey;\n    background-color: grey;\n    color: black;\n    border-radius: 5px;\n    font-weight: 600;\n    width: 7rem;\n    word-wrap: break-word;\n"]);return pe=function(){return e},e}var ge,be=R.c.div(pe()),Ee=(R.c.input(ve(),function(e){return e.theme.portraitBorder}),R.c.div(fe())),ye=Object(R.c)(Ee)(de()),we=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={name:e.name},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({name:e.name})}},{key:"render",value:function(){var e=this;return r.a.createElement(be,null,r.a.createElement("div",{style:{textAlign:"center"}},r.a.createElement(ye,{onDoubleClick:function(){return e.props.onDelete()}},"\u2718"),r.a.createElement("img",{src:this.props.imageUrl,style:{width:100,height:100}}),r.a.createElement("br",null),r.a.createElement("p",null,this.state.name," ")))}}]),t}(r.a.Component),Oe=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={text:""},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"onSubmit",value:function(){var e=this.state.text.split(/\r?\n/),t=[];e.forEach(function(e){var n=e.split("/").pop(),a=n?n.split("#")[0].split("?")[0].replace(/\.[^/.]+$/,"").replace(/[-_]/g," "):null;e.substr(0,e.indexOf(" "))&&(a=e.substr(e.indexOf(" ")+1)),a&&t.push({name:a,imageURL:e})}),this.props.onSubmit(t),this.setState({text:""})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:this.props.className},r.a.createElement("textarea",{className:"textarea",onChange:function(t){e.setState({text:t.target.value})},value:this.state.text}),r.a.createElement("button",{onClick:function(){return e.onSubmit()}},"Import links"))}}]),t}(r.a.Component);!function(e){e.Friend="FRIEND",e.Queen="QUEEN",e.Pawn="PAWN",e.Enemy="ENEMY"}(ge||(ge={}));var je={FRIEND:"\u2665",ENEMY:"\ud83d\udc94",PAWN:"PAWN",QUEEN:"QUEEN"};function ke(e,t,n){var a=n>e,r=n>t;return a&&r?ge.Friend:a&&!r?ge.Pawn:!a&&r?ge.Queen:ge.Enemy}function xe(e,t,n,a,i){var o=e.popularity;if(o&&(o>1||o<-1)&&(o=t.popularity),o&&!t.isEvicted){var c="".concat(x(o),"%"),s=function(e,t){if(x(e.popularity)!==x(t))return 0;return e.deltaPopularity?x(e.deltaPopularity):0}(t,o);if(n&&0!==s)c+="".concat(s>0?" | \u2191":" | \u2193"," ").concat(s,"%");a.push(r.a.createElement("div",{key:i++},c))}return i}function Se(e,t,n){return Ce(e)?t.push(r.a.createElement("div",{key:n++},"".concat(Ce(e)))):t.push(r.a.createElement("br",{key:n++,style:{lineHeight:1}})),n}function Ce(e){return"".concat(e.hohWins?"\u2654 ".concat(e.hohWins):"").concat(e.povWins&&e.hohWins?"|\ud83d\udec7 ".concat(e.povWins):e.povWins?"\ud83d\udec7 ".concat(e.povWins):"").concat((e.hohWins||e.povWins)&&e.nominations?"|":"").concat(e.nominations?"\u2718 ".concat(e.nominations):"")}var Me=new L(252,137,137),Ne=new L(137,252,137),We={minColor:Me,maxColor:Ne,backgroundColor:function(e){var t=function(e){if(!e)return 0;var t=e*e;return e>=0?2*e-t:t+2*e}(e.popularity);return F(Me,Ne,(t+1)/2)},generateSubtitle:function(e,t){var n=0,a=[],i=function(e,t,n){if(e.isEvicted)t.push(r.a.createElement("br",{key:n++,style:{lineHeight:1}}));else{var a=Ut();if(a&&a.id!==e.id){var i=function(e,t){var n=[];return n.push(je[ke(e.popularity||0,t.popularity,e.relationships[t.id])]),n}(e,a);t=t.concat(i.map(function(e){return r.a.createElement("div",{key:n++},e)}))}else{var o=function(e){var t=[],n=S(e.friends)&&S(e.enemies)?{friends:e.friends,enemies:e.enemies}:{friends:0,enemies:0};return t.push("".concat(n.friends," ").concat(je[ge.Friend],"| ").concat(n.enemies," ").concat(je[ge.Enemy]).concat(e.targetingMe?"| \ud83c\udfaf ".concat(e.targetingMe):"")),t}(e);t=t.concat(o.map(function(e){return r.a.createElement("div",{key:n++},e)}))}}return{subtitle:t,key:n}}(e,a,n=Se(e,a,n=xe(t,e,arguments.length>2&&void 0!==arguments[2]&&arguments[2],a,n)));return a=i.subtitle,n=i.key,a}},Ae=new L(255,204,94),Pe=new L(192,181,255),Ie={minColor:Pe,maxColor:Ae,backgroundColor:function(e){var t=e.powerRanking;return void 0===t?"":F(Pe,Ae,t.toFloat)},generateSubtitle:function(e,t,n){var a=0,i=[];if(a=Se(e,i,a=xe(t,e,!!n,i,a)),!e.isEvicted&&t.powerRanking){var o=Ut();o&&o.id!==e.id?i.push(r.a.createElement("div",{key:a++},"".concat(t.powerRanking.beats>0?"LOSE":"WIN"))):o&&o.id===e.id?i.push(r.a.createElement("div",{key:a++},"I WOULD")):i.push(r.a.createElement("div",{key:a++},"WIN ".concat(t.powerRanking.beats,"/").concat(t.powerRanking.outOf).concat(e.targetingMe?" | \ud83c\udfaf ".concat(e.targetingMe):"")))}else i.push(r.a.createElement("br",{key:a++,style:{lineHeight:1}}));return i}};var Le=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).sub=null,n.state={selected:e.mode===Dt.value},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.sub=Dt.subscribe({next:function(t){t!==e.props.mode?e.setState({selected:!1}):e.setState({selected:!0})}})}},{key:"componentWillUnmount",value:function(){this.sub&&this.sub.unsubscribe()}},{key:"render",value:function(){var e,t,n=this,a=(e=this.props).disabled?{}:{background:"linear-gradient(90deg, ".concat(e.mode.minColor.toRgba()," 0%, ").concat(e.mode.maxColor.toRgba()," 100%)"),cursor:"pointer"};return r.a.createElement("span",{className:"level-item tag is-medium is-light",style:a,onClick:function(){var e;!n.props.disabled&&(e=n.props.mode,Dt.next(e)),!n.props.disabled&&n.setState({selected:!0})}},(t=this.props.text,this.state.selected?r.a.createElement("b",null,t):r.a.createElement("i",null,t)))}}]),t}(r.a.Component);var Fe=function(e){function t(e){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).call(this,e))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidUpdate",value:function(){Kt(this.props.gameState)||Dt.value!==Ie||Dt.next(We)}},{key:"render",value:function(){return r.a.createElement("div",{className:"level is-mobile",key:"viewsbar",style:{marginBottom:0}},r.a.createElement(Le,{mode:We,text:"Relationships"}),Kt(this.props.gameState)&&r.a.createElement(Le,{mode:Ie,text:"Power Rankings"}))}}]),t}(r.a.Component),He=function(){function e(t){Object(c.a)(this,e),this.scenes=void 0,this.title=void 0,this.content=void 0,this.gameState=void 0,this.initialGameState=void 0,this.type=void 0,this.arrowsEnabled=!0,this.scenes=t.scenes,this.title=t.title,this.content=t.content,this.gameState=t.gameState,this.initialGameState=t.initialGamestate||t.gameState,this.type=t.type}return Object(s.a)(e,[{key:"render",get:function(){var e=this.type.hasViewsbar?r.a.createElement(Fe,{gameState:this.initialGameState}):null;return r.a.createElement("div",null,e,this.content)}}]),e}(),Ue={eliminates:0,canPlayWith:function(e){return e>2},arrowsEnabled:!0,hasViewsbar:!1},Re=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,{title:"Pregame",scenes:[],content:r.a.createElement(Nt,{cast:e.houseguests}),gameState:e,type:Ue}))).title="Pregame",n.scenes=[],n.content=void 0,n.gameState=void 0,n.type=Ue,n.gameState=e,n.content=r.a.createElement(Nt,{cast:e.houseguests}),n}return Object(h.a)(t,e),t}(He);function De(e){var t=Object(a.useState)("16"),n=Object(g.a)(t,2),i=n[0],o=n[1];return r.a.createElement("div",null,r.a.createElement("button",{disabled:""===i,className:"button is-primary",onClick:function(){return e.random(parseInt(i))}},"Random"),r.a.createElement(Te,{value:i,onChange:o}))}function Te(e){return r.a.createElement("input",{className:"input",type:"text",style:{width:"3em",marginLeft:5},value:e.value,onChange:function(t){var n=t.target.value;/^\d*$/g.test(n)&&e.onChange(n)}})}function Ve(){var e=Object(b.a)(["\n    color: ",";\n"]);return Ve=function(){return e},e}function Be(){var e=Object(b.a)(["\n    color: ",";\n"]);return Be=function(){return e},e}var ze=R.c.div(Be(),function(e){return e.theme.text}),_e=R.c.input(Ve(),function(e){return e.theme.text});function Ge(){var e=Object(b.a)(["\n    text-align: center;\n    color: ",";\n"]);return Ge=function(){return e},e}function Qe(){var e=Object(b.a)(["\n    text-align: center;\n    color: ",";\n"]);return Qe=function(){return e},e}var Je=R.c.div(Qe(),function(e){return e.theme.text}),Ye=R.c.p(Ge(),function(e){return e.theme.text});function qe(e){return e.noMargin?r.a.createElement(Je,null,e.children):r.a.createElement(Ye,null,e.children," ")}function Ke(e){return r.a.createElement(qe,{noMargin:e.noMargin},r.a.createElement("b",null,e.children," "))}function Xe(e){return r.a.createElement(qe,{noMargin:e.noMargin},r.a.createElement("i",null,e.children," "))}var $e=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).appendProfiles=function(e){var t=Object(d.a)({},n.state);e.forEach(function(e){return t.players.push(e)}),n.setState(t)},n.submit=Object(p.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.players,Ft.next(t),Wt.next(r.a.createElement(Nt,{cast:n.state.players})),P(null),e.next=5,It(null);case 5:return e.next=7,It(new Re(new Xt(n.state.players)));case 7:case"end":return e.stop()}var t},e)})),n.random=function(e){var t=n.state.players;t=(t=Object(j.shuffle)(t)).slice(0,e),n.setState({players:t})},n.handleUpload=function(e){n.handleFiles(e.target.files)},n.handleDrop=function(e,t){e&&n.handleFiles(e)},n.state={players:e.cast||[]},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"handleChange",value:function(e){var t=this;return function(n){var a=n.target.value.replace(/\r?\n|\r/g,""),r=Object(d.a)({},t.state);r.players[e]=new y({imageURL:r.players[e].imageURL,name:a}),t.setState(r)}}},{key:"deleteMethod",value:function(e){var t=this;return function(){var n=Object(d.a)({},t.state);n.players.splice(e,1),t.setState(n)}}},{key:"getFiles",value:function(){var e=this,t=this.state.players;if(t){var n=[],a=0;return t.forEach(function(t){return n.push(r.a.createElement(we,{name:t.name,imageUrl:t.imageURL,onDelete:e.deleteMethod(a),onChange:e.handleChange(a),key:(++a).toString()}))}),r.a.createElement("div",{className:"columns is-gapless is-mobile is-multiline is-centered"},n)}}},{key:"render",value:function(){var e=this;return r.a.createElement(me.a,{onDrop:this.handleDrop},r.a.createElement(ze,{className:"level"},r.a.createElement(Oe,{onSubmit:this.appendProfiles}),r.a.createElement("div",{className:"level-item"},r.a.createElement("button",{className:"button is-danger",onClick:function(){return e.setState({players:[]})}},"Delete all")),r.a.createElement("div",{className:"level-item"},r.a.createElement(De,{random:this.random})),r.a.createElement("div",{className:"level-item"},r.a.createElement("button",{className:"button is-primary",disabled:this.state.players.length<3,onClick:this.submit},"Submit"))),r.a.createElement(_e,{type:"file",multiple:!0,onChange:this.handleUpload}),0===this.state.players.length&&r.a.createElement(qe,null,"~ Drop images ~"),this.getFiles())}},{key:"handleFiles",value:function(e){for(var t=Object(d.a)({},this.state),n=0;n<e.length;n++){var a=e[n];a.type.match(/image\/*/)&&t.players.push(new y({name:a.name.substr(0,a.name.lastIndexOf("."))||a.name,imageURL:URL.createObjectURL(a)}))}this.setState(t)}}]),t}(r.a.Component),Ze={name:"light",bg:"#fff",text:"#363537",toggleBorder:"#FFF",gradient:"linear-gradient(#39598A, #79D7ED)",bodyArea:"#fff",link:"blue",mark:"yellow",overlay:"fff",evictedCell:"#fa8072",grayCell:"#eaecf0",lightGrayCell:"#f8f9fa",winnerCell:"#73fb76",runnerUpCell:"#d1e8ef",nomineeCell:"#959ffd",hohCell:"#CCFFCC",portraitBorder:"gray",tableCellBorder:"#a2a9b1"},et={name:"dark",bg:"#121212",text:"#FAFAFA",bodyArea:"#363537",toggleBorder:"#6B8096",gradient:"linear-gradient(#091236, #1E215D)",link:"lightblue",mark:"#7e006d",overlay:"#444346",evictedCell:"#9d4c43",grayCell:"#5e5e5e",lightGrayCell:"#404040",runnerUpCell:"#9fbec882",nomineeCell:"#6c75d0",winnerCell:"#00ac04",hohCell:"#3f783f",portraitBorder:"#484848",tableCellBorder:"#53575b"};function tt(){var e=Object(a.useState)(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),t=Object(g.a)(e,2),n=t[0],i=t[1],o="button ".concat("dark"===n?"is-dark":"is-light");return r.a.createElement("div",{className:o,onClick:function(){"light"===n?(i("dark"),Vt.next(et)):(i("light"),Vt.next(Ze))}},"light"===n?"Dark mode":"Light mode")}function nt(){var e=Object(b.a)(["\n    margin-left: 3px;\n    margin-right: 3px;\n    margin-bottom: 3px;\n    background: ",";\n"]);return nt=function(){return e},e}function at(){var e=Object(b.a)(["\n    box-shadow: ",";\n    border-radius: 6px;\n    margin-left: 3px;\n    margin-right: 3px;\n    background: ",";\n"]);return at=function(){return e},e}var rt=R.c.div(at(),function(e){return"light"===e.theme.name?"0 2px 3px rgba(10, 10, 10, 0.1), 0 0 0 1px rgba(10, 10, 10, 0.1)":""},function(e){return e.theme.overlay}),it=R.c.div(nt(),function(e){return e.theme.bodyArea});function ot(e){return r.a.createElement(rt,{className:e.className||""},e.children)}function ct(e){return r.a.createElement(it,{style:e.style,className:"box ".concat(e.className||"")},e.children)}var st=n(29),ut=n.n(st);function lt(){var e=Object(b.a)(["\n    margin-left: 1rem;\n"]);return lt=function(){return e},e}function ht(){var e=Object(b.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return ht=function(){return e},e}function mt(){var e=Object(b.a)(["\n    display: flex;\n    cursor: pointer;\n    align-items: center;\n    :hover {\n        color: red;\n        background-color: #ffe1ea;\n    }\n"]);return mt=function(){return e},e}var dt=26,ft="https://spaulmark.github.io/img/",vt={},pt=Object(R.c)(ze)(mt()),gt=R.c.div(ht()),bt=R.c.p(lt());function Et(){return(Et=Object(p.a)(v.a.mark(function e(t){var n,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!vt[t]){e.next=2;break}return e.abrupt("return",vt[t]);case 2:return e.next=4,fetch("".concat(ft).concat(t,"/dir.json"));case 4:return e.next=6,e.sent.json();case 6:return n=e.sent,a=k.a.sample(n.files),vt[t]="".concat(ft).concat(t,"/").concat(a),e.abrupt("return","".concat(ft).concat(t,"/").concat(a));case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yt(){return(yt=Object(p.a)(v.a.mark(function e(t){var n,a,i;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(ft).concat(t,"/dir.json"));case 2:return e.next=4,e.sent.json();case 4:n=e.sent,a=n.files.map(function(e){return{name:e,url:"".concat(ft).concat(t,"/").concat(e)}}),i=a.map(function(e){return new y({name:e.name.substr(0,e.name.lastIndexOf("."))||e.name,imageURL:e.url})}),Wt.next(r.a.createElement($e,{cast:i}));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function wt(e){var t=r.a.useState(""),n=Object(g.a)(t,2),a=n[0],i=n[1],o=r.a.useState(!0),c=Object(g.a)(o,2),s=c[0],u=c[1],l=e.deck;return s&&function(e){return Et.apply(this,arguments)}(l).then(function(e){u(!1),i(e)}),r.a.createElement(pt,{className:"column is-6",onClick:function(){return function(e){return yt.apply(this,arguments)}(l)}},r.a.createElement("img",{src:a,style:{width:50,height:50}}),r.a.createElement(bt,null,l))}function Ot(e){for(var t=[],n=e.i,a=e.data,i=n*dt,o=i;o<i+dt;o++){var c=a[o];c&&t.push(r.a.createElement(wt,{key:"".concat(c,"__").concat(n,"__").concat(o),deck:c}))}return r.a.createElement("div",{id:"project-comments",key:"__commentList__",style:{display:"flex"}},r.a.createElement("div",{key:"__ul__",className:"columns is-multiline"},t))}var jt=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).handlePageClick=function(e){n.setState({i:e.selected})},n.state={loading:!0,decks:[],i:0},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=Object(p.a)(v.a.mark(function e(){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://spaulmark.github.io/img/dir.json");case 2:return e.next=4,e.sent.json();case 4:t=e.sent,this.setState({decks:Object(j.shuffle)(t.decks),loading:!1});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.loading?r.a.createElement("div",null):r.a.createElement("div",null,r.a.createElement(Ot,{key:"comments",data:this.state.decks,i:this.state.i}),r.a.createElement(gt,null,r.a.createElement(ut.a,{key:"__list__",previousLabel:"previous",nextLabel:"next",breakLabel:"...",breakClassName:"break-me",pageCount:Object(j.ceil)(this.state.decks.length/dt),marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:this.handlePageClick,containerClassName:"pagination",activeClassName:"active"})))}}]),t}(r.a.Component);function kt(){var e=Object(b.a)(["\n    color: ",";\n    cursor: pointer;\n"]);return kt=function(){return e},e}var xt=R.c.div(kt(),function(e){return e.theme.link});function St(){return r.a.createElement(xt,{onClick:function(){Wt.next(r.a.createElement($e,{cast:Ft.value}))}},"Edit / Upload Cast")}function Ct(){return r.a.createElement(xt,{onClick:function(){Wt.next(r.a.createElement(jt,null))}},"Choose Cast")}function Mt(e){var t=Object(d.a)({},e.style||{});return r.a.createElement(ct,{className:"level is-mobile",style:t},r.a.createElement("div",{className:"level-item"},r.a.createElement(Ct,null)),r.a.createElement("div",{className:"level-item"},r.a.createElement(St,null)),r.a.createElement("div",{className:"level-item"},r.a.createElement(tt,null)))}var Nt=function(e){function t(){return Object(c.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){Dt.next(We)}},{key:"render",value:function(){var e=this.props;return 0===e.cast.length?r.a.createElement(ze,null,"Cast is empty. ",r.a.createElement(Ct,null)):r.a.createElement(ze,null,r.a.createElement(le,{houseguests:e.cast}),r.a.createElement("p",null,r.a.createElement("b",null," ","You can use the <- and -> arrow keys to move forwards and backwards.")),r.a.createElement(he,null))}}]),t}(r.a.Component),Wt=new W.a(r.a.createElement(Nt,{cast:[]})),At=new W.a(null),Pt=new A.a;function It(e){At.next(e)}function Lt(e){Pt.next(e)}var Ft=new W.a([]);var Ht=new W.a(null);function Ut(){return Ht.value}var Rt=new W.a(0),Dt=new W.a(We),Tt=new W.a(!1),Vt=new A.a,Bt=function(){function e(t){Object(c.a)(this,e),this.rng=void 0,this.rng=N.a.xorshift128plus(t)}return Object(s.a)(e,[{key:"randomFloat",value:function(){var e,t=this.rng.next(),n=Object(g.a)(t,2);return e=n[0],this.rng=n[1],e/2147483647}},{key:"randomInt",value:function(e,t){var n,a=N.a.uniformIntDistribution(e,t,this.rng),r=Object(g.a)(a,2);return n=r[0],this.rng=r[1],n}},{key:"flipCoin",value:function(){var e,t=this.rng.next(),n=Object(g.a)(t,2);return e=n[0],this.rng=n[1],e%2===0}},{key:"seed",value:function(e){this.rng=N.a.xorshift128plus(e)}}]),e}();function zt(){return _t.value}var _t=new W.a(new Bt(0));Ft.subscribe({next:function(e){var t="";e.forEach(function(e){return t+=e.name}),_t.next(new Bt(function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n}(t)))}});function Gt(e,t){return e.houseguestCache[t]}function Qt(e,t){var n=t.map(function(e){return e.id});return e.filter(function(e){return!n.includes(e.id)&&!e.isEvicted})}function Jt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===e.length)throw new Error("Tried to get a random player from a list of 0 players.");var n=Qt(e,t);return n[zt().randomInt(0,n.length-1)]}function Yt(e){return Object(E.a)(e.nonEvictedHouseguests.entries()).map(function(t){var n=Object(g.a)(t,2),a=(n[0],n[1]);return Gt(e,a)})}function qt(e){return e.houseguests.filter(function(e){return e.isJury})}function Kt(e){return e.remainingPlayers-2<=fa()}var Xt=function(){function e(t){var n=this;if(Object(c.a)(this,e),this.houseguestCache={},this.nonEvictedHouseguests=new Set,this.houseguests=[],this.remainingPlayers=0,this.phase=0,this.previousHOH=void 0,this.log=[],this.cliques=[],t instanceof Array){var a=t;this.remainingPlayers=a.length,a.forEach(function(e,t){var r=new O(Object(d.a)({},e,{id:t,relationships:M(a.length,t)}));n.nonEvictedHouseguests.add(t),n.houseguestCache[t]=r,n.houseguests.push(r)})}else Object.assign(this,t)}return Object(s.a)(e,[{key:"currentLog",get:function(){return this.log[this.phase]}}]),e}(),$t=function(){function e(t){Object(c.a)(this,e),this.houseguests=[],this.houseguestCache={},this.nonEvictedHouseguests=new Set,this.remainingPlayers=0,this.phase=0,this.previousHOH=void 0,this.cliques=[],this.log=[];var n=k.a.cloneDeep(t);Object.assign(this,n)}return Object(s.a)(e,[{key:"currentLog",get:function(){return this.log[this.phase]}}]),e}(),Zt=function e(t){Object(c.a)(this,e),this.title="",this.gameState=new Xt([]),this.content=r.a.createElement("div",null,"Error while rendering ".concat(this.title)),this.render=void 0,Object.assign(this,t),this.render=r.a.createElement("div",null,r.a.createElement(Fe,{gameState:this.gameState}),this.content)};var en=function(e,t){return e.relationships[t.id]};function tn(e,t){return function(e,t,n){var a=0,r=-1/0;return t.forEach(function(t,i){var o=n(e,t);o>r&&(a=i,r=o)}),a}(e,t,en)}function nn(e,t,n){var a=0,r=1/0;return t.forEach(function(t,i){var o=n(e,t);o<r&&(a=i,r=o)}),a}function an(e,t){var n=e.hero,a=e.villain,r=0,i=0;return t.forEach(function(e){e.id!==n.id&&e.id!==a.id&&(en(n,e)>en(a,e)?r++:i++)}),r>i}function rn(e,t){var n=t.remainingPlayers-1;return n-e.superiors.size<Math.ceil(n/2)+2}function on(e,t,n){return Kt(n)?function(e,t,n){var a=t[0],r=t[1],i=!e.superiors.has(a.id),o=!e.superiors.has(r.id);if(i===o)return cn(e,t);if(n.remainingPlayers-e.superiors.size-1===1&&(i||o)){var c=i?0:1;return{decision:i?1:0,reason:"I can't evict ".concat(t[c].name,", because they are the last person I can beat.")}}if(rn(e,n)&&(i&&!o||!i&&o)){var s=i?1:0;return{decision:s,reason:"I can't beat ".concat(t[s].name," in the end.")}}var u=rn(e,n)===o?0:1,l=u?0:1,h=rn(e,n)?"I can't beat ".concat(t[u].name," in the end."):"I need to keep ".concat(t[l].name," around as a shield."),m=ke(e.popularity,t[u].popularity,e.relationships[t[u].id])===ge.Friend,d=ke(e.popularity,t[l].popularity,e.relationships[t[l].id])!==ge.Friend,f=!d,v=!m;return m&&d?{decision:l,reason:"".concat(t[l].name," is my enemy.")}:m&&f?{decision:u,reason:"Both noms are my friends, but ".concat(h)}:v&&d?{decision:u,reason:"Neither of the noms are my friends, but ".concat(h)}:{decision:u,reason:"".concat(h)}}(e,t,n):cn(e,t)}function cn(e,t){var n=t[0],a=t[1],r=ke(e.popularity,n.popularity,e.relationships[n.id]),i=ke(e.popularity,a.popularity,e.relationships[a.id]),o=e.targets[0]===n.id||e.targets[1]===n.id,c=e.targets[0]===a.id||e.targets[1]===a.id;if(o&&!c||c&&!o){var s=o?0:1;return{decision:s,reason:"I am targeting ".concat(t[s].name,".")}}if(r===ge.Enemy&&i===ge.Enemy)return{decision:n.popularity>a.popularity?0:1,reason:"Both noms are my enemies, so I voted for the more popular one."};if(r===ge.Enemy&&i!==ge.Enemy||i===ge.Enemy&&r!==ge.Enemy){var u=r===ge.Enemy?0:1;return{decision:u,reason:"".concat(t[u].name," is my enemy.")}}if(r!==ge.Friend&&i===ge.Friend||i!==ge.Friend&&r===ge.Friend){var l=r!==ge.Friend?0:1;return{decision:l,reason:"".concat(t[0===l?1:0].name," is my friend.")}}var h=nn(e,t,en);return{decision:h,reason:"Both noms are my friends. but I like ".concat(t[0===h?1:0].name," more.")}}function sn(e,t,n,a){var r=[],i=function(e,t,n){var a=t;return Kt(n)&&rn(e,n)&&(a=2*e.superiors.size<n.remainingPlayers-1?t.filter(function(t){return!e.superiors.has(t.id)}):t.filter(function(t){return e.superiors.has(t.id)})),new Set(a.map(function(e){return e.id}))}(e,t,n),o=t.filter(function(e){return i.has(e.id)});for(0===o.length&&(o=t);r.length<a;){var c=o[nn(e,o,en)];r.push({decision:c.id,reason:"I think you are ugly"}),0===(o=Qt(o,[c])).length&&(o=t.filter(function(e){return!i.has(e.id)}))}return r}function un(e,t){var n=-1,a="Neither of these nominees are my friends.",r=ke(e.popularity,t[0].popularity,e.relationshipWith(t[0])),i=ke(e.popularity,t[1].popularity,e.relationshipWith(t[1]));return r===ge.Friend&&i!==ge.Friend?(n=0,a="".concat(t[0].name," is my friend.")):i===ge.Friend&&r!==ge.Friend?(n=1,a="".concat(t[1].name," is my friend.")):r===ge.Friend&&i===ge.Friend&&(n=t[0].relationshipWith(e)>t[1].relationshipWith(e)?0:1,a="Both nominees are my friends, but I like ".concat(t[n].name," more.")),{decision:t[n],reason:a}}function ln(){var e=Object(b.a)(["\n    position: -webkit-sticky;\n    position: sticky;\n    top: 20px;\n    right: 20px;\n"]);return ln=function(){return e},e}var hn=R.c.img(ln());function mn(){return r.a.createElement(hn,{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAASElEQVRIiWNgGAUEACMa/z+R6ohWz0Sqi0gFLIRcQAAQDAGa+2DoWzAKRgH1wX8G3OULWfqHfkYbsNIUPR5IrQ/gYLQsGngAAEPgCRZjAdYSAAAAAElFTkSuQmCC",className:"button is-rounded",onClick:function(){Tt.next(!Tt.getValue())}})}function dn(){var e=Object(b.a)(["\n    height: 0.4em;\n    background-color: #000000;\n"]);return dn=function(){return e},e}function fn(){var e=Object(b.a)(["\n    background-color: ",";\n"]);return fn=function(){return e},e}function vn(){var e=Object(b.a)(["\n    background-color: ",";\n"]);return vn=function(){return e},e}function pn(){var e=Object(b.a)(["\n    background-color: ",";\n"]);return pn=function(){return e},e}function gn(){var e=Object(b.a)(["\n    background-color: ",";\n"]);return gn=function(){return e},e}function bn(){var e=Object(b.a)(["\n    background-color: ",";\n"]);return bn=function(){return e},e}function En(){var e=Object(b.a)(["\n    background-color: ",";\n"]);return En=function(){return e},e}function yn(){var e=Object(b.a)(["\n    background-color: ",";\n"]);return yn=function(){return e},e}function wn(){var e=Object(b.a)(["\n    border: 1px solid ",";\n    border-collapse: collapse;\n"]);return wn=function(){return e},e}function On(){var e=Object(b.a)(["\n    padding: 0.1em 0.4em;\n    border: 1px solid ",";\n"]);return On=function(){return e},e}var jn=R.c.td(On(),function(e){return e.theme.tableCellBorder}),kn=R.c.table(wn(),function(e){return e.theme.tableCellBorder}),xn=Object(R.c)(jn)(yn(),function(e){return e.theme.grayCell}),Sn=Object(R.c)(jn)(En(),function(e){return e.theme.lightGrayCell}),Cn=Object(R.c)(jn)(bn(),function(e){return e.theme.evictedCell}),Mn=Object(R.c)(jn)(gn(),function(e){return e.theme.winnerCell}),Nn=Object(R.c)(jn)(pn(),function(e){return e.theme.runnerUpCell}),Wn=Object(R.c)(jn)(vn(),function(e){return e.theme.nomineeCell}),An=Object(R.c)(jn)(fn(),function(e){return e.theme.hohCell}),Pn=R.c.tr(dn());function In(e){var t=e.log,n=[];e.houseguests.forEach(function(e,t){n[e.id]=[r.a.createElement(xn,{key:"hg-name---".concat(t)},r.a.createElement(Ke,{noMargin:!0},e.name))]});var a=[],i=[],o=[],c=[],s=[],u=[],l=[];t.forEach(function(h,m){if(function(e,t,n,a){if(!e)return void n.push(r.a.createElement(xn,{key:"toprow--".concat(t)}));if(t===a)return void n.push(r.a.createElement(xn,{key:"toprow--".concat(t),colSpan:2},r.a.createElement(Ke,{noMargin:!0},"Finale")));n.push(r.a.createElement(xn,{key:"toprow--".concat(t)},r.a.createElement(Ke,{noMargin:!0},"Week ",t)))}(h,m,i,t.length-1),function(e,t,n){if(!e)return void n.push(r.a.createElement(xn,{key:"preveto--".concat(t)},r.a.createElement(Ke,{noMargin:!0},"Nominations",r.a.createElement("br",null),r.a.createElement("small",null,"(pre-veto)"))));if(0===e.nominationsPreVeto.length)return void n.push(r.a.createElement(Sn,{key:"preveto--".concat(t),rowSpan:2},r.a.createElement(Xe,{noMargin:!0},"(none)")));n.push(r.a.createElement(Sn,{key:"preveto--".concat(t)},r.a.createElement(qe,{noMargin:!0},e.nominationsPreVeto[0],r.a.createElement("br",null)," ",e.nominationsPreVeto[1])))}(h,m,o),function(e,t,n){if(!e)return void n.push(r.a.createElement(xn,{key:"veto--".concat(t)},r.a.createElement(Ke,{noMargin:!0},"Veto Winner")));if(void 0===e.vetoWinner)return;n.push(r.a.createElement(Sn,{key:"veto--".concat(t)},r.a.createElement(qe,{noMargin:!0},e.vetoWinner)))}(h,m,c),function(e,t,n){if(!e)return void n.push(r.a.createElement(xn,{key:"postVeto--".concat(t)},r.a.createElement(Ke,{noMargin:!0},"Nominations",r.a.createElement("br",null),r.a.createElement("small",null,"(post-veto)"))));n.push(r.a.createElement(Sn,{key:"postVeto--".concat(t)},r.a.createElement(qe,{noMargin:!0},e.nominationsPostVeto[0],r.a.createElement("br",null)," ",e.nominationsPostVeto[1])))}(h,m,s),function(e,t,n,a){if(!e)return void n.push(r.a.createElement(xn,{key:t,rowSpan:2},r.a.createElement(Ke,{noMargin:!0},"Evicted")));var i=void 0!==e.soleVoter?"".concat(e.soleVoter,"'s choice"):"".concat(e.votesInMajority," of ").concat(e.outOf," votes");n.push(r.a.createElement(Cn,{key:t,rowSpan:2},r.a.createElement(qe,{noMargin:!0},r.a.createElement("b",null,Gt(a,e.evicted).name),r.a.createElement("br",null),r.a.createElement("small",null,i," ",r.a.createElement("br",null),"to evict"))))}(h,m,u,e),h){a.push(h.evicted),void 0!==h.runnerUp&&a.push(h.runnerUp),void 0!==h.winner&&a.push(h.winner);for(var d=Object.entries(h.votes),f=0;f<d.length;f++){var v=d[f],p=Object(g.a)(v,2),b=p[0],E=p[1];n[b].push(E.render(e))}void 0!==h.winner&&void 0!==h.runnerUp&&(n[h.winner].push((new Un).render(e)),n[h.runnerUp].push((new Rn).render(e)),u.push(r.a.createElement(Nn,{key:"runnerUp"},r.a.createElement(Ke,{noMargin:!0},Gt(e,h.runnerUp).name),r.a.createElement(qe,{noMargin:!0},r.a.createElement("small",null,"Finalist")," "))),l.push(r.a.createElement(Mn,{key:"winner"},r.a.createElement(Ke,{noMargin:!0},Gt(e,h.winner).name),r.a.createElement(qe,{noMargin:!0},r.a.createElement("small",null,"Winner")))))}}),o.push(r.a.createElement(Sn,{key:"preveto--finale",rowSpan:3},r.a.createElement(Xe,{noMargin:!0},"(none)")));var h=r.a.createElement("tr",null,l),m=r.a.createElement("tr",null,i),d=r.a.createElement("tr",null,o),f=r.a.createElement("tr",null,c),v=r.a.createElement("tr",null,s),p=r.a.createElement(Pn,null,r.a.createElement("td",{colSpan:e.houseguests.length})),b=[],E=r.a.createElement("tr",null,u),y=-1,w=a.length;return a.reverse().forEach(function(t,a){if(y>0){var i=2===a?"(Finale)":"(Week ".concat(w-a,")"),o=Gt(e,t).isJury,c=o?y-1:y,s=r.a.createElement(Cn,{colSpan:c,key:"evicted-week-".concat(w-a)},r.a.createElement(Xe,{noMargin:!0},"Evicted"),r.a.createElement(Xe,{noMargin:!0},r.a.createElement("small",null,i)));if(o){var u=n[t].slice(0,-1);u.push(s),u.push(n[t][n[t].length-1]),n[t]=u}else n[t].push(s)}b.push(r.a.createElement("tr",{key:"hgrow--".concat(t)},n[t])),y++}),r.a.createElement("div",null,r.a.createElement(mn,null),r.a.createElement(kn,null,r.a.createElement("tbody",null,m,d,f,v,p,b,p,E,h)))}var Ln=0;function Fn(){return"".concat(Ln++,"-- vote key")}var Hn=function e(t){var n=this;Object(c.a)(this,e),this.id=void 0,this.render=function(e){return r.a.createElement(jn,{key:Fn()},r.a.createElement(qe,{noMargin:!0},Gt(e,n.id).name))},this.id=t},Un=function e(){Object(c.a)(this,e),this.id=1,this.render=function(e){return r.a.createElement(Mn,{key:"winner---"},r.a.createElement(qe,{noMargin:!0},"Winner"))}},Rn=function e(){Object(c.a)(this,e),this.id=1,this.render=function(e){return r.a.createElement(Nn,{key:"runnerUp---"},r.a.createElement(qe,{noMargin:!0},"Finalist"))}},Dn=function e(t){Object(c.a)(this,e),this.id=-1,this.evicted=void 0,this.render=function(e){return r.a.createElement(Wn,{key:Fn()},r.a.createElement(Xe,{noMargin:!0},"Nominated"))},this.evicted=t},Tn=function(){function e(t){var n=this;Object(c.a)(this,e),this.id=void 0,this.render=function(e){return r.a.createElement(An,{key:Fn()},-1==n.id?n.hohText:n.hohVote(e))},this.id=void 0===t?-1:t}return Object(s.a)(e,[{key:"hohVote",value:function(e){return r.a.createElement(Xe,{noMargin:!0},Gt(e,this.id).name)}},{key:"hohText",get:function(){return r.a.createElement(Xe,{noMargin:!0},"Head of",r.a.createElement("br",null),"Household")}}]),e}();function Vn(e){var t=new $t(e),n=qt(t),a=Yt(t),i=[[],[]];n.forEach(function(e){var n=function(e,t){return tn(e,t)}(e,a),r=Object(d.a)({},e);i[n].push(r),t.currentLog.votes[e.id]=new Hn(a[n].id)});var o=i[0].length,c=i[1].length,s=0===o||0===c?"By a unanimous vote...":"By a vote of ".concat(o," to ").concat(c,"..."),u=o>c?a[0]:a[1],l=o<c?a[0]:a[1];t.currentLog.winner=u.id,t.currentLog.runnerUp=l.id;var h=new Zt({title:"Jury Votes",gameState:t,content:r.a.createElement("div",null,r.a.createElement(Ke,null,s),r.a.createElement("div",{className:"columns is-centered"},r.a.createElement(ot,{className:"column"},r.a.createElement(ue,{houseguests:i[0],centered:!0})),r.a.createElement(ot,{className:"column"},r.a.createElement(ue,{houseguests:i[1],centered:!0}))),r.a.createElement(ue,{houseguests:a,centered:!0}),r.a.createElement(Ke,null,"Congratulations, ".concat(u.name,"... you are the winner of Big Brother!")),r.a.createElement(he,null))});return[t,h]}var Bn={canPlayWith:function(e){return 3===e},eliminates:2,arrowsEnabled:!0,hasViewsbar:!0};function zn(e){var t,n,a,i,o=r.a.createElement(ze,null,r.a.createElement(le,{houseguests:e.houseguests})," ",r.a.createElement("br",null),r.a.createElement(he,null)),c=[],s=function(e){var t=new $t(e),n=Yt(e),a=Jt(n),i=n.filter(function(e){return e.id!==a.id}),o=Jt(n,[a]),c=Gt(t,Jt([a,o]).id);c.hohWins++;var s=new Zt({title:"Final HoH Competition",gameState:t,content:r.a.createElement("div",null,r.a.createElement(qe,null,"The final 3 houseguests compete in the endurance competition."),r.a.createElement(ue,{houseguests:n,centered:!0}),r.a.createElement(se,{houseguest:a,centered:!0}),r.a.createElement(Ke,null,"".concat(a.name," has won the endurance competition!")),r.a.createElement("hr",null),r.a.createElement(qe,null,"".concat(i[0].name," and ").concat(i[1].name," compete in the skill competition.")),r.a.createElement(ue,{houseguests:i,centered:!0}),r.a.createElement(se,{houseguest:o,centered:!0}),r.a.createElement(Ke,null,"".concat(o.name," has won the skill competition!")),r.a.createElement("hr",null),r.a.createElement(qe,null,"".concat(a.name," and ").concat(o.name," compete in the quiz competition.")),r.a.createElement(ue,{houseguests:[a,o],centered:!0}),r.a.createElement(se,{houseguest:c,centered:!0}),r.a.createElement(Ke,null,"Congratulations ".concat(c.name,", you are the final Head of Household!")),r.a.createElement(he,null))});return[new Xt(t),s,c]}(e),u=Object(g.a)(s,3);t=u[0],n=u[1],a=u[2],c.push(n);var l=function(e,t){var n=new $t(e),a=Yt(n).filter(function(e){return e.id!==t.id});n.currentLog.nominationsPostVeto=a.map(function(e){return e.name});var i=on(t,a,n),o=i.decision,c=i.reason,s=a[o],u=a[1==o?0:1];n.currentLog.soleVoter=t.name,n.currentLog.votes[u.id]=new Dn(!1),n.currentLog.votes[t.id]=new Tn(s.id),n.currentLog.votesInMajority=1,n.currentLog.outOf=1;var l=Object(d.a)({},t);l.tooltip=c,la(n,s.id);var h=new Zt({title:"Final Eviction",gameState:n,content:r.a.createElement("div",null,r.a.createElement(qe,null,"As the final HoH of the season, ".concat(t.name,", you may now cast the sole vote to evict.")),r.a.createElement(se,{houseguest:l,centered:!0}),r.a.createElement(Ke,null,"I vote to evict ".concat(s.name,".")),r.a.createElement(ue,{houseguests:a,centered:!0}),r.a.createElement(qe,null,"It's official... ",s.name,", you will be the final person leaving the Big Brother House."),r.a.createElement(he,null))});return[new Xt(n),h]}(t,a),h=Object(g.a)(l,2);t=h[0],i=h[1],c.push(i);var m=Vn(t),f=Object(g.a)(m,2),v=f[0],p=f[1];return c.push(p),new _n({gameState:v,content:o,title:"Finale",scenes:c,type:Bn})}var _n=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).title=void 0,n.scenes=void 0,n.content=void 0,n.gameState=void 0,n.type=Bn,n.title=e.title,n.scenes=e.scenes,n.content=e.content,n.gameState=e.gameState,n}return Object(h.a)(t,e),t}(He),Gn={canPlayWith:function(e){return 1===e},eliminates:1,arrowsEnabled:!1,hasViewsbar:!1};var Qn=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).title=void 0,n.scenes=void 0,n.content=void 0,n.gameState=void 0,n.title=e.title,n.scenes=e.scenes,n.content=e.content,n.gameState=e.gameState,n}return Object(h.a)(t,e),t}(He),Jn=function e(){Object(c.a)(this,e),this.nominationsPreVeto=[],this.vetoWinner=void 0,this.winner=void 0,this.runnerUp=void 0,this.nominationsPostVeto=[],this.evicted=-1,this.votes={},this.votesInMajority=-1,this.outOf=-1,this.soleVoter=void 0},Yn=function(){function e(){Object(c.a)(this,e),this.data={}}return Object(s.a)(e,[{key:"add",value:function(e,t){this.data[e]?this.data[e].add(t):this.data[e]=new Set([t])}}]),e}();function qn(e){var t=Yt(e),n=[],a=new Yn;return t.forEach(function(t){k.a.forEach(t.relationships,function(n,r){var i=parseInt(r),o=function(e,t,n){return ke(e.popularity,t.popularity,n)===ge.Friend?[[e.id,t.id],1]:[null,0]}(t,Gt(e,i),n),c=Object(g.a)(o,2),s=c[0],u=c[1];u,i>t.id&&s&&(a.add(t.id,i),a.add(i,t.id))}),n.push(t.id)}),{nodes:n,neighbors:function(e){return a.data[e]||new Set([])}}}var Kn=[];function Xn(e){var t=qn(e);return Kn=[],function e(t,n,a,r){if(0===n.size&&0===a.size){var i=Array.from(t.values());return void Kn.push(i)}Array.from(n.keys()).forEach(function(i){var o=new Set(t.values()).add(i),c=new Set(Object(E.a)(n).filter(function(e){return r.neighbors(i).has(e)})),s=new Set(Object(E.a)(a).filter(function(e){return r.neighbors(i).has(e)}));e(o,c,s,r),n.delete(i),a.add(i)})}(new Set([]),new Set(t.nodes),new Set([]),t),Kn.forEach(function(t){return t.map(function(t){return Gt(e,t)})}),Kn=Kn.filter(function(e){return e.length>2}).sort(function(e,t){return t.length-e.length})}var $n={type:ge.Friend,id:-1,doIWin:!0,relationship:2};var Zn=function(){function e(t){Object(c.a)(this,e),this.firstTarget=$n,this.secondTarget=$n,this.hg=void 0,this.hg=t}return Object(s.a)(e,[{key:"getTargets",value:function(){return[this.firstTarget.id,this.secondTarget.id]}},{key:"addTarget",value:function(e,t){(ea(this.firstTarget,e,this.hg,t)||ea(this.secondTarget,e,this.hg,t))&&(ea(this.firstTarget,this.secondTarget,this.hg,t)?this.firstTarget=e:this.secondTarget=e)}}]),e}();function ea(e,t,n,a){return function(e,t,n){if(2===e.relationship)return!0;var a=ta(t,n),r=ta(e,n);return!(a>r)&&(a<r||t.relationship<e.relationship)}(e,t,Kt(a)&&rn(n,a))}function ta(e,t){return e.type===ge.Enemy?e.doIWin||!t?4:1:e.type===ge.Friend?e.doIWin||!t?6:3:e.doIWin||!t?5:2}function na(e){return e.remainingPlayers<=30}function aa(e){var t=Yt(e);t.forEach(function(n){var a=new Zn(n),r=0,i=0;t.forEach(function(t){if(n.id!==t.id){var o=ke(n.popularity,t.popularity,n.relationshipWith(t));a.addTarget(function(e,t){var n=!e.superiors.has(t.id),a=ke(e.popularity,t.popularity,e.relationshipWith(t));return{id:t.id,relationship:t.relationshipWith(e),type:a,doIWin:n}}(n,t),e),o===ge.Friend?r++:o===ge.Enemy&&i++}}),n.targets=a.getTargets(),Gt(e,n.targets[0]).targetingMe++,Gt(e,n.targets[1]).targetingMe++,n.friends=r,n.enemies=i})}var ra=function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,[{key:"nextEpisode",value:function(e,t){var n,a=new $t(e);0===e.phase&&function(e){for(var t=0;t<e.length;t++)for(var n=e[t].relationships,a=t+1;a<e.length;a++){var r=e[a].relationships,i=zt().randomFloat();r[t]=i,n[a]=i}}(a.houseguests),a.phase++,e.remainingPlayers>2&&(a.log[a.phase]=new Jn),Kt(e)&&0===qt(e).length&&function(e){for(var t=0;t<e.length;t++)for(var n=e[t],a=t+1;a<e.length;a++){var r=e[a];an({hero:n,villain:r},e)?r.superiors.add(n.id):n.superiors.add(r.id)}}(Yt(a)),Kt(e)&&(n=Yt(a)).forEach(function(e){e.powerRanking=new w(n.length-1-e.superiors.size,n.length-1)}),function(e){Yt(e).forEach(function(t){t.targetingMe=0;var n=function(e,t){var n=0,a=0,r=e.id;return t.forEach(function(e){e.id!==r&&(a++,n+=e.relationships[r])}),0===a?0:n/a}(t,Yt(e));t.deltaPopularity=(x(n)-x(t.popularity))/100,t.popularity=n})}(a),e.remainingPlayers>2&&aa(a),na(a)&&(a.cliques=Xn(a));var i=new Xt(a);switch(t){case sa:return function(e){var t,n,a,i,o,c=[],s=function(e){var t=new $t(e),n=e.previousHOH?[e.previousHOH]:[],a=Jt(t.houseguests,n);t.previousHOH=a,t.currentLog.votes[a.id]=new Tn,a.hohWins+=1;var i=new Zt({title:"HoH Competition",gameState:e,content:r.a.createElement("div",null,r.a.createElement(qe,null,n.length>0&&"Houseguests, it's time to find a new Head of Household. As outgoing HoH, ".concat(n[0].name," will not compete. ")),r.a.createElement(se,{centered:!0,houseguest:a}),r.a.createElement(Ke,null,a.name," has won Head of Household!"),r.a.createElement("br",null),r.a.createElement(he,null))});return[new Xt(t),i,a]}(e),u=Object(g.a)(s,3);t=u[0],n=u[1],a=u[2],c.push(n);var l,h,m=function(e,t){var n=new $t(e),a=(Qt(Yt(n),[t]),[Gt(n,t.targets[0]),Gt(n,t.targets[1])]),i=a[0],o=a[1];i.nominations++,o.nominations++,n.currentLog.nominationsPreVeto=[i.name,o.name];var c=Object(j.shuffle)([i,o]),s=new Zt({title:"Nomination Ceremony",gameState:n,content:r.a.createElement("div",null,r.a.createElement(qe,null,"This is the nomination ceremony. It is my responsibility as the Head of Household to nominate two houseguests for eviction."),r.a.createElement(se,{centered:!0,houseguest:t}),r.a.createElement("div",{className:"columns is-marginless is-centered"},r.a.createElement(ot,{className:"column"},r.a.createElement(qe,null," My first nominee is..."),r.a.createElement(se,{centered:!0,houseguest:c[0]})),r.a.createElement(ot,{className:"column"},r.a.createElement(qe,null,"My second nominee is..."),r.a.createElement(se,{centered:!0,houseguest:c[1]}))),r.a.createElement(Ke,null,"I have nominated you, ".concat(c[0].name," and you, ").concat(c[1].name," for eviction.")),r.a.createElement("br",null),r.a.createElement(he,null))});return[new Xt(n),s,[i,o]]}(t,a),f=Object(g.a)(m,3);t=f[0],i=f[1],o=f[2],c.push(i);var v,p=function(e,t,n,a){var i=new $t(e),o=Yt(i),c=[],s=o.length<=6;if(s)for(c.push(Object(d.a)({},t)),c.push(Object(d.a)({},n)),c.push(Object(d.a)({},a));c.length<o.length;)c.push(Object(d.a)({},Jt(o,c)));else c.push(Object(d.a)({},t)),c.push(Object(d.a)({},n)),c.push(Object(d.a)({},a)),c.push(Object(d.a)({},Jt(o,c))),c.push(Object(d.a)({},Jt(o,c))),c.push(Object(d.a)({},Jt(o,c)));var u,l=Jt(c);(l=Gt(i,l.id)).povWins++,i.currentLog.vetoWinner=l.name,u=s?"Everyone left in the house will compete in this challenge.":"".concat(t.name,", as Head of Household, and ").concat(n.name," and ").concat(a.name," as nominees, will compete, as well as 3 others chosen by random draw.");var h=[c[3]];c[4]&&h.push(c[4]),c[5]&&h.push(c[5]);var m=new Zt({title:"Veto Competition",gameState:e,content:r.a.createElement("div",null,r.a.createElement(qe,null,"It's time to pick players for the veto competition."),r.a.createElement(ue,{centered:!0,houseguests:[t,n,a]}),r.a.createElement(qe,null,u),r.a.createElement(ue,{centered:!0,houseguests:h}),r.a.createElement(qe,null,"..."),r.a.createElement(ue,{centered:!0,houseguests:[l]}),r.a.createElement(Ke,null,"".concat(l.name," has won the Golden Power of Veto!")),r.a.createElement(he,null))});return[new Xt(i),m,l]}(t,a,o[0],o[1]),b=Object(g.a)(p,3);t=b[0],l=b[1],h=b[2],c.push(l);var y,w=function(e,t,n,a){var i=null,o="";n[0]=Gt(e,n[0].id),n[1]=Gt(e,n[1].id),t=Gt(e,t.id);var c=function(e,t,n){var a;return e.id==t[0].id||e.id==t[1].id?a={decision:e,reason:"I am going to save myself."}:(Kt(n),a=un(e,t),4===n.remainingPlayers&&(a={decision:null,reason:"It doesn't make sense to use the veto here."})),a||null}(a,n,e);(i=c.decision)?a.id==n[0].id||a.id==n[1].id?o+="...to use the power of veto on myself.":o+="...to use the power of veto on ".concat(i.name,"."):o+="... not to use the power of veto.";var s="",u="",l=Object(E.a)(n);if(i){var h=t.id===a.id;u+=h?"Since I have just vetoed one of my nominations, I must name a replacement nominee.":"".concat(t.name,", since I have just vetoed one of your nominations, you must name a replacement nominee.");var m=Object(d.a)({},Gt(e,sn(t,Qt(e.houseguests,[t,n[0],n[1],a]),e,1)[0].decision)),f=n.findIndex(function(e){return e.id===c.decision.id});l[f]=m,m.nominations++,Gt(e,m.id).nominations++,s="My replacement nominee is ".concat(m.name,".")}var v=new Zt({title:"Veto Ceremony",gameState:e,content:r.a.createElement("div",null,r.a.createElement(qe,null,"This is the Veto Ceremony."),r.a.createElement(qe,null,"".concat(n[0].name," and ").concat(n[1].name," have been nominated for eviction, \n                    but I have the power to veto one of these nominations.")),r.a.createElement("div",{className:"columns is-marginless is-centered"},r.a.createElement(ot,{className:"column"},r.a.createElement(se,{centered:!0,houseguest:n[0]})),r.a.createElement(ot,{className:"column"},r.a.createElement(se,{centered:!0,houseguest:n[1]}))),r.a.createElement(Ke,null,"I have decided... ",r.a.createElement("br",null)),r.a.createElement(se,{centered:!0,houseguest:Object(d.a)({},a,{tooltip:c.reason})}),r.a.createElement(Ke,{noMargin:!0},o),r.a.createElement(qe,null,u),s&&r.a.createElement(se,{centered:!0,houseguest:t}),r.a.createElement(Ke,null,s),r.a.createElement("div",{className:"columns is-marginless is-centered"},r.a.createElement(ot,{className:"column"},r.a.createElement(se,{centered:!0,houseguest:l[0]})),r.a.createElement(ot,{className:"column"},r.a.createElement(se,{centered:!0,houseguest:l[1]}))),r.a.createElement(he,null))});return e.currentLog.nominationsPostVeto=[l[0].name,l[1].name],[e,v,l]}(t,a,o,h),O=Object(g.a)(w,3);t=O[0],v=O[1],o=O[2],c.push(v);var k=function(e,t,n){var a=new $t(e);n=Object(j.shuffle)(n);var i,o=[[],[]];Yt(a).forEach(function(e){if(e.id!==n[0].id&&e.id!==n[1].id&&e.id!==t.id){var r=on(e,n,a),c=Object(d.a)({},e);c.tooltip=r.reason,a.currentLog.votes[e.id]=new Hn(n[r.decision].id),o[r.decision].push(c),i=e}});var c=o[0].length,s=o[1].length;a.currentLog.outOf=c+s,c+s===1&&(a.currentLog.soleVoter=i.name);var u,l=c===s,h={decision:0,reason:"Error you should not be seeing this"};l&&(a.currentLog.outOf++,h=on(t,n,a),a.currentLog.votes[t.id]=new Tn(n[h.decision].id));c>s?(u=n[0],a.currentLog.votesInMajority=c):s>c?(u=n[1],a.currentLog.votesInMajority=s):(u=n[h.decision],a.currentLog.votesInMajority=s+1);a.currentLog.votes[n[0].id]=new Dn(u.id===n[0].id),a.currentLog.votes[n[1].id]=new Dn(u.id!==n[0].id),la(a,u.id);var m=0===c||0===s?"By a unanimous vote...":"By a vote of ".concat(c," to ").concat(s,"..."),f=Object(d.a)({},t);f.tooltip=h.reason;var v=new Zt({title:"Live Eviction",gameState:e,content:r.a.createElement("div",null,r.a.createElement(Ke,null,m),r.a.createElement("div",{className:"columns is-centered"},r.a.createElement(ot,{className:"column"},r.a.createElement(ue,{houseguests:o[0],centered:!0})),r.a.createElement(ot,{className:"column"},r.a.createElement(ue,{houseguests:o[1],centered:!0}))),l&&r.a.createElement("div",null,r.a.createElement(Ke,null," We have a tie."),r.a.createElement(qe,null,"".concat(t.name,", as current Head of Household, you must cast the sole vote to evict.")),r.a.createElement(ue,{houseguests:[f],centered:!0}),r.a.createElement(Ke,null,"I vote to evict ","".concat(u.name,"."))),r.a.createElement(ue,{houseguests:[Gt(a,n[0].id),Gt(a,n[1].id)],centered:!0}),r.a.createElement(Ke,null,"".concat(u.name,"... you have been evicted from the Big Brother House.")),r.a.createElement(he,null))});return[a,v]}(t,a,o),x=Object(g.a)(k,2);t=x[0],y=x[1],c.push(y);var S="Week ".concat(t.phase),C=r.a.createElement(ze,null,r.a.createElement(ma,null),r.a.createElement(oa,{gameState:e}),r.a.createElement("br",null),1===t.phase&&r.a.createElement("b",null,"Try clicking on houseguests to view their relationships."),r.a.createElement("br",null),r.a.createElement(he,null)),M=new Xt(t);return new da({title:S,scenes:c,content:C,gameState:M,initialGamestate:e,type:sa})}(i);case Bn:return zn(i);case Gn:return function(e){var t=In(e);return e.houseguests.forEach(function(t){la(e,t.id)}),new Qn({gameState:e,content:t,title:"Game Over",scenes:[],type:Gn})}(i);default:throw new Error("Unsupported Episode Type")}}}]),e}();function ia(e){if(!na(e.gameState))return r.a.createElement(ze,null,r.a.createElement(qe,null,"\u26a0\ufe0f There are too many players left in the game to display the alliances! Try again when there are 30 or less! \u26a0\ufe0f"));var t=e.gameState.cliques.map(function(t,n){return r.a.createElement(ue,{centered:!0,detailed:!0,key:"".concat(t,", ").concat(n,", ").concat(e.gameState.phase),houseguests:t.map(function(t){return Gt(e.gameState,t)})})});return r.a.createElement("div",null,t)}var oa=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).subs=[],n.state={tab:Rt.value},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.subs.push(Rt.subscribe(function(t){return e.setState({tab:t})}))}},{key:"componentWillUnmount",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"render",value:function(){return 0===this.state.tab?r.a.createElement(le,{houseguests:this.props.gameState.houseguests}):r.a.createElement(ia,{gameState:this.props.gameState})}}]),t}(r.a.Component);function ca(){var e=Object(b.a)(["\n    cursor: pointer;\n"]);return ca=function(){return e},e}var sa={canPlayWith:function(e){return e>1},eliminates:1,arrowsEnabled:!0,hasViewsbar:!0},ua=R.c.li(ca());function la(e,t){var n=Gt(e,t);e.currentLog&&(e.currentLog.evicted=n.id),n.isEvicted=!0,e.remainingPlayers-2<=fa()&&(n.isJury=!0),Kt(e)&&Yt(e).forEach(function(e){e.superiors.delete(n.id)}),e.nonEvictedHouseguests.delete(n.id),e.remainingPlayers--}function ha(e){return r.a.createElement(ua,{className:e.active===e.id?"is-active":"",onClick:function(){e.setActive(e.id),Rt.next(e.id)}},r.a.createElement("a",null,e.text))}function ma(){var e=r.a.useState(Rt.value),t=Object(g.a)(e,2),n=t[0],a=t[1];return r.a.createElement("div",{className:"tabs is-centered is-fullwidth is-medium",style:{marginBottom:0}},r.a.createElement("ul",{style:{paddingLeft:0}},r.a.createElement(ha,{text:"Memory Wall",active:n,setActive:a,id:0}),r.a.createElement(ha,{text:"Alliances",active:n,setActive:a,id:1})))}var da=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).title=void 0,n.scenes=void 0,n.content=void 0,n.initialGamestate=void 0,n.gameState=void 0,n.type=sa,n.title=e.title,n.scenes=e.scenes,n.content=e.content,n.gameState=e.gameState,n.initialGamestate=e.initialGamestate||e.gameState,n}return Object(h.a)(t,e),t}(He);function fa(){return va}var va=7;Ft.subscribe({next:function(e){var t=e.length;(t=Math.round(.55*t))%2===0&&t--,va=t}});var pa=function(){function e(){Object(c.a)(this,e),this.factory=void 0,this.factory=new ra}return Object(s.a)(e,[{key:"renderEpisode",value:function(e){return this.factory.nextEpisode(e,this.whichEpisodeType(e.remainingPlayers))}},{key:"whichEpisodeType",value:function(e){return 3===e?Bn:2===e?Gn:sa}}]),e}(),ga=function(){function e(t){var n=this;Object(c.a)(this,e),this.view=void 0,this.subscriptions=[],this.season=new pa,this.scenes=[],this.selectedEpisode=0,this.switchSceneRelative=function(e){var t=n.view.state.selectedScene,a=n.scenes.length,r=t+e;if(!(r<0)){var i=n.view.state.episodes[n.view.state.episodes.length-1];if(r<a)n.switchToScene(r);else if(r===a){var o=i.gameState;Yt(i.gameState).length>0&&(It(n.season.renderEpisode(o)),n.switchSceneRelative(1))}}},this.view=t,this.subscriptions.push(At.subscribe({next:function(e){return n.onNewEpisode(e)}})),this.subscriptions.push(Pt.subscribe({next:function(e){n.switchSceneRelative(e)}})),this.subscriptions.push(Ft.subscribe({next:function(){n.season=new pa,n.selectedEpisode=0,Dt.next(We)}}))}return Object(s.a)(e,[{key:"getSelectedEpisode",value:function(){return this.selectedEpisode}},{key:"switchToScene",value:function(){var e=Object(p.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Wt.next(this.scenes[t].scene.render),this.selectedEpisode=this.scenes[t].index,e.next=4,this.view.setState({selectedScene:t});case 4:null!==Ut()&&Ht.next(Gt(this.scenes[this.view.state.selectedScene].scene.gameState,Ut().id));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"_handleKeyDown",value:function(e){var t=this.view.state;void 0!==t.episodes[this.selectedEpisode]&&t.episodes[this.selectedEpisode].type.arrowsEnabled&&(37===e.keyCode?Lt(-1):39===e.keyCode&&Lt(1))}},{key:"onNewEpisode",value:function(e){var t=this;if(e){var n=Object(d.a)({},this.view.state),a=(0===this.scenes.length?-1:this.scenes[this.scenes.length-1].index)+1;this.scenes.push({scene:e,index:a}),e.scenes.forEach(function(e){return t.scenes.push({scene:e,index:a})}),n.episodes.push(e),this.view.setState(n)}else this.view.setState({episodes:[],selectedScene:0}),this.scenes=[]}},{key:"destroy",value:function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})}},{key:"handleKeyDown",get:function(){return this._handleKeyDown.bind(this)}}]),e}(),ba=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).controller=void 0,n.controller=new ga(Object(m.a)(Object(m.a)(n))),n.state={episodes:[],selectedScene:0},It(new Re(new Xt([]))),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.controller.handleKeyDown)}},{key:"componentWillUnmount",value:function(){this.controller.destroy()}},{key:"render",value:function(){return r.a.createElement(ct,{style:{minWidth:180}},r.a.createElement(ze,null,this.getEpisodes()))}},{key:"getHighlight",value:function(e,t){return t===this.state.selectedScene?r.a.createElement("mark",null,e):e}},{key:"getEpisodes",value:function(){var e=this,t=[],n=-1,a=0;return this.state.episodes.forEach(function(i){var o=++n;t.push(r.a.createElement("b",{key:o,onClick:function(){e.controller.switchToScene(o)}},e.getHighlight(i.title,o))),t.push(r.a.createElement("br",{key:--a})),i.scenes.forEach(function(o){var c=++n;e.controller.getSelectedEpisode()===i.gameState.phase&&(t.push(r.a.createElement("a",{key:c,onClick:function(){return e.controller.switchToScene(c)}},e.getHighlight(o.title,c))),t.push(r.a.createElement("br",{key:--a})))})}),t}}]),t}(r.a.Component);function Ea(){var e=Object(b.a)(["\n    overflow-x: auto;\n"]);return Ea=function(){return e},e}var ya=Object(R.c)(ct)(Ea()),wa=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).contentStream=void 0,n.state={content:null},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.contentStream=Wt.subscribe(function(t){e.setState({content:t})})}},{key:"componentDidUpdate",value:function(e,t){t.content!==this.state.content&&window.scrollTo(0,0)}},{key:"componentWillUnmount",value:function(){this.contentStream.unsubscribe()}},{key:"render",value:function(){return r.a.createElement(ya,null,this.state.content)}}]),t}(r.a.Component),Oa=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={fullscreen:!1},e.controller.inject(Object(m.a)(Object(m.a)(n))),n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.props.controller.subscribe()}},{key:"componentWillUnmount",value:function(){this.props.controller.unsubscribe()}},{key:"render",value:function(){var e=this.state.fullscreen,t={display:e?"none":""},n=e?{margin:"auto"}:{margin:"auto",maxWidth:1380,overflow:"hidden"};return r.a.createElement("div",{style:n},r.a.createElement(Mt,{style:t}),r.a.createElement("div",{className:"columns"},r.a.createElement("div",{className:"column is-narrow",style:t},r.a.createElement(ba,null)),r.a.createElement("div",{className:"column",style:{overflowX:"hidden"}},r.a.createElement(wa,null))))}}]),t}(r.a.Component),ja=function(){function e(){Object(c.a)(this,e),this.view=new Oa({controller:this}),this.subscriptions=[]}return Object(s.a)(e,[{key:"inject",value:function(e){this.view=e}},{key:"subscribe",value:function(){var e=this;this.unsubscribe(),this.subscriptions.push(Tt.subscribe(function(t){e.view.setState({fullscreen:t})}))}},{key:"unsubscribe",value:function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})}}]),e}();function ka(){var e=Object(b.a)(["\n  *,\n  *::after,\n  *::before {\n    box-sizing: border-box;\n  }\n\n  body {\n    background: ",";\n    color: ",";\n       transition: all 0.25s linear;\n  }"]);return ka=function(){return e},e}var xa=Object(R.b)(ka(),function(e){return e.theme.bg},function(e){return e.theme.text}),Sa=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).sub=null,n.state={theme:window.matchMedia&&window.matchMedia("(prefers-color-scheme: light)").matches?Ze:et},n}return Object(h.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.sub=Vt.subscribe(function(t){e.setState({theme:t})})}},{key:"componentWillUnmount",value:function(){this.sub&&this.sub.unsubscribe()}},{key:"render",value:function(){return r.a.createElement(R.a,{theme:this.state.theme},r.a.createElement(r.a.Fragment,null,r.a.createElement(xa,null),r.a.createElement(Oa,{controller:new ja})))}}]),t}(r.a.Component);o.a.render(r.a.createElement(Sa,null),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.1e4f0446.chunk.js.map