{"version":3,"sources":["model/playerProfile.ts","model/powerRanking.ts","model/houseguest.ts","utils/utilities.ts","utils/relationshipMap.ts","components/playerPortrait/selectedPortrait.ts","model/color.ts","components/playerPortrait/houseguestPortraitController.ts","components/playerPortrait/houseguestPortrait.tsx","components/playerPortrait/houseguestToPortrait.tsx","components/tooltip/tooltip.tsx","components/playerPortrait/portraits.tsx","components/memoryWall/memoryWall.tsx","components/nextEpisodeButton/nextEpisodeButton.tsx","components/playerPortrait/setupPortrait.tsx","utils/ai/classifyRelationship.ts","components/castingScreen/importLinks.tsx","components/playerPortrait/subtitle.tsx","model/portraitDisplayMode.ts","components/viewsBar/viewBarTag.tsx","components/layout/box.tsx","components/viewsBar/viewBar.tsx","components/episode/episodes.tsx","components/episode/pregameEpisode.tsx","components/castingScreen/randomXButton.tsx","components/layout/text.ts","components/layout/centered.tsx","components/castingScreen/castingScreen.tsx","subjects/subjects.tsx","theme/theme.ts","components/topbar/themeSwitch.tsx","components/deckScreen/deckScreen.tsx","components/topbar/topBar.tsx","components/pregameScreen/pregameScreen.tsx","utils/BbRandomGenerator.ts","model/gameState.ts","model/season.ts","components/episode/scene.tsx","utils/ai/aiUtils.ts","utils/ai/aiApi.ts","components/mainPage/fullscreenButton.tsx","components/episode/scenes/votingTable.tsx","model/logging/voteType.tsx","components/episode/scenes/juryVoteScene.tsx","components/episode/bigBrotherFinale.tsx","components/episode/scenes/finalHohCompScene.tsx","components/episode/scenes/finalEvictionScene.tsx","components/episode/gameOver.tsx","model/logging/episodelog.ts","components/episode/episodeFactory.ts","components/episode/bigBrotherEpisode.tsx","components/episode/scenes/hohCompScene.tsx","components/episode/scenes/nomCeremonyScene.tsx","components/episode/scenes/vetoCompScene.tsx","components/episode/scenes/vetoCeremonyScene.tsx","components/episode/scenes/evictionScene.tsx","components/sidebar/sidebarController.ts","components/sidebar/sidebar.tsx","components/mainPage/mainContentArea.tsx","components/mainPage/mainPage.tsx","components/mainPage/mainPageController.ts","theme/globalTheme.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["PlayerProfile","init","Object","classCallCheck","this","name","imageURL","assign","PowerRanking","beats","outOf","Error","createClass","key","get","Houseguest","_PlayerProfile","_this","possibleConstructorReturn","getPrototypeOf","call","isEvicted","isJury","id","nominations","hohWins","povWins","popularity","deltaPopularity","relationships","powerRanking","superiors","Set","getFriendEnemyCount","friends","enemies","assertThisInitialized","inherits","value","villain","roundTwoDigits","number","Math","round","newRelationshipMap","size","exclude","result","i","selectPlayer","player","getSelectedPlayer","selectedPlayer$","next","componentToHex","c","hex","toString","length","Rgb","r","g","b","concat","interpolateColor","min","max","percent","toHex","selectedColor","HouseguestPortraitController","view","subs","refreshData","data","props","setState","comparePowerRankings","defaultState","selectedPlayer","undefined","state","displayMode","backgroundColor","_this2","push","subscribe","displayMode$","forEach","sub","unsubscribe","has","Subtitle","styled","small","_templateObject","MemoryWallPortrait","div","_templateObject2","_ref","theme","portraitBorder","Evicted","_templateObject3","Jury","_templateObject4","Normal","img","_templateObject5","Grayscale","_templateObject6","Sepia","_templateObject7","HouseguestPortrait","_React$Component","controller","isNullOrUndefined","subtitle","Img","imageClass","getImageClass","generateSubtitle","detailed","Portrait","react_default","a","createElement","onClick","style","src","height","width","React","Component","houseguestToPortrait","houseguest","houseguestPortrait_HouseguestPortrait","Text","p","tooltip_templateObject","Tooltip","visible","Popover_default","position","isOpen","content","text","onMouseEnter","onMouseLeave","children","PortraitWrapper","className","centered","tooltip","tooltip_Tooltip","Portraits","rows","houseguests","memoryWallPortrait","MemoryWall","margin","maxWidth","NextEpisodeButton","switchSceneRelative","RelationshipType","EditPortrait","setupPortrait_templateObject","Noselect","input","setupPortrait_templateObject2","setupPortrait_templateObject3","XButton","setupPortrait_templateObject4","SetupPortrait","textAlign","onDoubleClick","onDelete","imageUrl","ImportLinks","lines","split","profiles","line","temp","pop","replace","substr","indexOf","onSubmit","onChange","event","target","RelationshipTypeToSymbol","FRIEND","ENEMY","PAWN","QUEEN","classifyRelationship","heroPopularity","villainPopularity","relationship","benefitsHero","benefitsVillain","Friend","Pawn","Queen","Enemy","addPopularityLine","hero","popularitySubtitle","deltaPop","statePopularity","getDeltaPopularity","addCompsLine","compWins","lineHeight","popularityMinColor","popularityMaxColor","popularityMode","minColor","maxColor","extremePopularity","x","xSquared","extremeValues","_addFriendshipCountTi","titles","friendOrEnemyTitle","map","txt","count","Relationship","friendEnemyCountTitle","addFriendshipCountTitles","arguments","powerMaxColor","powerMinColor","powerMode","toFloat","_","ViewBarTag","selected","mode","_this3","disabled","background","toRgba","cursor","ShadowBox","box_templateObject","_ref2","overlay","StyledBox","box_templateObject2","_ref3","bodyArea","DividerBox","Box","ViewsBox","viewBar_templateObject","ViewsBar","viewBarTag_ViewBarTag","Episode","scenes","title","gameState","type","arrowsEnabled","viewsBar","hasViewsbar","PregameEpisodeType","eliminates","canPlayWith","n","PregameEpisode","_Episode","PregameScreen","cast","RandomButton","_useState","useState","_useState2","slicedToArray","setNumber","random","parseInt","NumericInput","marginLeft","test","HasText","text_templateObject","Input","text_templateObject2","NoMargin","centered_templateObject","Center","centered_templateObject2","Centered","noMargin","CenteredBold","CenteredItallic","CastingScreen","appendProfiles","newState","objectSpread","profile","players","submit","asyncToGenerator","regenerator_default","mark","_callee","wrap","_context","prev","newCast","cast$","mainContentStream$","newEpisode","GameState","stop","amount","shuffle","slice","handleUpload","handleFiles","files","handleDrop","newName","splice","_this4","setupPortrait_SetupPortrait","deleteMethod","handleChange","_this5","FileDrop","onDrop","importLinks_ImportLinks","text_Input","multiple","getFiles","file","match","lastIndexOf","URL","createObjectURL","lightTheme","bg","toggleBorder","gradient","link","evictedCell","grayCell","lightGrayCell","winnerCell","runnerUpCell","nomineeCell","hohCell","tableCellBorder","darkTheme","ThemeSwitcher","window","matchMedia","matches","setTheme","theme$","decksPerPage","baseUrl","imageCache","DeckStyle","deckScreen_templateObject","deckScreen_templateObject2","DeckText","deckScreen_templateObject3","_callee2","folder","links","image","_context2","abrupt","fetch","sent","json","sample","_callee3","imageLinks","playerProfiles","_context3","url","castingScreen_CastingScreen","Deck","_React$useState","_React$useState2","setImage","_React$useState3","_React$useState4","loading","setLoading","deck","randomImageFromFolder","then","selectCast","DeckList","commentNodes","j","display","DeckScreen","handlePageClick","page","decks","_componentDidMount","apply","deckScreen_Centered","dist_default","previousLabel","nextLabel","breakLabel","breakClassName","pageCount","ceil","marginPagesDisplayed","pageRangeDisplayed","onPageChange","containerClassName","activeClassName","TopbarLink","topBar_templateObject","AdvancedEditLink","ChooseCastLink","deckScreen_DeckScreen","Topbar","marginTop","BehaviorSubject","episodes$","switchEpisode$","Subject","episode","isFullscreen$","BbRandomGenerator","seed","rng","prand","xorshift128plus","_this$rng$next","_this$rng$next2","_prand$uniformIntDist","uniformIntDistribution","_prand$uniformIntDist2","_this$rng$next3","_this$rng$next4","rng$","castNames","string","hash","charCodeAt","hashcode","getById","houseguestCache","inclusions","exclusions","excludedIds","hg","filter","includes","randomPlayer","options","randomInt","nonEvictedHouseguests","getJurors","inJury","remainingPlayers","finalJurySize","phase","previousHOH","log","Array","MutableGameState","copy","cloneDeep","Scene","render","favouriteIndex","callback","highestIndex","highestScore","Infinity","currentScore","lowestScore","lowestIndex","doesHeroWinTheFinale","hgs","jury","heroVotes","villainVotes","juror","heroShouldTargetSuperiors","totalPlayers","castEvictionVote","nominees","nom0","nom1","zeroIsInferior","oneIsInferior","cutthroatVote","nonVote","decision","reason","nonTarget","excuse","targetIsFriend","nonTargetIsNonFriend","nonTargetIsFriend","targetIsNonFriend","cutthroatVoteJury","r0","r1","vote","nominateNPlayers","hitlist","hitList","trueOptions","useGoldenVetoPreJury","save","rel0","relationshipWith","rel1","FullscreenIcon","fullscreenButton_templateObject","FullscreenButton","getValue","EndgameTableCell","td","votingTable_templateObject","EndgameTable","table","votingTable_templateObject2","Gray","votingTable_templateObject3","White","votingTable_templateObject4","_ref4","votingTable_templateObject5","_ref5","WinnerCell","votingTable_templateObject6","_ref6","RunnerUpCell","votingTable_templateObject7","_ref7","NomineeCell","_templateObject8","_ref8","HohCell","_templateObject9","_ref9","BlackRow","tr","_templateObject10","generateVotingTable","masterLog","houseguestCells","evictionOrder","topRowCells","preVetoCells","vetoCells","postVetoCells","evictedCells","winnerCells","cells","colSpan","generateTopRow","nominationsPreVeto","rowSpan","generatePreVetoRow","vetoWinner","generateVetoRow","nominationsPostVeto","generatePostVetoRow","voteTextLine1","soleVoter","votesInMajority","votingTable_Evicted","evicted","generateEvictedRow","runnerUp","winner","_arr","entries","votes","_i","_ref12","_ref11","WinnerVote","RunnerUpVote","winnerRow","topRow","preVetoRow","vetoRow","postVetoRow","blackRow","houseguestRows","evictedRow","evictionColSpan","weeks","reverse","weekText","tempList","voteKey","getKey","NormalVote","NomineeVote","HoHVote","hohText","hohVote","juryVoteScene","initialGameState","newGameState","jurors","finalists","castJuryVote","currentLog","votesFor0","votesFor1","voteCountText","scene","BigBrotherFinale","generateBbFinale","currentGameState","hohCompScene","finalHoH","finalEviction","_finalHohCompScene","final3","enduranceWinner","enduranceLosers","skillWinner","portraits_Portrait","finalHohCompScene","_finalHohCompScene2","_finalEvictionScene","HoH","_castEvictionVote","evictee","survivor","hoh","evictHouseguest","finalEvictionScene","_finalEvictionScene2","_juryVoteScene","_juryVoteScene2","juryScene","BigBrotherFinaleEpisode","GameOver","GameOverEpisode","EpisodeLog","EpisodeFactory","episodeType","iMap","jMap","impression","randomFloat","firstImpressions","heroWinsTheFinale","add","populateSuperiors","house","sum","targetId","calculatePopularity","updatePopularity","rel","updateFriendCounts","finalState","BigBrotherVanilla","nomCeremonyScene","_generateHohCompScene","previousHoh","newHoH","generateHohCompScene","_generateHohCompScene2","vetoCompScene","povWinner","_generateNomCeremonyS","nom2","noms","generateNomCeremonyScene","_generateNomCeremonyS2","vetoCeremonyScene","_generateVetoCompScen","choices","povPlayers","everyoneWillPlay","introText","extras","generateVetoCompScene","_generateVetoCompScen2","evictionScene","_generateVetoCeremony","initialNominees","povTarget","descisionText","vetoChoice","useGoldenVeto","replacementSpeech","nameAReplacement","finalNominees","toConsumableArray","replacementNom","replacementIndex","findIndex","generateVetoCeremonyScene","_generateVetoCeremony2","_generateEvictionScen","lastVoter","logic","tieVote","tieBreaker","displayHoH","generateEvictionScene","_generateEvictionScen2","BigBrotherVanillaEpisode","generateBbVanilla","generateGameOver","delete","Season","factory","nextEpisode","SidebarController","subscriptions","season","selectedEpisode","delta","selectedScene","renderedScenes","targetScene","lastEpisode","episodes","switchToScene","newPlayerCount","nextEpisodeType","whichEpisodeType","renderEpisode","onNewEpisode","_switchToScene","index","_x","keyCode","_handleKeyDown","bind","Sidebar","document","addEventListener","handleKeyDown","destroy","minWidth","getEpisodes","episodeKey","breakKey","getHighlight","getSelectedEpisode","MainContentAreaWrapper","mainContentArea_templateObject","MainContentArea","contentStream","prevProps","prevState","scrollTo","MainPage","fullscreen","inject","hideOnFullscreen","wrapperStyle","overflow","sidebar_Sidebar","overflowX","mainContentArea_MainContentArea","MainPageController","GlobalStyles","createGlobalStyle","globalTheme_templateObject","App","styled_components_browser_esm","Fragment","mainPage_MainPage","Boolean","location","hostname","ReactDOM","src_App","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.6c86a996.chunk.js","sourcesContent":["export class PlayerProfile {\n    readonly name: string = \"\";\n    readonly imageURL: string = \"\";\n    constructor(init: PlayerProfile) {\n        if (!init) {\n            return;\n        }\n        Object.assign(this, init);\n    }\n}\n","export class PowerRanking {\n    readonly beats: number;\n    readonly outOf: number;\n    get toFloat(): number {\n        return this.beats / this.outOf;\n    }\n\n    constructor(beats: number, outOf: number) {\n        if (outOf === 0) throw new Error(\"Power ranking attempted to divide by zero\");\n        this.beats = beats;\n        this.outOf = outOf;\n    }\n}\n","import { PlayerProfile } from \"./playerProfile\";\nimport { RelationshipMap } from \"../utils\";\nimport { PowerRanking } from \"./powerRanking\";\n\ninterface HouseguestInit extends PlayerProfile {\n    id: number;\n    relationships: RelationshipMap;\n}\n\nexport class Houseguest extends PlayerProfile {\n    public isEvicted: boolean = false;\n    public isJury: boolean = false;\n\n    readonly id: number = 0;\n\n    public nominations: number = 0;\n    public hohWins: number = 0;\n    public povWins: number = 0;\n\n    // Popularity ranges from -1 to 1\n    public popularity: number = 0;\n    public deltaPopularity: number = 0;\n    readonly relationships: RelationshipMap = {};\n\n    // power rankings range from 0 to 1\n    public powerRanking: PowerRanking = new PowerRanking(0, 1);\n    readonly superiors: Set<number> = new Set<number>();\n\n    public relationshipWith(villain: Houseguest): number {\n        return this.relationships[villain.id];\n    }\n\n    public getFriendEnemyCount: () => { friends: number; enemies: number } = () => {\n        return { friends: 0, enemies: 0 };\n    };\n\n    constructor(init: HouseguestInit) {\n        super(init);\n        Object.assign(this, init);\n    }\n}\n","export function hashcode(string: string): number {\n    let hash = 0,\n        i,\n        chr;\n    if (string.length === 0) return hash;\n    for (i = 0; i < string.length; i++) {\n        chr = string.charCodeAt(i);\n        hash = (hash << 5) - hash + chr;\n        hash |= 0;\n    }\n    return hash;\n}\n\nexport function roundTwoDigits(number: number | undefined) {\n    if (!number) {\n        return 0;\n    }\n    return Math.round(number * 100);\n}\n\nexport function max(a: number, b: number) {\n    return a > b ? a : b;\n}\n\nexport function extremeValues(x: number | undefined): number {\n    if (!x) {\n        return 0;\n    }\n    const xSquared = x * x;\n    if (x >= 0) {\n        return -xSquared + 2 * x;\n    } else {\n        return xSquared + 2 * x;\n    }\n}\n","export interface RelationshipMap {\n    [id: number]: number;\n}\n\nexport function newRelationshipMap(size: number, exclude: number): RelationshipMap {\n    const result: RelationshipMap = {};\n    for (let i = 0; i < size; i++) {\n        if (i !== exclude) result[i] = 0;\n    }\n    return result;\n}\n","import { Houseguest } from \"../../model\";\nimport { RelationshipMap } from \"../../utils\";\nimport { getSelectedPlayer, selectedPlayer$ } from \"../../subjects/subjects\";\n\nexport interface SelectedPlayerData {\n    id: number;\n    popularity: number;\n    relationships: RelationshipMap;\n    isEvicted: boolean;\n    superiors?: Set<number>;\n}\n\nexport function selectPlayer(player: SelectedPlayerData | null) {\n    if (!player || (getSelectedPlayer() && (getSelectedPlayer() as Houseguest).id === player.id)) {\n        selectedPlayer$.next(null);\n    } else {\n        selectedPlayer$.next(player);\n    }\n}\n","function componentToHex(c: any) {\n    var hex = Math.round(c).toString(16);\n    return hex.length == 1 ? \"0\" + hex : hex;\n}\n\nexport class Rgb {\n    public r: number;\n    public g: number;\n    public b: number;\n    public toHex() {\n        return \"#\" + componentToHex(this.r) + componentToHex(this.g) + componentToHex(this.b);\n    }\n    public toRgba(): string {\n        return `rgba(${this.r}, ${this.g}, ${this.b}, 1)`;\n    }\n    constructor(r: number, g: number, b: number) {\n        this.r = r;\n        this.g = g;\n        this.b = b;\n    }\n}\n\nexport function interpolateColor(min: Rgb, max: Rgb, percent: number): string {\n    return new Rgb(\n        min.r + percent * (max.r - min.r),\n        min.g + percent * (max.g - min.g),\n        min.b + percent * (max.b - min.b)\n    ).toHex();\n}\n","import { PortraitProps, HouseguestPortrait, PortraitState } from \"../memoryWall\";\nimport { Subscription } from \"rxjs\";\nimport { selectedPlayer$, displayMode$, getSelectedPlayer } from \"../../subjects/subjects\";\nimport { SelectedPlayerData } from \"./selectedPortrait\";\nimport { Rgb } from \"../../model/color\";\nimport { PowerRanking } from \"../../model/powerRanking\";\n\nconst selectedColor = new Rgb(51, 255, 249);\n\nexport class HouseguestPortraitController {\n    private subs: Subscription[] = [];\n    private view: HouseguestPortrait;\n    constructor(view: HouseguestPortrait) {\n        this.view = view;\n    }\n\n    get defaultState() {\n        return {\n            popularity: this.view.props.popularity,\n            displayMode: displayMode$.value,\n            powerRanking: this.view.props.powerRanking\n        };\n    }\n\n    public backgroundColor(props: PortraitProps): undefined | string {\n        const selectedPlayer = getSelectedPlayer();\n        if (selectedPlayer !== null && selectedPlayer.id === props.id) {\n            return selectedColor.toHex();\n        }\n        return props.isEvicted ? undefined : this.view.state.displayMode.backgroundColor(this.view.state);\n    }\n\n    public subscribe() {\n        const subs: Subscription[] = [];\n        subs.push(\n            selectedPlayer$.subscribe({\n                next: this.refreshData\n            })\n        );\n        subs.push(\n            displayMode$.subscribe({\n                next: displayMode => this.view.setState({ displayMode })\n            })\n        );\n        this.subs = subs;\n    }\n\n    public unsubscribe() {\n        this.subs.forEach(sub => sub.unsubscribe());\n    }\n\n    private comparePowerRankings(data: SelectedPlayerData): PowerRanking {\n        // 0 is blue. 1 is orange\n        if (!data.superiors) return new PowerRanking(0, 1);\n        const id = this.view.props.id === undefined ? -1 : this.view.props.id;\n        return data.superiors.has(id) ? new PowerRanking(1, 1) : new PowerRanking(0, 1);\n    }\n\n    private refreshData = (data: SelectedPlayerData | null) => {\n        if (!data) {\n            this.view.setState(this.defaultState);\n        } else {\n            if (data.id !== this.view.props.id) {\n                this.view.setState({\n                    popularity: data.relationships[this.view.props.id!],\n                    powerRanking: this.comparePowerRankings(data)\n                });\n            } else {\n                this.view.setState({ popularity: 2, powerRanking: new PowerRanking(2, 1) });\n            }\n        }\n    };\n}\n","import React from \"react\";\nimport { selectPlayer } from \"./selectedPortrait\";\nimport { isNullOrUndefined } from \"util\";\nimport { RelationshipMap } from \"../../utils\";\nimport _ from \"lodash\";\nimport { HouseguestPortraitController } from \"./houseguestPortraitController\";\nimport { PortraitDisplayMode } from \"../../model/portraitDisplayMode\";\nimport { PowerRanking } from \"../../model/powerRanking\";\nimport styled from \"styled-components\";\nimport { ColorTheme } from \"../../theme/theme\";\n\nconst Subtitle = styled.small`\n    font-weight: 100;\n    font-size: small;\n`;\n\nconst MemoryWallPortrait = styled.div`\n    margin: 5px;\n    border: 1px solid ${({ theme }: { theme: ColorTheme }) => theme.portraitBorder};\n    color: black;\n    border-radius: 5px;\n    text-align: center;\n    font-weight: 600;\n    max-width: 7rem;\n    word-wrap: break-word;\n    -webkit-transition-property: none;\n    -moz-transition-property: none;\n    -o-transition-property: none;\n    transition-property: none;\n`;\n\nconst Evicted = styled(MemoryWallPortrait)`\n    font-weight: 100;\n    color: grey;\n    background-color: #111111;\n`;\n\nconst Jury = styled(MemoryWallPortrait)`\n    font-weight: 100;\n    color: #c3ae88;\n    background-color: #5d5340;\n    filter: brightness(0.6);\n`;\n\nconst Normal = styled.img`\n    min-width: 100px;\n    width: 100%;\n    width: -moz-available; /* For Mozzila */\n    width: -webkit-fill-available; /* For Chrome */\n    width: stretch; /* Unprefixed */\n    -webkit-transition-property: none;\n    -moz-transition-property: none;\n    -o-transition-property: none;\n    transition-property: none;\n`;\n\nconst Grayscale = styled(Normal)`\n    filter: grayscale(100%);\n`;\n\nconst Sepia = styled(Normal)`\n    filter: sepia(100%);\n`;\n\nexport interface PortraitProps {\n    imageURL: string;\n    name: string;\n    id?: number;\n    relationships?: RelationshipMap;\n    isEvicted?: boolean;\n    isJury?: boolean;\n    popularity?: number;\n    powerRanking?: PowerRanking;\n    deltaPopularity?: number;\n    detailed?: boolean;\n    superiors?: Set<number>;\n    getFriendEnemyCount?: () => { friends: number; enemies: number };\n}\n\nexport interface PortraitState {\n    popularity?: number;\n    powerRanking?: PowerRanking;\n    displayMode: PortraitDisplayMode;\n}\nexport class HouseguestPortrait extends React.Component<PortraitProps, PortraitState> {\n    private controller: HouseguestPortraitController;\n\n    public constructor(props: PortraitProps) {\n        super(props);\n        this.controller = new HouseguestPortraitController(this);\n        this.state = this.controller.defaultState;\n    }\n\n    public componentDidMount() {\n        if (isNullOrUndefined(this.props.id)) {\n            return;\n        }\n        this.controller.subscribe();\n    }\n\n    public componentWillUnmount() {\n        this.controller.unsubscribe();\n    }\n\n    private onClick(): void {\n        if (isNullOrUndefined(this.props.id) || !this.props.relationships) {\n            return;\n        }\n        const data = {\n            id: this.props.id,\n            relationships: this.props.relationships,\n            isEvicted: !!this.props.isEvicted,\n            popularity: this.props.popularity || 0,\n            superiors: this.props.superiors,\n        };\n        selectPlayer(data);\n    }\n\n    public render() {\n        const props = this.props;\n        const Img = getImageClass(props);\n        let subtitle: any[] = [];\n        subtitle = this.state.displayMode.generateSubtitle(this.props, this.state, !!props.detailed);\n\n        let Portrait = MemoryWallPortrait;\n        if (props.isJury) {\n            Portrait = Jury;\n        } else if (props.isEvicted) {\n            Portrait = Evicted;\n        }\n        return (\n            <Portrait\n                onClick={() => this.onClick()}\n                style={{\n                    backgroundColor: this.controller.backgroundColor(props),\n                }}\n            >\n                <Img src={props.imageURL} style={{ height: 100, width: \"-moz-available\" }} />\n                <br />\n                {props.name}\n                <br />\n                {<Subtitle>{subtitle}</Subtitle>}\n            </Portrait>\n        );\n    }\n}\n\nfunction getImageClass(props: PortraitProps) {\n    let imageClass = props.isEvicted ? Grayscale : Normal;\n    imageClass = props.isJury ? Sepia : imageClass;\n    return imageClass;\n}\n","import { ProfileHouseguest, HouseguestPortrait } from \"../memoryWall\";\nimport React from \"react\";\n\nexport function houseguestToPortrait(houseguest: ProfileHouseguest, key?: any): JSX.Element {\n    return <HouseguestPortrait {...houseguest} key={key} detailed={false} />;\n}\n\nexport function memoryWallPortrait(houseguest: ProfileHouseguest, key?: any): JSX.Element {\n    return <HouseguestPortrait {...houseguest} key={key} detailed={true} />;\n}\n","import React from \"react\";\nimport Popover from \"react-tiny-popover\";\nimport styled from \"styled-components\";\n\nconst Text = styled.p`\n    max-width: 200px;\n    padding: 3px 8px;\n    color: #fff;\n    text-align: center;\n    background-color: #000;\n    border-radius: 4px;\n`;\n\ninterface TooltipProps {\n    text: string;\n    children: any;\n}\n\ninterface ToolTipState {\n    visible: boolean;\n}\n\nexport class Tooltip extends React.Component<TooltipProps, ToolTipState> {\n    constructor(props: TooltipProps) {\n        super(props);\n        this.state = { visible: false };\n    }\n\n    public render() {\n        return (\n            <Popover\n                position={[\"top\", \"bottom\"]}\n                isOpen={this.state.visible}\n                content={<Text>{this.props.text}</Text>}\n            >\n                <div\n                    onMouseEnter={() => this.setState({ visible: true })}\n                    onMouseLeave={() => this.setState({ visible: false })}\n                >\n                    {this.props.children}\n                </div>\n            </Popover>\n        );\n    }\n}\n","import React from \"react\";\nimport { ProfileHouseguest } from \"../memoryWall\";\nimport { houseguestToPortrait, memoryWallPortrait } from \"./houseguestToPortrait\";\nimport { Tooltip } from \"../tooltip/tooltip\";\n\nlet key = -1;\n\nfunction PortraitWrapper(props: { centered?: boolean; children: any }): JSX.Element {\n    return (\n        <div\n            key={key++}\n            className={`columns is-gapless is-mobile is-multiline ${props.centered ? \"is-centered\" : \"\"}`}\n        >\n            {props.children}\n        </div>\n    );\n}\n\nexport function Portrait(props: { houseguest: ProfileHouseguest; centered?: boolean }): JSX.Element {\n    const result = (\n        <PortraitWrapper centered={props.centered}>{houseguestToPortrait(props.houseguest)}</PortraitWrapper>\n    );\n    if (props.houseguest.tooltip) {\n        return (\n            <PortraitWrapper centered={props.centered}>\n                <Tooltip text={props.houseguest.tooltip}>{houseguestToPortrait(props.houseguest)}</Tooltip>\n            </PortraitWrapper>\n        );\n    }\n    return result;\n}\n\nexport function Portraits(props: {\n    houseguests: ProfileHouseguest[];\n    centered?: boolean;\n    detailed?: boolean;\n}): JSX.Element {\n    const rows: JSX.Element[] = [];\n    if (!props.houseguests || props.houseguests.length === 0) {\n        return <div />;\n    }\n    props.houseguests.forEach((houseguest: ProfileHouseguest) => {\n        let result;\n        if (props.detailed) {\n            result = memoryWallPortrait(houseguest, key++);\n        } else {\n            result = houseguestToPortrait(houseguest, key++);\n        }\n        if (houseguest.tooltip) {\n            result = <Tooltip text={houseguest.tooltip}>{result}</Tooltip>;\n        }\n        rows.push(result);\n    });\n    return (\n        <div className={`columns is-gapless is-mobile is-multiline ${props.centered && \"is-centered\"}`}>\n            {rows}\n        </div>\n    );\n}\n","import React from \"react\";\nimport { PlayerProfile } from \"../../model\";\nimport { Portraits } from \"../playerPortrait/portraits\";\nimport { RelationshipMap } from \"../../utils\";\nexport interface IMemoryWallProps {\n    readonly houseguests: ProfileHouseguest[];\n}\n\nexport interface ProfileHouseguest extends PlayerProfile {\n    id?: number;\n    relationships?: RelationshipMap;\n    isEvicted?: boolean;\n    isJury?: boolean;\n    popularity?: number;\n    deltaPopularity?: number;\n    hohWins?: number;\n    povWins?: number;\n    nominations?: number;\n    tooltip?: string;\n    getFriendEnemyCount?: () => { friends: number; enemies: number };\n}\n\nexport function MemoryWall(props: IMemoryWallProps): JSX.Element {\n    if (!props.houseguests || props.houseguests.length === 0) {\n        return <div />;\n    }\n    return (\n        <div\n            style={{\n                margin: \"auto\",\n                maxWidth: props.houseguests.length < 26 ? 700 : -1,\n            }}\n        >\n            <Portraits houseguests={props.houseguests} centered={true} detailed={true} />\n        </div>\n    );\n}\n","import React from \"react\";\nimport { switchSceneRelative } from \"../../subjects/subjects\";\n\nexport function NextEpisodeButton(): JSX.Element {\n    return (\n        <button className=\"button is-primary\" onClick={() => switchSceneRelative(1)}>\n            Continue\n        </button>\n    );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { ColorTheme } from \"../../theme/theme\";\n\ninterface SetupPortraitProps {\n    name: string;\n    imageUrl: string;\n    onDelete: () => void;\n    onChange: (arg0: Event) => void;\n}\n\ninterface SetupPortraitState {\n    name: string;\n}\n\nconst EditPortrait = styled.div`\n    padding: 5px;\n    margin: 5px;\n    border: 1px solid grey;\n    background-color: grey;\n    color: black;\n    border-radius: 5px;\n    font-weight: 600;\n    max-width: 7rem;\n    word-wrap: break-word;\n`;\n\nconst Input = styled.input`\n    padding: 5px;\n    margin: 5px;\n    border: 1px solid ${({ theme }: { theme: ColorTheme }) => theme.portraitBorder};\n    color: black;\n    border-radius: 5px;\n    font-weight: 600;\n    max-width: 7rem;\n    word-wrap: break-word;\n`;\n\nconst Noselect = styled.div`\n    -webkit-touch-callout: none;\n    -webkit-user-select: none;\n    -khtml-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n`;\n\nconst XButton = styled(Noselect)`\n    color: #300808;\n\n    :active {\n        color: #ff7133;\n        background-color: #ffd8c7;\n    }\n    :hover {\n        color: red;\n        background-color: #ffe1ea;\n    }\n`;\n\nexport class SetupPortrait extends React.Component<SetupPortraitProps, SetupPortraitState> {\n    public constructor(props: SetupPortraitProps) {\n        super(props);\n        this.state = { name: props.name };\n    }\n\n    public UNSAFE_componentWillReceiveProps(props: SetupPortraitProps) {\n        this.setState({ name: props.name });\n    }\n\n    public render() {\n        return (\n            <EditPortrait>\n                <div style={{ textAlign: \"center\" }}>\n                    <XButton onDoubleClick={() => this.props.onDelete()}>✘</XButton>\n                    <img src={this.props.imageUrl} style={{ width: 100, height: 100 }} />\n                    <br />\n                    <p>{this.state.name} </p>\n                </div>\n            </EditPortrait>\n        );\n    }\n}\n","export enum RelationshipType {\n    Friend = \"FRIEND\",\n    Queen = \"QUEEN\",\n    Pawn = \"PAWN\",\n    Enemy = \"ENEMY\"\n}\n\nexport const RelationshipTypeToSymbol = { FRIEND: \"♥\", ENEMY: \"💔\", PAWN: \"PAWN\", QUEEN: \"QUEEN\" };\n\nexport function classifyRelationship(\n    heroPopularity: number,\n    villainPopularity: number,\n    relationship: number\n): RelationshipType {\n    const benefitsHero = relationship > heroPopularity;\n    const benefitsVillain = relationship > villainPopularity;\n    if (benefitsHero && benefitsVillain) {\n        return RelationshipType.Friend;\n    } else if (benefitsHero && !benefitsVillain) {\n        return RelationshipType.Pawn;\n    } else if (!benefitsHero && benefitsVillain) {\n        return RelationshipType.Queen;\n    }\n    return RelationshipType.Enemy;\n}\n","import React from \"react\";\nimport { PlayerProfile } from \"../../model\";\n\ninterface ImportLinksProps {\n    onSubmit: (profiles: PlayerProfile[]) => void;\n    className?: string;\n}\n\nexport class ImportLinks extends React.Component<ImportLinksProps, any> {\n    public constructor(props: ImportLinksProps) {\n        super(props);\n        this.state = { text: \"\" };\n    }\n\n    private onSubmit() {\n        const lines = this.state.text.split(/\\r?\\n/);\n        // ugly, but it works.\n        const profiles: PlayerProfile[] = [];\n        lines.forEach((line: string) => {\n            const temp = line.split(\"/\").pop();\n            let name = temp\n                ? temp\n                      .split(\"#\")[0]\n                      .split(\"?\")[0]\n                      .replace(/\\.[^/.]+$/, \"\")\n                      .replace(/[-_]/g, \" \")\n                : null;\n\n            if (line.substr(0, line.indexOf(\" \"))) {\n                name = line.substr(line.indexOf(\" \") + 1);\n            }\n            if (name) {\n                profiles.push({\n                    name,\n                    imageURL: line\n                });\n            }\n        });\n        this.props.onSubmit(profiles);\n        this.setState({ text: \"\" });\n    }\n\n    public render() {\n        return (\n            <div className={this.props.className}>\n                <textarea\n                    className=\"textarea\"\n                    onChange={event => {\n                        this.setState({ text: event.target.value });\n                    }}\n                    value={this.state.text}\n                />\n                <button onClick={() => this.onSubmit()}>Import links</button>\n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport { roundTwoDigits } from \"../../utils\";\nimport { ProfileHouseguest, PortraitProps, PortraitState } from \"../memoryWall\";\nimport { SelectedPlayerData } from \"./selectedPortrait\";\nimport {\n    RelationshipTypeToSymbol,\n    RelationshipType as Relationship,\n    classifyRelationship\n} from \"../../utils/ai/classifyRelationship\";\nimport { getSelectedPlayer } from \"../../subjects/subjects\";\n\nexport function generatePowerSubtitle(\n    hero: PortraitProps,\n    state: PortraitState,\n    _: boolean | undefined\n): any[] {\n    let key = 0;\n    let subtitle: any[] = [];\n    key = addPopularityLine(state, hero, !!_, subtitle, key);\n    key = addCompsLine(hero, subtitle, key);\n    if (!hero.isEvicted && state.powerRanking) {\n        const data = getSelectedPlayer() as SelectedPlayerData | null;\n        if (data && data.id !== hero.id) {\n            subtitle.push(<div key={key++}>{`${state.powerRanking!.beats > 0 ? \"LOSE\" : \"WIN\"}`}</div>);\n        } else if (data && data.id === hero.id) {\n            subtitle.push(<div key={key++}>I WOULD</div>);\n        } else {\n            subtitle.push(\n                <div key={key++}>{`WINS ${state.powerRanking.beats}/${state.powerRanking.outOf}`}</div>\n            );\n        }\n    } else {\n        subtitle.push(<br key={key++} style={{ lineHeight: 1 }} />);\n    }\n    return subtitle;\n}\n\nexport function generatePopularitySubtitle(\n    hero: PortraitProps,\n    state: PortraitState,\n    detailed: boolean = false\n): any[] {\n    let key = 0;\n    let subtitle: any[] = [];\n    // popularity\n    key = addPopularityLine(state, hero, detailed, subtitle, key);\n    // competition wins\n    key = addCompsLine(hero, subtitle, key);\n    // friendship count / relationship classification titles\n    ({ subtitle, key } = addFriendshipCountTitles(hero, subtitle, key));\n    return subtitle;\n}\n\nfunction addFriendshipCountTitles(hero: PortraitProps, subtitle: any[], key: number) {\n    if (!hero.isEvicted) {\n        const data = getSelectedPlayer() as SelectedPlayerData | null;\n        if (data && data.id !== hero.id) {\n            const titles = friendOrEnemyTitle(hero, data);\n            subtitle = subtitle.concat(titles.map(txt => <div key={key++}>{txt}</div>));\n        } else {\n            const titles = friendEnemyCountTitle(hero);\n            subtitle = subtitle.concat(titles.map(txt => <div key={key++}>{txt}</div>));\n        }\n    } else {\n        subtitle.push(<br key={key++} style={{ lineHeight: 1 }} />);\n    }\n    return { subtitle, key };\n}\n\nfunction addPopularityLine(\n    state: { popularity?: number },\n    hero: PortraitProps,\n    detailed: boolean,\n    subtitle: any[],\n    key: number\n) {\n    let popularity = state.popularity;\n    if (popularity && (popularity > 1 || popularity < -1)) {\n        popularity = hero.popularity;\n    }\n    if (popularity && !hero.isEvicted) {\n        let popularitySubtitle = `${roundTwoDigits(popularity)}%`;\n        const deltaPop = getDeltaPopularity(hero, popularity);\n        if (detailed && deltaPop !== 0) {\n            const arrow = deltaPop > 0 ? \" | ↑\" : \" | ↓\";\n            popularitySubtitle += `${arrow} ${deltaPop}%`;\n        }\n        subtitle.push(<div key={key++}>{popularitySubtitle}</div>);\n    }\n    return key;\n}\n\nfunction addCompsLine(hero: PortraitProps, subtitle: any[], key: number) {\n    if (compWins(hero)) {\n        subtitle.push(<div key={key++}>{`${compWins(hero)}`}</div>);\n    } else {\n        subtitle.push(<br key={key++} style={{ lineHeight: 1 }} />);\n    }\n    return key;\n}\n\nfunction getDeltaPopularity(houseguest: PortraitProps, statePopularity: number) {\n    if (roundTwoDigits(houseguest.popularity) !== roundTwoDigits(statePopularity)) {\n        return 0;\n    }\n    return houseguest.deltaPopularity ? roundTwoDigits(houseguest.deltaPopularity) : 0;\n}\n\nfunction compWins(houseguest: ProfileHouseguest): string {\n    return `${houseguest.hohWins ? `♔ ${houseguest.hohWins}` : \"\"}${\n        houseguest.povWins && houseguest.hohWins\n            ? `|🛇 ${houseguest.povWins}`\n            : houseguest.povWins\n            ? `🛇 ${houseguest.povWins}`\n            : \"\"\n    }${(houseguest.hohWins || houseguest.povWins) && houseguest.nominations ? \"|\" : \"\"}${\n        houseguest.nominations ? `✘ ${houseguest.nominations}` : \"\"\n    }`;\n}\n\nfunction friendOrEnemyTitle(hero: PortraitProps, villain: SelectedPlayerData): string[] {\n    const titles: string[] = [];\n    titles.push(\n        RelationshipTypeToSymbol[\n            classifyRelationship(hero.popularity || 0, villain.popularity, hero.relationships![villain.id])\n        ]\n    );\n    return titles;\n}\n\nfunction friendEnemyCountTitle(hero: PortraitProps): string[] {\n    const titles: string[] = [];\n    const count = hero.getFriendEnemyCount ? hero.getFriendEnemyCount() : { friends: 0, enemies: 0 };\n    titles.push(\n        `${count.friends} ${RelationshipTypeToSymbol[Relationship.Friend]} | ${count.enemies} ${\n            RelationshipTypeToSymbol[Relationship.Enemy]\n        }`\n    );\n    return titles;\n}\n","import { Rgb, interpolateColor } from \"./color\";\nimport { PortraitState, PortraitProps } from \"../components/memoryWall\";\nimport { extremeValues } from \"../utils\";\nimport { generatePopularitySubtitle, generatePowerSubtitle } from \"../components/playerPortrait/subtitle\";\n\nexport interface PortraitDisplayMode {\n    minColor: Rgb;\n    maxColor: Rgb;\n    backgroundColor: (state: PortraitState) => string;\n    generateSubtitle: (props: PortraitProps, state: PortraitState, detailed?: boolean) => any[];\n}\n\nconst popularityMinColor = new Rgb(252, 137, 137);\nconst popularityMaxColor = new Rgb(137, 252, 137);\n\nexport const popularityMode: PortraitDisplayMode = {\n    minColor: popularityMinColor,\n    maxColor: popularityMaxColor,\n    backgroundColor: (state: PortraitState) => {\n        const popularity = state.popularity;\n\n        const extremePopularity = extremeValues(popularity);\n        const percent = (extremePopularity + 1) / 2;\n        return interpolateColor(popularityMinColor, popularityMaxColor, percent);\n    },\n    generateSubtitle: generatePopularitySubtitle\n};\n\nconst powerMaxColor = new Rgb(255, 204, 94);\nconst powerMinColor = new Rgb(192, 181, 255);\nexport const powerMode: PortraitDisplayMode = {\n    minColor: powerMinColor,\n    maxColor: powerMaxColor,\n    backgroundColor: (state: PortraitState) => {\n        const powerRanking = state.powerRanking;\n        if (powerRanking === undefined) return \"\";\n\n        return interpolateColor(powerMinColor, powerMaxColor, powerRanking.toFloat);\n    },\n    generateSubtitle: generatePowerSubtitle\n};\n","import React from \"react\";\nimport { PortraitDisplayMode } from \"../../model/portraitDisplayMode\";\nimport { displayMode$ } from \"../../subjects/subjects\";\nimport { Subscription } from \"rxjs\";\n\nfunction setDisplayMode(p: PortraitDisplayMode) {\n    displayMode$.next(p);\n}\n\ninterface ViewBarTagProps {\n    mode: PortraitDisplayMode;\n    text: string;\n    disabled?: boolean;\n}\n\nexport class ViewBarTag extends React.Component<ViewBarTagProps, { selected: boolean }> {\n    private sub: Subscription | null = null;\n\n    public constructor(props: ViewBarTagProps) {\n        super(props);\n        this.state = { selected: props.mode === displayMode$.value };\n    }\n\n    public componentDidMount() {\n        this.sub = displayMode$.subscribe({\n            next: (mode) => {\n                if (mode !== this.props.mode) {\n                    this.setState({ selected: false });\n                }\n            },\n        });\n    }\n\n    public componentWillUnmount() {\n        if (this.sub) this.sub.unsubscribe();\n    }\n\n    public render() {\n        const name = \"level-item tag is-medium is-light\";\n        const style = getStyle(this.props);\n        return (\n            <span\n                className={name}\n                style={style}\n                onClick={() => {\n                    !this.props.disabled && setDisplayMode(this.props.mode);\n                    !this.props.disabled && this.setState({ selected: true });\n                }}\n            >\n                {styleText(this.props.text, this.state.selected)}\n            </span>\n        );\n    }\n}\n\nfunction styleText(text: string, selected: boolean): JSX.Element {\n    return selected ? <b>{text}</b> : <i>{text}</i>;\n}\n\nfunction getStyle(props: ViewBarTagProps) {\n    return props.disabled\n        ? {}\n        : {\n              background: `linear-gradient(90deg, ${props.mode.minColor.toRgba()} 0%, ${props.mode.maxColor.toRgba()} 100%)`,\n              cursor: \"pointer\",\n          };\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { ColorTheme } from \"../../theme/theme\";\n\nconst ShadowBox = styled.div`\n    box-shadow: ${({ theme }: { theme: ColorTheme }) =>\n        theme.name === \"light\" ? \"0 2px 3px rgba(10, 10, 10, 0.1), 0 0 0 1px rgba(10, 10, 10, 0.1)\" : \"\"};\n    border-radius: 6px;\n    margin-left: 3px;\n    margin-right: 3px;\n    background: ${({ theme }: { theme: ColorTheme }) => theme.overlay};\n`;\n\nconst StyledBox = styled.div`\n    margin-left: 3px;\n    margin-right: 3px;\n    margin-bottom: 3px;\n    background: ${({ theme }: { theme: ColorTheme }) => theme.bodyArea};\n`;\n\nexport function DividerBox(props: any): JSX.Element {\n    return <ShadowBox className={props.className || \"\"}>{props.children}</ShadowBox>;\n}\n\nexport function Box(props: any): JSX.Element {\n    return (\n        <StyledBox style={props.style} className={`box ${props.className || \"\"}`}>\n            {props.children}\n        </StyledBox>\n    );\n}\n","import React from \"react\";\nimport { popularityMode, powerMode } from \"../../model/portraitDisplayMode\";\nimport { ViewBarTag } from \"./viewBarTag\";\nimport { Box } from \"../layout/box\";\nimport styled from \"styled-components\";\nimport { ColorTheme } from \"../../theme/theme\";\n\nconst ViewsBox = styled(Box)`\n    background: ${({ theme }: { theme: ColorTheme }) => theme.overlay};\n`;\n\nexport function ViewsBar() {\n    return (\n        <ViewsBox className=\"level is-mobile\" key=\"viewsbar\">\n            <ViewBarTag mode={popularityMode} text={\"Relationships\"}></ViewBarTag>\n            <ViewBarTag mode={powerMode} text={\"Power Rankings\"}></ViewBarTag>\n            {/* <ViewBarTag mode={powerMode} disabled={true} text={\"Cliques [Coming Soon™]\"}></ViewBarTag> */}\n        </ViewsBox>\n    );\n}\n","import React from \"react\";\nimport { GameState } from \"../../model/gameState\";\nimport { Scene } from \"./scene\";\nimport { ViewsBar } from \"../viewsBar/viewBar\";\n\nexport interface InitEpisode {\n    scenes: Scene[];\n    title: string;\n    content: JSX.Element;\n    gameState: GameState;\n    type: EpisodeType;\n}\n\nexport class Episode {\n    readonly scenes: Scene[];\n    readonly title: string;\n    readonly content: JSX.Element;\n    readonly gameState: GameState;\n    readonly type: EpisodeType;\n    readonly arrowsEnabled: boolean = true;\n    get render(): JSX.Element {\n        const viewsBar = this.type.hasViewsbar ? <ViewsBar /> : null;\n        return (\n            <div>\n                {viewsBar}\n                {this.content}\n            </div>\n        );\n    }\n\n    constructor(init: InitEpisode) {\n        this.scenes = init.scenes;\n        this.title = init.title;\n        this.content = init.content;\n        this.gameState = init.gameState;\n        this.type = init.type;\n    }\n}\n\nexport interface EpisodeType {\n    readonly canPlayWith: (n: number) => boolean;\n    readonly eliminates: number;\n    readonly arrowsEnabled: boolean;\n    readonly hasViewsbar: boolean;\n}\n","import React from \"react\";\nimport { Episode, EpisodeType } from \"./episodes\";\nimport { PregameScreen } from \"../pregameScreen/pregameScreen\";\nimport { GameState } from \"../../model/gameState\";\n\nconst PregameEpisodeType: EpisodeType = {\n    eliminates: 0,\n    canPlayWith: (n: number) => {\n        return n > 2;\n    },\n    arrowsEnabled: true,\n    hasViewsbar: false\n};\n\nexport class PregameEpisode extends Episode {\n    readonly title = \"Pregame\";\n    readonly scenes = [];\n    readonly content: JSX.Element;\n    readonly gameState: GameState;\n    readonly type = PregameEpisodeType;\n\n    public constructor(gameState: GameState) {\n        super({\n            title: \"Pregame\",\n            scenes: [],\n            content: <PregameScreen cast={gameState.houseguests} />,\n            gameState,\n            type: PregameEpisodeType\n        });\n        this.gameState = gameState;\n        this.content = <PregameScreen cast={gameState.houseguests} />;\n    }\n}\n","import React, { useState } from \"react\";\n\ninterface RandomButtonProps {\n    random: (n: number) => void;\n}\n\nexport function RandomButton(props: RandomButtonProps): JSX.Element {\n    const [number, setNumber] = useState(\"16\");\n    return (\n        <div>\n            <button\n                disabled={number === \"\"}\n                className=\"button is-primary\"\n                onClick={() => props.random(parseInt(number))}\n            >\n                Random\n            </button>\n            <NumericInput value={number} onChange={setNumber} />\n        </div>\n    );\n}\n\ninterface NumericInputProps {\n    value: string;\n    onChange: (newValue: string) => void;\n}\n\nfunction NumericInput(props: NumericInputProps) {\n    return (\n        <input\n            className=\"input\"\n            type=\"text\"\n            style={{ width: \"3em\", marginLeft: 5 }}\n            value={props.value}\n            onChange={event => {\n                const value = event.target.value;\n                if (/^\\d*$/g.test(value)) {\n                    props.onChange(value);\n                }\n            }}\n        />\n    );\n}\n","import styled from \"styled-components\";\nimport { ColorTheme } from \"../../theme/theme\";\n\nexport const HasText = styled.div`\n    color: ${({ theme }: { theme: ColorTheme }) => theme.text};\n`;\n\nexport const Input = styled.input`\n    color: ${({ theme }: { theme: ColorTheme }) => theme.text};\n`;\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { ColorTheme } from \"../../theme/theme\";\n\ninterface TextProps {\n    noMargin?: boolean;\n    children?: any;\n}\n\nconst NoMargin = styled.div`\n    text-align: center;\n    color: ${({ theme }: { theme: ColorTheme }) => theme.text};\n`;\nconst Center = styled.p`\n    text-align: center;\n    color: ${({ theme }: { theme: ColorTheme }) => theme.text};\n`;\n\nexport function Centered(props: TextProps): JSX.Element {\n    if (props.noMargin) return <NoMargin>{props.children}</NoMargin>;\n    return <Center>{props.children} </Center>;\n}\n\nexport function CenteredBold(props: TextProps): JSX.Element {\n    return (\n        <Centered noMargin={props.noMargin}>\n            <b>{props.children} </b>\n        </Centered>\n    );\n}\n\nexport function CenteredItallic(props: TextProps): JSX.Element {\n    return (\n        <Centered noMargin={props.noMargin}>\n            <i>{props.children} </i>\n        </Centered>\n    );\n}\n","import React from \"react\";\nimport FileDrop from \"react-file-drop\";\nimport { PlayerProfile, GameState } from \"../../model\";\nimport { SetupPortrait } from \"../playerPortrait/setupPortrait\";\nimport { ImportLinks } from \"./importLinks\";\nimport { PregameScreen } from \"../pregameScreen/pregameScreen\";\nimport { PregameEpisode } from \"../episode/pregameEpisode\";\nimport { shuffle } from \"lodash\";\nimport { RandomButton } from \"./randomXButton\";\nimport { selectPlayer } from \"../playerPortrait/selectedPortrait\";\nimport { mainContentStream$, newEpisode, updateCast } from \"../../subjects/subjects\";\nimport { HasText, Input } from \"../layout/text\";\nimport { Centered } from \"../layout/centered\";\n\ninterface CastingScreenState {\n    players: PlayerProfile[];\n}\n\ninterface CastingScreenProps {\n    cast?: PlayerProfile[];\n}\n\nexport class CastingScreen extends React.Component<CastingScreenProps, CastingScreenState> {\n    constructor(props: CastingScreenProps) {\n        super(props);\n        this.state = { players: props.cast || [] };\n    }\n\n    private handleChange(i: number) {\n        return (event: any) => {\n            const newName = event.target.value.replace(/\\r?\\n|\\r/g, \"\");\n            const newState = { ...this.state };\n            newState.players[i] = new PlayerProfile({\n                imageURL: newState.players[i].imageURL,\n                name: newName,\n            });\n            this.setState(newState);\n        };\n    }\n\n    private deleteMethod(i: number) {\n        return () => {\n            const newState = { ...this.state };\n            newState.players.splice(i, 1);\n            this.setState(newState);\n        };\n    }\n\n    private getFiles() {\n        const players = this.state.players;\n        if (!players) {\n            return;\n        }\n        const rows: JSX.Element[] = [];\n        let i = 0;\n        players.forEach((player) =>\n            rows.push(\n                <SetupPortrait\n                    name={player.name}\n                    imageUrl={player.imageURL}\n                    onDelete={this.deleteMethod(i)}\n                    onChange={this.handleChange(i)}\n                    key={(++i).toString()}\n                />\n            )\n        );\n        return <div className=\"columns is-gapless is-mobile is-multiline is-centered\">{rows}</div>;\n    }\n\n    private appendProfiles = (profiles: PlayerProfile[]) => {\n        const newState = { ...this.state };\n        profiles.forEach((profile) => newState.players.push(profile));\n        this.setState(newState);\n    };\n\n    private submit = async () => {\n        updateCast(this.state.players);\n        mainContentStream$.next(<PregameScreen cast={this.state.players} />);\n        selectPlayer(null);\n        await newEpisode(null);\n        await newEpisode(new PregameEpisode(new GameState(this.state.players)));\n    };\n\n    private random = (amount: number) => {\n        let players = this.state.players;\n        players = shuffle(players);\n        players = players.slice(0, amount);\n        this.setState({ players });\n    };\n\n    public render() {\n        return (\n            <FileDrop onDrop={this.handleDrop}>\n                <HasText className=\"level\">\n                    <ImportLinks onSubmit={this.appendProfiles} />\n                    <div className=\"level-item\">\n                        <button className=\"button is-danger\" onClick={() => this.setState({ players: [] })}>\n                            Delete all\n                        </button>\n                    </div>\n                    <div className=\"level-item\">\n                        <RandomButton random={this.random} />\n                    </div>\n                    <div className=\"level-item\">\n                        <button\n                            className=\"button is-primary\"\n                            disabled={this.state.players.length < 3}\n                            onClick={this.submit}\n                        >\n                            Submit\n                        </button>\n                    </div>\n                </HasText>\n                <Input type=\"file\" multiple onChange={this.handleUpload} />\n                {this.state.players.length === 0 && <Centered>~ Drop images ~</Centered>}\n                {this.getFiles()}\n            </FileDrop>\n        );\n    }\n\n    private handleUpload = (event: any) => {\n        this.handleFiles(event.target.files);\n    };\n\n    private handleDrop = (files: FileList | null, event: React.DragEvent) => {\n        if (!files) return;\n        this.handleFiles(files);\n    };\n\n    private handleFiles(files: FileList) {\n        const newState = { ...this.state };\n        for (let i = 0; i < files.length; i++) {\n            const file = files[i];\n            if (file.type.match(/image\\/*/)) {\n                newState.players.push(\n                    new PlayerProfile({\n                        name: file.name.substr(0, file.name.lastIndexOf(\".\")) || file.name,\n                        imageURL: URL.createObjectURL(file),\n                    })\n                );\n            }\n        }\n        this.setState(newState);\n    }\n}\n","import { BehaviorSubject, Subject } from \"rxjs\";\nimport { PregameScreen } from \"../components/pregameScreen/pregameScreen\";\nimport { Episode, PlayerProfile } from \"../model\";\nimport { SelectedPlayerData } from \"../components/playerPortrait/selectedPortrait\";\nimport React from \"react\";\nimport { PortraitDisplayMode, popularityMode } from \"../model/portraitDisplayMode\";\nimport { ColorTheme, lightTheme } from \"../theme/theme\";\n\n// What is currently being displayed.\nexport const mainContentStream$ = new BehaviorSubject(<PregameScreen cast={[]} />);\n// Push episodes to this subject to add them to the sidebar. Null resets everything.\nexport const episodes$ = new BehaviorSubject<Episode | null>(null);\n// Forcibly switches to an episode. Used when adding a new episode.\nexport const switchEpisode$ = new Subject<number>();\nexport function newEpisode(episode: Episode | null) {\n    episodes$.next(episode);\n}\nexport function switchSceneRelative(n: number) {\n    switchEpisode$.next(n);\n}\n// the list of players in the game\nexport const cast$ = new BehaviorSubject<PlayerProfile[]>([]);\nexport function updateCast(newCast: PlayerProfile[]) {\n    cast$.next(newCast);\n}\nexport function getCast(): PlayerProfile[] {\n    return cast$.value;\n}\n// The player that the user has clicked on.\nexport const selectedPlayer$ = new BehaviorSubject<SelectedPlayerData | null>(null);\nexport function getSelectedPlayer() {\n    return selectedPlayer$.value;\n}\n\n// The display mode selected by the viewsbar.\nexport const displayMode$ = new BehaviorSubject<PortraitDisplayMode>(popularityMode);\n\n// If the screen is fullscreen or not.\nexport const isFullscreen$ = new BehaviorSubject<boolean>(false);\n\nexport const theme$ = new Subject<ColorTheme>();\n","export interface ColorTheme {\n    name: string;\n    bg: string;\n    text: string;\n    toggleBorder: string;\n    gradient: string;\n    bodyArea: string;\n    link: string;\n    mark: string;\n    overlay: string;\n    evictedCell: string;\n    grayCell: string;\n    winnerCell: string;\n    lightGrayCell: string;\n    runnerUpCell: string;\n    nomineeCell: string;\n    hohCell: string;\n    portraitBorder: string;\n    tableCellBorder: string;\n}\n\nexport const lightTheme: ColorTheme = {\n    name: \"light\",\n    bg: \"#fff\",\n    text: \"#363537\",\n    toggleBorder: \"#FFF\",\n    gradient: \"linear-gradient(#39598A, #79D7ED)\",\n    bodyArea: \"#fff\",\n    link: \"blue\",\n    mark: \"yellow\",\n    overlay: \"fff\",\n    evictedCell: \"#fa8072\",\n    grayCell: \"#eaecf0\",\n    lightGrayCell: \"#f8f9fa\",\n    winnerCell: \"#73fb76\",\n    runnerUpCell: \"#d1e8ef\",\n    nomineeCell: \"#959ffd\",\n    hohCell: \"#CCFFCC\",\n    portraitBorder: \"gray\",\n    tableCellBorder: \"#a2a9b1\",\n};\n\nexport const darkTheme: ColorTheme = {\n    name: \"dark\",\n    bg: \"#121212\",\n    text: \"#FAFAFA\",\n    bodyArea: \"#363537\",\n    toggleBorder: \"#6B8096\",\n    gradient: \"linear-gradient(#091236, #1E215D)\",\n    link: \"lightblue\",\n    mark: \"#7e006d\",\n    overlay: \"#444346\",\n    evictedCell: \"#9d4c43\",\n    grayCell: \"#5e5e5e\",\n    lightGrayCell: \"#404040\",\n    runnerUpCell: \"#9fbec882\",\n    nomineeCell: \"#6c75d0\",\n    winnerCell: \"#00ac04\",\n    hohCell: \"#3f783f\",\n    portraitBorder: \"#484848\",\n    tableCellBorder: \"#53575b\",\n};\n","import React, { useState } from \"react\";\nimport { theme$ } from \"../../subjects/subjects\";\nimport { darkTheme, lightTheme } from \"../../theme/theme\";\n\nexport function ThemeSwitcher() {\n    const [theme, setTheme] = useState(\n        window.matchMedia && window.matchMedia(\"(prefers-color-scheme: dark)\").matches ? \"dark\" : \"light\"\n    );\n    const toggleTheme = () => {\n        if (theme === \"light\") {\n            setTheme(\"dark\");\n            theme$.next(darkTheme);\n        } else {\n            setTheme(\"light\");\n            theme$.next(lightTheme);\n        }\n    };\n\n    const className = `button ${theme === \"dark\" ? `is-dark` : \"is-light\"}`;\n    return (\n        <div className={className} onClick={toggleTheme}>\n            {theme === \"light\" ? \"Dark mode\" : \"Light mode\"}\n        </div>\n    );\n}\n","import React from \"react\";\nimport ReactPaginate from \"react-paginate\";\nimport { HasText } from \"../layout/text\";\nimport { shuffle, ceil } from \"lodash\";\nimport { PlayerProfile } from \"../../model\";\nimport { mainContentStream$ } from \"../../subjects/subjects\";\nimport { CastingScreen } from \"../castingScreen/castingScreen\";\nimport _ from \"lodash\";\nimport styled from \"styled-components\";\n\ninterface DeckScreenProps {}\n\ninterface DeckScreenState {\n    loading: boolean;\n    decks: string[];\n    i: number;\n}\n\nconst decksPerPage = 26;\nconst baseUrl = \"https://spaulmark.github.io/img/\";\n\nconst imageCache: { [id: string]: string } = {};\n\nconst DeckStyle = styled(HasText)`\n    display: flex;\n    cursor: pointer;\n    align-items: center;\n    :hover {\n        color: red;\n        background-color: #ffe1ea;\n    }\n`;\n\nconst Centered = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`;\n\nconst DeckText = styled.p`\n    margin-left: 1rem;\n`;\n\n// TODO: add a search bar, add a sort alphebetically function.\n\nasync function randomImageFromFolder(folder: string) {\n    if (imageCache[folder]) return imageCache[folder];\n    const links = await (await fetch(`${baseUrl}${folder}/dir.json`)).json();\n    const image = _.sample(links[\"files\"]);\n    imageCache[folder] = `${baseUrl}${folder}/${image}`;\n    return `${baseUrl}${folder}/${image}`;\n}\n\nasync function selectCast(folder: string) {\n    const links = await (await fetch(`${baseUrl}${folder}/dir.json`)).json();\n    const imageLinks = links[\"files\"].map((file: string) => {\n        return { name: file, url: `${baseUrl}${folder}/${file}` };\n    });\n    const playerProfiles = imageLinks.map((image: { name: string; url: string }) => {\n        return new PlayerProfile({\n            name: image.name.substr(0, image.name.lastIndexOf(\".\")) || image.name,\n            imageURL: image.url,\n        });\n    });\n    mainContentStream$.next(<CastingScreen cast={playerProfiles} />);\n}\n\nfunction Deck(props: { deck: string }): JSX.Element {\n    const [img, setImage] = React.useState(\"\");\n    const [loading, setLoading] = React.useState(true);\n    const deck = props.deck;\n\n    if (loading)\n        randomImageFromFolder(deck).then((img) => {\n            setLoading(false);\n            setImage(img);\n        });\n    return (\n        <DeckStyle className=\"column is-6\" onClick={() => selectCast(deck)}>\n            <img src={img} style={{ width: 50, height: 50 }} />\n            <DeckText>{deck}</DeckText>\n        </DeckStyle>\n    );\n}\n\nfunction DeckList(props: { data: string[]; i: number }): JSX.Element {\n    let commentNodes: JSX.Element[] = [];\n    const i = props.i;\n    const data = props.data;\n    const min = i * decksPerPage;\n    for (let j = min; j < min + decksPerPage; j++) {\n        const deck = data[j];\n        if (!deck) continue;\n        commentNodes.push(<Deck key={`${deck}__${i}__${j}`} deck={deck} />);\n    }\n    return (\n        <div id=\"project-comments\" key={\"__commentList__\"} style={{ display: \"flex\" }}>\n            <div key={\"__ul__\"} className={\"columns is-multiline\"}>\n                {commentNodes}\n            </div>\n        </div>\n    );\n}\n\nexport class DeckScreen extends React.Component<DeckScreenProps, DeckScreenState> {\n    constructor(props: DeckScreenProps) {\n        super(props);\n        this.state = { loading: true, decks: [], i: 0 };\n    }\n    async componentDidMount() {\n        const data = await (await fetch(\"https://spaulmark.github.io/img/dir.json\")).json();\n        this.setState({ decks: shuffle(data.decks), loading: false });\n    }\n\n    private handlePageClick = (page: { selected: number }) => {\n        this.setState({ i: page.selected });\n    };\n\n    render() {\n        if (this.state.loading) return <div />;\n        return (\n            <div>\n                <DeckList key={\"comments\"} data={this.state.decks} i={this.state.i} />\n                <Centered>\n                    <ReactPaginate\n                        key={\"__list__\"}\n                        previousLabel={\"previous\"}\n                        nextLabel={\"next\"}\n                        breakLabel={\"...\"}\n                        breakClassName={\"break-me\"}\n                        pageCount={ceil(this.state.decks.length / decksPerPage)}\n                        marginPagesDisplayed={2}\n                        pageRangeDisplayed={3}\n                        onPageChange={this.handlePageClick}\n                        containerClassName={\"pagination\"}\n                        activeClassName={\"active\"}\n                    />\n                </Centered>\n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport { CastingScreen } from \"../castingScreen/castingScreen\";\nimport { mainContentStream$, getCast } from \"../../subjects/subjects\";\nimport styled from \"styled-components\";\nimport { ThemeSwitcher } from \"./themeSwitch\";\nimport { ColorTheme } from \"../../theme/theme\";\nimport { Box } from \"../layout/box\";\nimport { DeckScreen } from \"../deckScreen/deckScreen\";\n\nconst TopbarLink = styled.div`\n    color: ${({ theme }: { theme: ColorTheme }) => theme.link};\n    cursor: pointer;\n`;\n\nexport function AdvancedEditLink(): JSX.Element {\n    return (\n        <TopbarLink\n            onClick={() => {\n                mainContentStream$.next(<CastingScreen cast={getCast()} />);\n            }}\n        >\n            Edit / Upload Cast\n        </TopbarLink>\n    );\n}\n\nexport function ChooseCastLink(): JSX.Element {\n    return (\n        <TopbarLink\n            onClick={() => {\n                mainContentStream$.next(<DeckScreen />);\n            }}\n        >\n            Choose Cast\n        </TopbarLink>\n    );\n}\n\nexport function Topbar(props: { style?: any }): JSX.Element {\n    const style = { ...{ marginTop: 30 }, ...(props.style || {}) };\n    return (\n        <Box className=\"level is-mobile\" style={style}>\n            <div className=\"level-item\">\n                <ChooseCastLink />\n            </div>\n            <div className=\"level-item\">\n                <AdvancedEditLink />\n            </div>\n            <div className=\"level-item\">\n                <ThemeSwitcher />\n            </div>\n        </Box>\n    );\n}\n","import React from \"react\";\nimport { PlayerProfile } from \"../../model\";\nimport { MemoryWall } from \"../memoryWall\";\nimport { NextEpisodeButton } from \"../nextEpisodeButton/nextEpisodeButton\";\nimport { ChooseCastLink } from \"../topbar/topBar\";\nimport { HasText } from \"../layout/text\";\n\ninterface PregameScreenProps {\n    cast: PlayerProfile[];\n}\n\nexport function PregameScreen(props: PregameScreenProps): JSX.Element {\n    if (props.cast.length === 0) {\n        return (\n            <HasText>\n                Cast is empty. <ChooseCastLink />\n            </HasText>\n        );\n    }\n    return (\n        <HasText>\n            Welcome to Big Brother!\n            <MemoryWall houseguests={props.cast} />\n            <p>\n                <b> {\"You can use the <- and -> arrow keys to move forwards and backwards.\"}</b>\n            </p>\n            <NextEpisodeButton />\n        </HasText>\n    );\n}\n","import prand from \"pure-rand\";\nimport { BehaviorSubject } from \"rxjs\";\nimport { hashcode } from \"./utilities\";\nimport { cast$ } from \"../subjects/subjects\";\n\nexport class BbRandomGenerator {\n    private rng: prand.RandomGenerator;\n\n    public randomFloat(): number {\n        let result: number;\n        [result, this.rng] = this.rng.next();\n        return result / 2147483647.0;\n    }\n\n    public randomInt(a: number, b: number): number {\n        let result: number;\n        [result, this.rng] = prand.uniformIntDistribution(a, b, this.rng);\n        return result;\n    }\n\n    public flipCoin(): boolean {\n        let result: number;\n        [result, this.rng] = this.rng.next();\n        return result % 2 === 0;\n    }\n\n    public seed(seed: number) {\n        this.rng = prand.xorshift128plus(seed);\n    }\n\n    public constructor(seed: number) {\n        this.rng = prand.xorshift128plus(seed);\n    }\n}\n\nexport function rng() {\n    return rng$.value;\n}\n\nconst rng$ = new BehaviorSubject(new BbRandomGenerator(0));\n\nconst castSub = cast$.subscribe({\n    next: cast => {\n        let castNames = \"\";\n        cast.forEach(houseguest => (castNames += houseguest.name));\n        rng$.next(new BbRandomGenerator(hashcode(castNames)));\n    }\n});\n","import { Houseguest } from \"./houseguest\";\nimport { PlayerProfile } from \"./playerProfile\";\nimport _ from \"lodash\";\nimport { newRelationshipMap, rng } from \"../utils\";\nimport { finalJurySize, getFinalists } from \"./season\";\nimport { EpisodeLog } from \"./logging/episodelog\";\n\nexport function getById(gameState: GameState, id: number): Houseguest {\n    return gameState.houseguestCache[id];\n}\n\nexport function exclude(inclusions: Houseguest[], exclusions: Houseguest[]) {\n    const excludedIds = exclusions.map(hg => hg.id);\n    return inclusions.filter(hg => !excludedIds.includes(hg.id) && !hg.isEvicted);\n}\n\nexport function randomPlayer(inclusions: Houseguest[], exclusions: Houseguest[] = []): Houseguest {\n    if (inclusions.length === 0) {\n        throw new Error(\"Tried to get a random player from a list of 0 players.\");\n    }\n    const options = exclude(inclusions, exclusions);\n    const choice = rng().randomInt(0, options.length - 1);\n\n    return options[choice];\n}\n\nexport function nonEvictedHouseguests(gameState: GameState) {\n    return gameState.houseguests.filter(hg => !hg.isEvicted);\n}\nexport function getJurors(gameState: GameState): Houseguest[] {\n    return gameState.houseguests.filter(hg => hg.isJury);\n}\n\nexport function inJury(gameState: GameState): Boolean {\n    return gameState.remainingPlayers - getFinalists() <= finalJurySize();\n}\n\nexport function calculatePopularity(hero: Houseguest, house: Houseguest[]) {\n    let sum = 0;\n    let count = 0;\n    const targetId = hero.id;\n    house.forEach(houseguest => {\n        if (houseguest.id !== targetId) {\n            count++;\n            sum += houseguest.relationships[targetId];\n        }\n    });\n    return count === 0 ? 0 : sum / count;\n}\n\nexport class GameState {\n    // Current state of the game after a phase.\n\n    readonly houseguestCache: { [id: number]: Houseguest } = {};\n    readonly houseguests: Houseguest[] = [];\n    readonly remainingPlayers: number = 0;\n    readonly phase: number = 0;\n    readonly previousHOH?: Houseguest;\n    readonly log: EpisodeLog[] = [];\n    get currentLog() {\n        return this.log[this.phase];\n    }\n\n    public constructor(init: PlayerProfile[] | GameState) {\n        if (!(init instanceof Array)) {\n            Object.assign(this, init);\n        } else {\n            const profiles = init as PlayerProfile[];\n            this.remainingPlayers = profiles.length;\n            profiles.forEach((profile, i) => {\n                const hg: Houseguest = new Houseguest({\n                    ...profile,\n                    id: i,\n                    relationships: newRelationshipMap(profiles.length, i)\n                });\n                this.houseguestCache[i] = hg;\n                this.houseguests.push(hg);\n            });\n        }\n    }\n}\n\nexport class MutableGameState {\n    public houseguests: Houseguest[] = [];\n    public houseguestCache: { [id: number]: Houseguest } = {};\n    public remainingPlayers: number = 0;\n    public phase: number = 0;\n    public previousHOH?: Houseguest;\n    public log: EpisodeLog[] = [];\n    get currentLog() {\n        return this.log[this.phase];\n    }\n\n    public constructor(init: GameState | MutableGameState) {\n        const copy = _.cloneDeep(init);\n        Object.assign(this, copy);\n    }\n}\n","import { BigBrotherVanilla } from \"../components/episode/bigBrotherEpisode\";\nimport { EpisodeFactory } from \"../components/episode/episodeFactory\";\nimport { GameState } from \"./gameState\";\nimport { EpisodeType, Episode } from \".\";\nimport { BigBrotherFinale } from \"../components/episode/bigBrotherFinale\";\nimport { cast$ } from \"../subjects/subjects\";\nimport { GameOver } from \"../components/episode/gameOver\";\n\nexport function finalJurySize() {\n    return jurors;\n}\n\nlet jurors = 7;\nconst sub = cast$.subscribe({\n    next: newCast => {\n        let players = newCast.length;\n        players = Math.round(players * 0.55);\n        if (players % 2 === 0) {\n            players--;\n        }\n        jurors = players;\n    }\n});\n\nexport function getFinalists() {\n    return 2;\n}\n\nexport class Season {\n    private factory: EpisodeFactory;\n\n    public constructor() {\n        this.factory = new EpisodeFactory();\n    }\n\n    // In the future, this would all be customizable,\n    // and not just all big brother episodes by default.\n\n    public renderEpisode(gameState: GameState, type: EpisodeType): Episode {\n        return this.factory.nextEpisode(gameState, type);\n    }\n\n    public whichEpisodeType(players: number) {\n        if (players === 3) {\n            return BigBrotherFinale;\n        }\n        if (players === 2) {\n            return GameOver;\n        }\n        return BigBrotherVanilla;\n    }\n}\n","import React from \"react\";\nimport { GameState } from \"../../model/gameState\";\nimport { ViewsBar } from \"../viewsBar/viewBar\";\ninterface InitScene {\n    readonly title: string;\n    readonly gameState: GameState;\n    readonly content: JSX.Element;\n}\nexport class Scene {\n    readonly title: string = \"\";\n    readonly gameState: GameState = new GameState([]);\n    readonly content: JSX.Element = <div>{`Error while rendering ${this.title}`}</div>;\n    public render: JSX.Element;\n    public constructor(init: Partial<InitScene>) {\n        Object.assign(this, init);\n        this.render = (\n            <div>\n                <ViewsBar />\n                {this.content}\n            </div>\n        );\n    }\n}\n","import { Houseguest, inJury, GameState } from \"../../model\";\n\nexport const relationship = (hero: Houseguest, villain: Houseguest) => hero.relationships[villain.id];\n\nexport function favouriteIndex(hero: Houseguest, options: Houseguest[]) {\n    // Return the index of the houseguest that hero has the best relationship with.\n    return highestScore(hero, options, relationship);\n}\n\nexport function highestScore(\n    hero: Houseguest,\n    options: Houseguest[],\n    callback: (hero: Houseguest, villain: Houseguest) => number\n) {\n    let highestIndex = 0;\n    let highestScore = -Infinity;\n    options.forEach((villain, i) => {\n        const currentScore = callback(hero, villain);\n        if (currentScore > highestScore) {\n            highestIndex = i;\n            highestScore = currentScore;\n        }\n    });\n    return highestIndex;\n}\nexport function lowestScore(\n    hero: Houseguest,\n    options: Houseguest[],\n    callback: (hero: Houseguest, villain: Houseguest) => number\n) {\n    let lowestIndex = 0;\n    let lowestScore = Infinity;\n    options.forEach((villain, i) => {\n        const currentScore = callback(hero, villain);\n        if (currentScore < lowestScore) {\n            lowestIndex = i;\n            lowestScore = currentScore;\n        }\n    });\n    return lowestIndex;\n}\n\nexport function doesHeroWinTheFinale(\n    hgs: { hero: Houseguest; villain: Houseguest },\n    jury: Houseguest[]\n): boolean {\n    const hero = hgs.hero;\n    const villain = hgs.villain;\n    let heroVotes = 0;\n    let villainVotes = 0;\n    jury.forEach(juror => {\n        if (juror.id === hero.id || juror.id === villain.id) {\n            return;\n        }\n        if (relationship(hero, juror) > relationship(villain, juror)) {\n            heroVotes++;\n        } else {\n            villainVotes++;\n        }\n    });\n    return heroVotes > villainVotes;\n}\n\nexport function heroShouldTargetSuperiors(hero: Houseguest, gameState: GameState): boolean {\n    const totalPlayers = gameState.remainingPlayers;\n    const superiors = hero.superiors.size;\n    // const inferiors = totalPlayers - 1 - hero.superiors.size;\n\n    // Old logic: Target the larger group. If they are equal, target superiors.\n    // return superiors >= inferiors;\n\n    // New logic: Target superiors unless you are in the top 25% of the playerlist.\n    return superiors / totalPlayers >= 0.25;\n}\n\n// TODO: this function can just honestly die. it's only used in nomination logic (which sucks anyways)\n// when I do the new logic, I think people who are dead center should target their superiors. works in F5.\n\nexport function hitList(hero: Houseguest, options: Houseguest[], gameState: GameState): Set<number> {\n    let result = options;\n    // jury logic is not affected by someone who is dead center in power rankings\n    if (inJury(gameState) && heroShouldTargetSuperiors(hero, gameState)) {\n        if (hero.superiors.size * 2 < gameState.remainingPlayers - 1) {\n            result = options.filter(hg => !hero.superiors.has(hg.id));\n        } else {\n            result = options.filter(hg => hero.superiors.has(hg.id));\n        }\n    } else {\n    }\n    return new Set(result.map(hg => hg.id));\n}\n","import { Houseguest, GameState, nonEvictedHouseguests, inJury, exclude } from \"../../model\";\nimport { favouriteIndex, relationship, lowestScore, hitList, heroShouldTargetSuperiors } from \"./aiUtils\";\nimport { classifyRelationship, RelationshipType as Relationship } from \"./classifyRelationship\";\n\ninterface NumberWithLogic {\n    decision: number;\n    reason: string;\n}\n\ninterface HouseguestWithLogic {\n    decision: Houseguest | null;\n    reason: string;\n}\n\n// Return the index of the eviction target.\nexport function castEvictionVote(\n    hero: Houseguest,\n    nominees: Houseguest[],\n    gameState: GameState\n): NumberWithLogic {\n    if (inJury(gameState)) {\n        return cutthroatVoteJury(hero, nominees, gameState);\n    } else {\n        return cutthroatVote(hero, nominees);\n    }\n}\n\nfunction cutthroatVoteJury(hero: Houseguest, nominees: Houseguest[], gameState: GameState): NumberWithLogic {\n    const nom0 = nominees[0];\n    const nom1 = nominees[1];\n    const zeroIsInferior = !hero.superiors.has(nom0.id);\n    const oneIsInferior = !hero.superiors.has(nom1.id);\n    // if there is no sup/inf difference, no point in doing special logic for it\n    if (zeroIsInferior === oneIsInferior) {\n        return cutthroatVote(hero, nominees);\n    }\n    // Don't evict the last person in the game you can beat\n    if (gameState.remainingPlayers - hero.superiors.size - 1 === 1 && (zeroIsInferior || oneIsInferior)) {\n        const nonVote = zeroIsInferior ? 0 : 1;\n        return {\n            decision: zeroIsInferior ? 1 : 0,\n            reason: `I can't evict ${nominees[nonVote].name}, because they are the last person I can beat.`\n        };\n    }\n    const target = heroShouldTargetSuperiors(hero, gameState) === oneIsInferior ? 0 : 1;\n    const nonTarget = target ? 0 : 1;\n    const excuse = heroShouldTargetSuperiors(hero, gameState)\n        ? `I can't beat ${nominees[target].name} in the end.`\n        : `I need to keep ${nominees[nonTarget].name} around as a shield.`;\n    const targetIsFriend =\n        classifyRelationship(\n            hero.popularity,\n            nominees[target].popularity,\n            hero.relationships[nominees[target].id]\n        ) === Relationship.Friend;\n    const nonTargetIsNonFriend =\n        classifyRelationship(\n            hero.popularity,\n            nominees[nonTarget].popularity,\n            hero.relationships[nominees[nonTarget].id]\n        ) !== Relationship.Friend;\n    const nonTargetIsFriend = !nonTargetIsNonFriend;\n    const targetIsNonFriend = !targetIsFriend;\n    // the only reason to not evict your target is if he is your only friend on the block\n    if (targetIsFriend && nonTargetIsNonFriend) {\n        return { decision: nonTarget, reason: `${nominees[nonTarget].name} is my enemy.` };\n    } else if (targetIsFriend && nonTargetIsFriend) {\n        return { decision: target, reason: `Both noms are my friends, but ${excuse}` };\n    } else if (targetIsNonFriend && nonTargetIsNonFriend) {\n        return { decision: target, reason: `Neither of the noms are my friends, but ${excuse}` };\n    } else {\n        return { decision: target, reason: `${excuse}` };\n    }\n}\n\n// TODO: only works for 2 nominees\nfunction cutthroatVote(hero: Houseguest, nominees: Houseguest[]): NumberWithLogic {\n    const nom0 = nominees[0];\n    const nom1 = nominees[1];\n    const r0 = classifyRelationship(hero.popularity, nom0.popularity, hero.relationships[nom0.id]);\n    const r1 = classifyRelationship(hero.popularity, nom1.popularity, hero.relationships[nom1.id]);\n    if (r0 === Relationship.Enemy && r1 === Relationship.Enemy) {\n        return {\n            decision: nom0.popularity > nom1.popularity ? 0 : 1,\n            reason: \"Both noms are my enemies, so I voted for the more popular one.\"\n        };\n    } else if (\n        (r0 === Relationship.Enemy && r1 !== Relationship.Enemy) ||\n        (r1 === Relationship.Enemy && r0 !== Relationship.Enemy)\n    ) {\n        const vote = r0 === Relationship.Enemy ? 0 : 1;\n        return { decision: vote, reason: `${nominees[vote].name} is my enemy.` };\n    } else if (\n        (r0 !== Relationship.Friend && r1 === Relationship.Friend) ||\n        (r1 !== Relationship.Friend && r0 === Relationship.Friend)\n    ) {\n        const vote = r0 !== Relationship.Friend ? 0 : 1;\n        const nonVote = vote === 0 ? 1 : 0;\n        return { decision: vote, reason: `${nominees[nonVote].name} is my friend.` };\n    }\n    const vote = lowestScore(hero, nominees, relationship);\n    return {\n        decision: vote,\n        reason: `Both noms are my friends. but I like ${nominees[vote === 0 ? 1 : 0].name} more.`\n    };\n}\n\n// TODO: target and pawn based nominations, different pre and post jury.\nexport function nominateNPlayers(\n    hero: Houseguest,\n    options: Houseguest[],\n    gameState: GameState,\n    n: number\n): NumberWithLogic[] {\n    const result: NumberWithLogic[] = [];\n    const hitlist = hitList(hero, options, gameState);\n    let trueOptions = options.filter(hg => hitlist.has(hg.id));\n    if (trueOptions.length === 0) {\n        // if there are no options, we must sadly deviate from the hit list\n        trueOptions = options;\n    }\n    while (result.length < n) {\n        const decision = trueOptions[lowestScore(hero, trueOptions, relationship)];\n        const reason = \"I think you are ugly\";\n        result.push({ decision: decision.id, reason });\n        trueOptions = exclude(trueOptions, [decision]);\n        if (trueOptions.length === 0) {\n            trueOptions = options.filter(hg => !hitlist.has(hg.id));\n        }\n    }\n    return result;\n}\n\nexport function useGoldenVeto(\n    hero: Houseguest,\n    nominees: Houseguest[],\n    gameState: GameState\n): HouseguestWithLogic {\n    let result: HouseguestWithLogic;\n    if (hero.id == nominees[0].id || hero.id == nominees[1].id) {\n        result = { decision: hero, reason: \"I am going to save myself.\" };\n    } else {\n        if (inJury(gameState)) {\n            // Note that I am currently not using the post-jury veto logic, primarily because it sucks at the moment\n            result = useGoldenVetoPreJury(hero, nominees);\n        } else {\n            result = useGoldenVetoPreJury(hero, nominees);\n        }\n        if (nonEvictedHouseguests(gameState).length === 4) {\n            result = {\n                decision: null,\n                reason: \"It doesn't make sense to use the veto here.\"\n            };\n        }\n    }\n    return result || null;\n}\n\n// works with any number of nominees\nfunction useGoldenVetoPostJury(\n    hero: Houseguest,\n    nominees: Houseguest[],\n    gameState: GameState\n): HouseguestWithLogic {\n    let save = -1;\n    let reason = \"No reason specified.\";\n    let potentialSave: Houseguest | null = null;\n    let alwaysSave: Houseguest | null = null;\n    // identify potential save targets\n    nominees.forEach((nominee: Houseguest) => {\n        const relationship = classifyRelationship(\n            hero.popularity,\n            nominee.popularity,\n            hero.relationships[nominee.id]\n        );\n        const shouldTargetSuperiors = heroShouldTargetSuperiors(hero, gameState);\n        const nomineeIsSuperior: boolean = hero.superiors.has(nominee.id);\n        // always save the last person you can beat\n        if (gameState.remainingPlayers - hero.superiors.size - 1 === 1 && !nomineeIsSuperior) {\n            alwaysSave = nominee;\n            reason = `I have to save ${nominee.name}, because they are the last person I can beat.`;\n        }\n        // must be a friend and a non-target\n        // TODO: some people have the entire game as targets. they shouldn't be affected. --------------------------\n        if (relationship === Relationship.Friend && nomineeIsSuperior !== shouldTargetSuperiors) {\n            const excuse = heroShouldTargetSuperiors(hero, gameState)\n                ? `I can beat them in the end.`\n                : `I need to keep them around as a shield.`;\n            if (potentialSave) {\n                potentialSave =\n                    hero.relationshipWith(nominee) > hero.relationshipWith(potentialSave)\n                        ? nominee\n                        : potentialSave;\n            } else {\n                reason = `${nominee.name} is my friend, and ${excuse} `;\n                potentialSave = nominee;\n            }\n        }\n    });\n    if (alwaysSave) {\n        return { decision: alwaysSave, reason };\n    } else if (potentialSave) {\n        return { decision: potentialSave, reason };\n    } else {\n        return { decision: null, reason: \"Not sure what to put here yet.\" };\n    }\n}\n\nfunction useGoldenVetoPreJury(hero: Houseguest, nominees: Houseguest[]): HouseguestWithLogic {\n    let save = -1;\n    let reason = \"Neither of these nominees are my friends.\";\n    const rel0 = classifyRelationship(\n        hero.popularity,\n        nominees[0].popularity,\n        hero.relationshipWith(nominees[0])\n    );\n    const rel1 = classifyRelationship(\n        hero.popularity,\n        nominees[1].popularity,\n        hero.relationshipWith(nominees[1])\n    );\n    // basic logic that only saves friends. Doesn't take into account jury stuff.\n    if (rel0 === Relationship.Friend && rel1 !== Relationship.Friend) {\n        save = 0;\n        reason = `${nominees[0].name} is my friend.`;\n    } else if (rel1 === Relationship.Friend && rel0 !== Relationship.Friend) {\n        save = 1;\n        reason = `${nominees[1].name} is my friend.`;\n    } else if (rel0 === Relationship.Friend && rel1 === Relationship.Friend) {\n        save = Math.max(nominees[0].popularity, nominees[1].popularity) === nominees[0].popularity ? 0 : 1;\n        reason = `Both nominees are my friends, but I like ${nominees[save].name} more.`;\n    }\n    return { decision: nominees[save], reason };\n}\n\n// Returns the index of the finalist with the highest relationship with juror\nexport function castJuryVote(juror: Houseguest, finalists: Houseguest[]): number {\n    return favouriteIndex(juror, finalists);\n}\n","import React from \"react\";\nimport { isFullscreen$ } from \"../../subjects/subjects\";\nimport styled from \"styled-components\";\n\nconst FullscreenIcon = styled.img`\n    position: -webkit-sticky;\n    position: sticky;\n    top: 20px;\n    right: 20px;\n`;\n\nexport function FullscreenButton(): JSX.Element {\n    return (\n        <FullscreenIcon\n            src={\n                \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABmJLR0QA/wD/AP+gvaeTAAAASElEQVRIiWNgGAUEACMa/z+R6ohWz0Sqi0gFLIRcQAAQDAGa+2DoWzAKRgH1wX8G3OULWfqHfkYbsNIUPR5IrQ/gYLQsGngAAEPgCRZjAdYSAAAAAElFTkSuQmCC\"\n            }\n            className=\"button is-rounded\"\n            onClick={() => {\n                isFullscreen$.next(!isFullscreen$.getValue());\n            }}\n        />\n    );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { EpisodeLog } from \"../../../model/logging/episodelog\";\nimport { CenteredBold, Centered, CenteredItallic } from \"../../layout/centered\";\nimport { GameState, getById } from \"../../../model\";\nimport { VoteType, WinnerVote, RunnerUpVote } from \"../../../model/logging/voteType\";\nimport { FullscreenButton } from \"../../mainPage/fullscreenButton\";\nimport { ColorTheme } from \"../../../theme/theme\";\n\nexport const EndgameTableCell = styled.td`\n    padding: 0.1em 0.4em;\n    border: 1px solid ${({ theme }: { theme: ColorTheme }) => theme.tableCellBorder};\n`;\n\nconst EndgameTable = styled.table`\n    border: 1px solid ${({ theme }: { theme: ColorTheme }) => theme.tableCellBorder};\n    border-collapse: collapse;\n`;\n\nconst Gray = styled(EndgameTableCell)`\n    background-color: ${({ theme }: { theme: ColorTheme }) => theme.grayCell};\n`;\n\nconst White = styled(EndgameTableCell)`\n    background-color: ${({ theme }: { theme: ColorTheme }) => theme.lightGrayCell};\n`;\n\nconst Evicted = styled(EndgameTableCell)`\n    background-color: ${({ theme }: { theme: ColorTheme }) => theme.evictedCell};\n`;\n\nexport const WinnerCell = styled(EndgameTableCell)`\n    background-color: ${({ theme }: { theme: ColorTheme }) => theme.winnerCell};\n`;\n\nexport const RunnerUpCell = styled(EndgameTableCell)`\n    background-color: ${({ theme }: { theme: ColorTheme }) => theme.runnerUpCell};\n`;\n\nexport const NomineeCell = styled(EndgameTableCell)`\n    background-color: ${({ theme }: { theme: ColorTheme }) => theme.nomineeCell};\n`;\n\nexport const HohCell = styled(EndgameTableCell)`\n    background-color: ${({ theme }: { theme: ColorTheme }) => theme.hohCell};\n`;\n\nconst BlackRow = styled.tr`\n    height: 0.4em;\n    background-color: #000000;\n`;\n\nexport function generateVotingTable(gameState: GameState): JSX.Element {\n    const masterLog: EpisodeLog[] = gameState.log;\n    const houseguestCells: JSX.Element[][] = [];\n    gameState.houseguests.forEach((hg, i) => {\n        houseguestCells[hg.id] = [\n            <Gray key={`hg-name---${i}`}>\n                <CenteredBold noMargin={true}>{hg.name}</CenteredBold>\n            </Gray>,\n        ];\n    });\n    const evictionOrder: number[] = [];\n    const topRowCells: JSX.Element[] = [];\n    const preVetoCells: JSX.Element[] = [];\n    const vetoCells: JSX.Element[] = [];\n    const postVetoCells: JSX.Element[] = [];\n    const evictedCells: JSX.Element[] = [];\n    const winnerCells: JSX.Element[] = [];\n    masterLog.forEach((log, i) => {\n        generateTopRow(log, i, topRowCells, masterLog.length - 1);\n        generatePreVetoRow(log, i, preVetoCells);\n        generateVetoRow(log, i, vetoCells);\n        generatePostVetoRow(log, i, postVetoCells);\n        generateEvictedRow(log, i, evictedCells, gameState);\n        if (!log) return;\n        evictionOrder.push(log.evicted);\n        if (log.runnerUp !== undefined) evictionOrder.push(log.runnerUp);\n        if (log.winner !== undefined) evictionOrder.push(log.winner);\n        // add each of the votes to the houseguest cells\n        for (const [key, value] of Object.entries(log.votes)) {\n            // typescript for .. in loops kinda suck so i need to do a sketchy type conversion\n            const id: number = (key as unknown) as number;\n            const vote: VoteType = value;\n            houseguestCells[id].push(vote.render(gameState));\n        }\n        if (log.winner !== undefined && log.runnerUp !== undefined) {\n            houseguestCells[log.winner].push(new WinnerVote().render(gameState));\n            houseguestCells[log.runnerUp].push(new RunnerUpVote().render(gameState));\n            evictedCells.push(\n                <RunnerUpCell>\n                    <CenteredBold noMargin={true}>{getById(gameState, log.runnerUp).name}</CenteredBold>\n                    <Centered noMargin={true}>\n                        <small>Finalist</small> {/** TODO: put \"X votes\" here instead. */}\n                    </Centered>\n                </RunnerUpCell>\n            );\n            winnerCells.push(\n                <WinnerCell>\n                    <CenteredBold noMargin={true}>{getById(gameState, log.winner).name}</CenteredBold>\n                    <Centered noMargin={true}>\n                        <small>Winner</small>\n                    </Centered>\n                </WinnerCell>\n            );\n        }\n    });\n    preVetoCells.push(\n        <White key={`preveto--finale`} rowSpan={3}>\n            <CenteredItallic noMargin={true}>(none)</CenteredItallic>\n        </White>\n    );\n    const winnerRow = <tr>{winnerCells}</tr>;\n    const topRow = <tr>{topRowCells}</tr>;\n    const preVetoRow = <tr>{preVetoCells}</tr>;\n    const vetoRow = <tr>{vetoCells}</tr>;\n    const postVetoRow = <tr>{postVetoCells}</tr>;\n    const blackRow = (\n        <BlackRow>\n            <td colSpan={gameState.houseguests.length} />\n        </BlackRow>\n    );\n    const houseguestRows: JSX.Element[] = [];\n    const evictedRow = <tr>{evictedCells}</tr>;\n    let evictionColSpan = -1;\n    const weeks = evictionOrder.length;\n    evictionOrder.reverse().forEach((id, i) => {\n        if (evictionColSpan > 0) {\n            const weekText = i === 2 ? \"(Finale)\" : `(Week ${weeks - i})`;\n            const isJury = getById(gameState, id).isJury;\n            const colSpan = isJury ? evictionColSpan - 1 : evictionColSpan;\n            const evicted = (\n                <Evicted colSpan={colSpan} key={`evicted-week-${weeks - i}`}>\n                    <CenteredItallic noMargin={true}>Evicted</CenteredItallic>\n                    <CenteredItallic noMargin={true}>\n                        <small>{weekText}</small>\n                    </CenteredItallic>\n                </Evicted>\n            );\n            if (!isJury) {\n                houseguestCells[id].push(evicted); // not jury, they dead\n            } else {\n                const tempList = houseguestCells[id].slice(0, -1);\n                tempList.push(evicted);\n                tempList.push(houseguestCells[id][houseguestCells[id].length - 1]);\n                houseguestCells[id] = tempList;\n            }\n        }\n        houseguestRows.push(<tr key={`hgrow--${id}`}>{houseguestCells[id]}</tr>);\n        evictionColSpan++;\n    });\n\n    return (\n        <div>\n            <FullscreenButton />\n            <EndgameTable>\n                <tbody>\n                    {topRow}\n                    {preVetoRow}\n                    {vetoRow}\n                    {postVetoRow}\n                    {blackRow}\n                    {houseguestRows}\n                    {blackRow}\n                    {evictedRow}\n                    {winnerRow}\n                </tbody>\n            </EndgameTable>\n        </div>\n    );\n}\n\nfunction generateEvictedRow(\n    log: EpisodeLog | undefined,\n    i: number,\n    cells: JSX.Element[],\n    gameState: GameState\n) {\n    if (!log) {\n        cells.push(\n            <Gray key={i} rowSpan={2}>\n                <CenteredBold noMargin={true}>Evicted</CenteredBold>\n            </Gray>\n        );\n        return;\n    }\n\n    const voteTextLine1 =\n        log.soleVoter !== undefined\n            ? `${log.soleVoter}'s choice`\n            : `${log.votesInMajority} of ${log.outOf} votes`;\n\n    cells.push(\n        <Evicted key={i} rowSpan={2}>\n            <Centered noMargin={true}>\n                <b>{getById(gameState, log.evicted).name}</b>\n                <br />\n                <small>\n                    {voteTextLine1} <br />\n                    to evict\n                </small>\n            </Centered>\n        </Evicted>\n    );\n}\n\nfunction generatePostVetoRow(log: EpisodeLog | undefined, i: number, cells: JSX.Element[]) {\n    if (!log) {\n        cells.push(\n            <Gray key={`postVeto--${i}`}>\n                <CenteredBold noMargin={true}>\n                    Nominations\n                    <br />\n                    <small>(post-veto)</small>\n                </CenteredBold>\n            </Gray>\n        );\n        return;\n    }\n    cells.push(\n        <White key={`postVeto--${i}`}>\n            <Centered noMargin={true}>\n                {log.nominationsPostVeto[0]}\n                <br /> {log.nominationsPostVeto[1]}\n            </Centered>\n        </White>\n    );\n}\n\nfunction generateVetoRow(log: EpisodeLog | undefined, i: number, cells: JSX.Element[]) {\n    if (!log) {\n        cells.push(\n            <Gray key={`veto--${i}`}>\n                <CenteredBold noMargin={true}>Veto Winner</CenteredBold>\n            </Gray>\n        );\n        return;\n    }\n    if (log.vetoWinner === undefined) return;\n\n    cells.push(\n        <White key={`veto--${i}`}>\n            <Centered noMargin={true}>{log.vetoWinner}</Centered>\n        </White>\n    );\n}\n\nfunction generatePreVetoRow(log: EpisodeLog | undefined, i: number, cells: JSX.Element[]) {\n    if (!log) {\n        cells.push(\n            <Gray key={`preveto--${i}`}>\n                <CenteredBold noMargin={true}>\n                    Nominations\n                    <br />\n                    <small>(pre-veto)</small>\n                </CenteredBold>\n            </Gray>\n        );\n        return;\n    }\n    if (log.nominationsPreVeto.length === 0) {\n        cells.push(\n            <White key={`preveto--${i}`} rowSpan={2}>\n                <CenteredItallic noMargin={true}>(none)</CenteredItallic>\n            </White>\n        );\n        return;\n    }\n    cells.push(\n        <White key={`preveto--${i}`}>\n            <Centered noMargin={true}>\n                {log.nominationsPreVeto[0]}\n                <br /> {log.nominationsPreVeto[1]}\n            </Centered>\n        </White>\n    );\n}\n\nfunction generateTopRow(log: EpisodeLog | undefined, i: number, cells: JSX.Element[], max: number) {\n    if (!log) {\n        cells.push(<Gray key={`toprow--${i}`} />);\n        return;\n    }\n    if (i === max) {\n        cells.push(\n            <Gray key={`toprow--${i}`} colSpan={2}>\n                <CenteredBold noMargin={true}>Finale</CenteredBold>\n            </Gray>\n        );\n        return;\n    }\n    cells.push(\n        <Gray key={`toprow--${i}`}>\n            <CenteredBold noMargin={true}>Week {i}</CenteredBold>\n        </Gray>\n    );\n}\n","import React from \"react\";\nimport { GameState, getById } from \"../gameState\";\nimport { CenteredItallic, Centered } from \"../../components/layout/centered\";\nimport {\n    EndgameTableCell,\n    WinnerCell,\n    RunnerUpCell,\n    NomineeCell,\n    HohCell,\n} from \"../../components/episode/scenes/votingTable\";\n\nlet voteKey = 0;\n\nfunction getKey(): string {\n    return `${voteKey++}-- vote key`;\n}\n\nexport interface VoteType {\n    id: number;\n    render: (state: GameState) => JSX.Element;\n}\n\nexport class NormalVote implements VoteType {\n    id: number;\n    render = (state: GameState) => (\n        <EndgameTableCell key={getKey()}>\n            <Centered noMargin={true}>{getById(state, this.id).name}</Centered>\n        </EndgameTableCell>\n    );\n    constructor(id: number) {\n        this.id = id;\n    }\n}\n\nexport class WinnerVote implements VoteType {\n    id: number = 1; // unused\n    render = (state: GameState) => (\n        <WinnerCell>\n            <Centered noMargin={true}>Winner</Centered>\n        </WinnerCell>\n    );\n}\n\nexport class RunnerUpVote implements VoteType {\n    id: number = 1; // unused\n    render = (state: GameState) => (\n        <RunnerUpCell>\n            <Centered noMargin={true}>Finalist</Centered>\n        </RunnerUpCell>\n    );\n}\n\nexport class NomineeVote implements VoteType {\n    id: number = -1;\n    evicted: boolean;\n    render = (state: GameState) => (\n        <NomineeCell key={getKey()}>\n            <CenteredItallic noMargin={true}>Nominated</CenteredItallic>\n        </NomineeCell>\n    );\n    constructor(evicted: boolean) {\n        this.evicted = evicted;\n    }\n}\n\nexport class HoHVote implements VoteType {\n    id: number;\n\n    get hohText(): JSX.Element {\n        return (\n            <CenteredItallic noMargin={true}>\n                Head of\n                <br />\n                Household\n            </CenteredItallic>\n        );\n    }\n\n    private hohVote(state: GameState): JSX.Element {\n        return <CenteredItallic noMargin={true}>{getById(state, this.id).name}</CenteredItallic>;\n    }\n\n    render = (state: GameState) => {\n        return <HohCell key={getKey()}>{this.id == -1 ? this.hohText : this.hohVote(state)}</HohCell>;\n    };\n    constructor(id?: number) {\n        this.id = id === undefined ? -1 : id;\n    }\n}\n","import { GameState, getJurors, nonEvictedHouseguests, MutableGameState, Houseguest } from \"../../../model\";\nimport { Scene } from \"../scene\";\nimport { castJuryVote } from \"../../../utils/ai/aiApi\";\nimport { Portraits } from \"../../playerPortrait/portraits\";\nimport React from \"react\";\nimport { ProfileHouseguest } from \"../../memoryWall\";\nimport { CenteredBold } from \"../../layout/centered\";\nimport { DividerBox } from \"../../layout/box\";\nimport { NextEpisodeButton } from \"../../nextEpisodeButton/nextEpisodeButton\";\nimport { NormalVote } from \"../../../model/logging/voteType\";\n\nexport function juryVoteScene(initialGameState: GameState): [GameState, Scene] {\n    const newGameState = new MutableGameState(initialGameState);\n    const jurors: Houseguest[] = getJurors(newGameState);\n    const finalists = nonEvictedHouseguests(newGameState);\n    const votes: Array<ProfileHouseguest[]> = [[], []];\n    jurors.forEach(juror => {\n        const decision = castJuryVote(juror, finalists);\n        const result: ProfileHouseguest = { ...juror };\n        votes[decision].push(result);\n        newGameState.currentLog.votes[juror.id] = new NormalVote(finalists[decision].id);\n    });\n    const votesFor0 = votes[0].length;\n    const votesFor1 = votes[1].length;\n    const isUnanimous = votesFor0 === 0 || votesFor1 === 0;\n    const voteCountText = isUnanimous\n        ? \"By a unanimous vote...\"\n        : `By a vote of ${votesFor0} to ${votesFor1}...`;\n\n    const winner = votesFor0 > votesFor1 ? finalists[0] : finalists[1];\n    const runnerUp = votesFor0 < votesFor1 ? finalists[0] : finalists[1];\n    newGameState.currentLog.winner = winner.id;\n    newGameState.currentLog.runnerUp = runnerUp.id;\n    const scene = new Scene({\n        title: \"Jury Votes\",\n        gameState: newGameState,\n        content: (\n            <div>\n                <CenteredBold>{voteCountText}</CenteredBold>\n                <div className=\"columns is-centered\">\n                    <DividerBox className=\"column\">\n                        <Portraits houseguests={votes[0]} centered={true} />\n                    </DividerBox>\n                    <DividerBox className=\"column\">\n                        <Portraits houseguests={votes[1]} centered={true} />\n                    </DividerBox>\n                </div>\n                <Portraits houseguests={finalists} centered={true} />\n                <CenteredBold>{`Congratulations, ${winner.name}... you are the winner of Big Brother!`}</CenteredBold>\n                <NextEpisodeButton />\n            </div>\n        )\n    });\n    return [newGameState, scene];\n}\n","import React from \"react\";\nimport { EpisodeType, Episode, InitEpisode } from \"./episodes\";\nimport { Scene } from \"./scene\";\nimport { GameState } from \"../../model\";\nimport { MemoryWall } from \"../memoryWall\";\nimport { NextEpisodeButton } from \"../nextEpisodeButton/nextEpisodeButton\";\nimport { finalHohCompScene } from \"./scenes/finalHohCompScene\";\nimport { finalEvictionScene } from \"./scenes/finalEvictionScene\";\nimport { juryVoteScene } from \"./scenes/juryVoteScene\";\nimport { HasText } from \"../layout/text\";\n\nexport const BigBrotherFinale: EpisodeType = {\n    canPlayWith: (n: number) => n === 3,\n    eliminates: 2,\n    arrowsEnabled: true,\n    hasViewsbar: true,\n};\n\nexport function generateBbFinale(initialGameState: GameState): BigBrotherFinaleEpisode {\n    const title = \"Finale\";\n    const content = (\n        <HasText>\n            Finale Night\n            <MemoryWall houseguests={initialGameState.houseguests} /> <br />\n            <NextEpisodeButton />\n        </HasText>\n    );\n    let currentGameState;\n    let hohCompScene;\n    let finalHoH;\n    const scenes = [];\n    [currentGameState, hohCompScene, finalHoH] = finalHohCompScene(initialGameState);\n    scenes.push(hohCompScene);\n    let finalEviction;\n    [currentGameState, finalEviction] = finalEvictionScene(currentGameState, finalHoH);\n    scenes.push(finalEviction);\n    const [gameState, juryScene] = juryVoteScene(currentGameState);\n    scenes.push(juryScene);\n    return new BigBrotherFinaleEpisode({ gameState, content, title, scenes, type: BigBrotherFinale });\n}\n\nexport class BigBrotherFinaleEpisode extends Episode {\n    readonly title: string;\n    readonly scenes: Scene[];\n    readonly content: JSX.Element;\n    readonly gameState: GameState;\n    readonly type = BigBrotherFinale;\n\n    public constructor(init: InitEpisode) {\n        super(init);\n        this.title = init.title;\n        this.scenes = init.scenes;\n        this.content = init.content;\n        this.gameState = init.gameState;\n    }\n}\n","import {\n    GameState,\n    Houseguest,\n    MutableGameState,\n    nonEvictedHouseguests,\n    randomPlayer,\n    getById\n} from \"../../../model\";\nimport { Scene } from \"../scene\";\nimport { Portraits, Portrait } from \"../../playerPortrait/portraits\";\nimport { NextEpisodeButton } from \"../../nextEpisodeButton/nextEpisodeButton\";\nimport React from \"react\";\nimport { Centered, CenteredBold } from \"../../layout/centered\";\n\nexport function finalHohCompScene(initialGameState: GameState): [GameState, Scene, Houseguest] {\n    const newGameState = new MutableGameState(initialGameState);\n    const final3 = nonEvictedHouseguests(initialGameState);\n    const enduranceWinner = randomPlayer(final3);\n    const enduranceLosers = final3.filter(hg => hg.id !== enduranceWinner.id);\n    const skillWinner = randomPlayer(final3, [enduranceWinner]);\n    const finalHoH = getById(newGameState, randomPlayer([enduranceWinner, skillWinner]).id);\n    finalHoH.hohWins++;\n    const scene: Scene = new Scene({\n        title: \"Final HoH Competition\",\n        gameState: newGameState,\n        content: (\n            <div>\n                <Centered>The final 3 houseguests compete in the endurance competition.</Centered>\n                <Portraits houseguests={final3} centered={true} />\n                <Portrait houseguest={enduranceWinner} centered={true} />\n                <CenteredBold>{`${enduranceWinner.name} has won the endurance competition!`}</CenteredBold>\n                <hr />\n                <Centered>{`${enduranceLosers[0].name} and ${enduranceLosers[1].name} compete in the skill competition.`}</Centered>\n                <Portraits houseguests={enduranceLosers} centered={true} />\n                <Portrait houseguest={skillWinner} centered={true} />\n                <CenteredBold>{`${skillWinner.name} has won the skill competition!`}</CenteredBold>\n                <hr />\n                <Centered>{`${enduranceWinner.name} and ${skillWinner.name} compete in the quiz competition.`}</Centered>\n                <Portraits houseguests={[enduranceWinner, skillWinner]} centered={true} />\n                <Portrait houseguest={finalHoH} centered={true} />\n                <CenteredBold>{`Congratulations ${finalHoH.name}, you are the final Head of Household!`}</CenteredBold>\n                <NextEpisodeButton />\n            </div>\n        )\n    });\n    return [new GameState(newGameState), scene, finalHoH];\n}\n","import { GameState, Houseguest, MutableGameState, nonEvictedHouseguests } from \"../../../model\";\nimport { Scene } from \"../scene\";\nimport { castEvictionVote } from \"../../../utils/ai/aiApi\";\nimport { ProfileHouseguest } from \"../../memoryWall\";\nimport { evictHouseguest } from \"../bigBrotherEpisode\";\nimport { Portrait, Portraits } from \"../../playerPortrait/portraits\";\nimport { NextEpisodeButton } from \"../../nextEpisodeButton/nextEpisodeButton\";\nimport React from \"react\";\nimport { CenteredBold, Centered } from \"../../layout/centered\";\nimport { HoHVote, NomineeVote } from \"../../../model/logging/voteType\";\n\nexport function finalEvictionScene(initialGameState: GameState, HoH: Houseguest): [GameState, Scene] {\n    const newGameState = new MutableGameState(initialGameState);\n    const nominees = nonEvictedHouseguests(newGameState).filter((hg) => hg.id !== HoH.id);\n    newGameState.currentLog.nominationsPostVeto = nominees.map((hg) => hg.name);\n    const { decision: vote, reason } = castEvictionVote(HoH, nominees, newGameState);\n    const evictee = nominees[vote];\n    const survivor = nominees[vote == 1 ? 0 : 1];\n    newGameState.currentLog.soleVoter = HoH.name;\n    newGameState.currentLog.votes[survivor.id] = new NomineeVote(false);\n    newGameState.currentLog.votes[HoH.id] = new HoHVote(evictee.id);\n    newGameState.currentLog.votesInMajority = 1;\n    newGameState.currentLog.outOf = 1;\n    const hoh: ProfileHouseguest = { ...HoH };\n    hoh.tooltip = reason;\n    evictHouseguest(newGameState, evictee.id);\n    const scene: Scene = new Scene({\n        title: \"Final Eviction\",\n        gameState: newGameState,\n        content: (\n            <div>\n                <Centered>\n                    {`As the final HoH of the season, ${HoH.name}, you may now cast the sole vote to evict.`}\n                    <Portrait houseguest={hoh} centered={true} />\n                    <CenteredBold>{`I vote to evict ${evictee.name}.`}</CenteredBold>\n                    <Portraits houseguests={nominees} centered={true} />\n                    <Centered>\n                        It's official... {evictee.name}, you will be the final person leaving the Big Brother\n                        House.\n                    </Centered>\n                </Centered>\n                <NextEpisodeButton />\n            </div>\n        ),\n    });\n    return [new GameState(newGameState), scene];\n}\n","import { Episode, InitEpisode, EpisodeType } from \"./episodes\";\nimport { Scene } from \"./scene\";\nimport { GameState } from \"../../model\";\nimport { evictHouseguest } from \"./bigBrotherEpisode\";\nimport { generateVotingTable } from \"./scenes/votingTable\";\n\nexport const GameOver: EpisodeType = {\n    canPlayWith: (n: number) => n === 1,\n    eliminates: 1,\n    arrowsEnabled: false,\n    hasViewsbar: false\n};\n\nexport function generateGameOver(gameState: GameState): GameOverEpisode {\n    const title = \"Game Over\";\n    const scenes: Scene[] = [];\n    const content = generateVotingTable(gameState);\n    gameState.houseguests.forEach(hg => {\n        evictHouseguest(gameState, hg.id);\n    });\n    return new GameOverEpisode({ gameState, content, title, scenes, type: GameOver });\n}\n\nexport class GameOverEpisode extends Episode {\n    readonly title: string;\n    readonly scenes: Scene[];\n    readonly content: JSX.Element;\n    readonly gameState: GameState;\n\n    public constructor(init: InitEpisode) {\n        super(init);\n        this.title = init.title;\n        this.scenes = init.scenes;\n        this.content = init.content;\n        this.gameState = init.gameState;\n    }\n}\n","import { VoteType } from \"./voteType\";\n\nexport class EpisodeLog {\n    public nominationsPreVeto: string[] = [];\n    public vetoWinner?: string;\n    public winner?: number;\n    public runnerUp?: number;\n    public nominationsPostVeto: string[] = [];\n    public evicted: number = -1;\n    public votes: { [id: string]: VoteType } = {};\n    public votesInMajority: number = -1;\n    public outOf: number = -1;\n    public soleVoter?: string;\n}\n","import {\n    GameState,\n    MutableGameState,\n    calculatePopularity,\n    nonEvictedHouseguests,\n    inJury,\n    getJurors\n} from \"../../model/gameState\";\nimport { Episode, Houseguest } from \"../../model\";\nimport { EpisodeType } from \"./episodes\";\nimport { BigBrotherVanilla, generateBbVanilla } from \"./bigBrotherEpisode\";\nimport { BigBrotherFinale, generateBbFinale } from \"./bigBrotherFinale\";\nimport { rng, roundTwoDigits } from \"../../utils\";\nimport { doesHeroWinTheFinale as heroWinsTheFinale } from \"../../utils/ai/aiUtils\";\nimport { classifyRelationship, RelationshipType as Relationship } from \"../../utils/ai/classifyRelationship\";\nimport { PowerRanking } from \"../../model/powerRanking\";\nimport { GameOver, generateGameOver } from \"./gameOver\";\nimport { EpisodeLog } from \"../../model/logging/episodelog\";\n\nfunction firstImpressions(houseguests: Houseguest[]) {\n    for (let i = 0; i < houseguests.length; i++) {\n        const iMap = houseguests[i].relationships;\n        for (let j = i + 1; j < houseguests.length; j++) {\n            // creates a bunch of 100% random mutual relationships\n            const jMap = houseguests[j].relationships;\n            const impression = rng().randomFloat();\n            jMap[i] = impression;\n            iMap[j] = impression;\n        }\n    }\n}\n\nfunction populateSuperiors(houseguests: Houseguest[]) {\n    for (let i = 0; i < houseguests.length; i++) {\n        const hero = houseguests[i];\n        for (let j = i + 1; j < houseguests.length; j++) {\n            const villain = houseguests[j];\n            if (heroWinsTheFinale({ hero, villain }, houseguests)) {\n                villain.superiors.add(hero.id);\n            } else {\n                hero.superiors.add(villain.id);\n            }\n        }\n    }\n}\n\nfunction updatePowerRankings(houseguests: Houseguest[]) {\n    houseguests.forEach(hg => {\n        hg.powerRanking = new PowerRanking(\n            houseguests.length - 1 - hg.superiors.size,\n            houseguests.length - 1\n        );\n    });\n}\n\nfunction updatePopularity(gameState: GameState) {\n    const houseguests = nonEvictedHouseguests(gameState);\n    houseguests.forEach(hg => {\n        const result = calculatePopularity(hg, nonEvictedHouseguests(gameState));\n        hg.deltaPopularity = (roundTwoDigits(result) - roundTwoDigits(hg.popularity)) / 100;\n        hg.popularity = result;\n    });\n}\n\nfunction updateFriendCounts(gameState: GameState) {\n    const houseguests = nonEvictedHouseguests(gameState);\n    houseguests.forEach(hero => {\n        hero.getFriendEnemyCount = () => {\n            let friends = 0;\n            let enemies = 0;\n            houseguests.forEach(villain => {\n                const rel = classifyRelationship(\n                    hero.popularity,\n                    villain.popularity,\n                    hero.relationshipWith(villain)\n                );\n                if (hero.id === villain.id) {\n                    return;\n                } else if (rel === Relationship.Friend) {\n                    friends++;\n                } else if (rel === Relationship.Enemy) {\n                    enemies++;\n                }\n            });\n            return { friends, enemies };\n        };\n    });\n}\n\nexport class EpisodeFactory {\n    public nextEpisode(gameState: GameState, episodeType: EpisodeType): Episode {\n        let newState = new MutableGameState(gameState);\n        if (gameState.phase === 0) {\n            firstImpressions(newState.houseguests);\n        }\n        newState.phase++;\n        if (nonEvictedHouseguests(gameState).length > 2) {\n            newState.log[newState.phase] = new EpisodeLog();\n        }\n        // If jury starts this episode, populate superior/inferior data. In the future, every jury ep. (dynamic rels)\n        if (inJury(gameState) && getJurors(gameState).length === 0) {\n            populateSuperiors(nonEvictedHouseguests(newState));\n        }\n        if (inJury(gameState)) {\n            updatePowerRankings(nonEvictedHouseguests(newState));\n        }\n        updatePopularity(newState);\n        updateFriendCounts(newState);\n        const finalState = new GameState(newState);\n        switch (episodeType) {\n            case BigBrotherVanilla:\n                return generateBbVanilla(finalState);\n            case BigBrotherFinale:\n                return generateBbFinale(finalState);\n            case GameOver:\n                return generateGameOver(finalState);\n            default:\n                throw new Error(\"Unsupported Episode Type\");\n        }\n    }\n}\n","import {\n    MutableGameState,\n    getById,\n    inJury,\n    nonEvictedHouseguests,\n    GameState,\n    Houseguest,\n    EpisodeType,\n    Episode,\n    InitEpisode,\n} from \"../../model\";\nimport { getFinalists, finalJurySize } from \"../../model/season\";\nimport { generateHohCompScene } from \"./scenes/hohCompScene\";\nimport { generateNomCeremonyScene } from \"./scenes/nomCeremonyScene\";\nimport { generateVetoCompScene } from \"./scenes/vetoCompScene\";\nimport { generateVetoCeremonyScene } from \"./scenes/vetoCeremonyScene\";\nimport { generateEvictionScene } from \"./scenes/evictionScene\";\nimport { MemoryWall } from \"../memoryWall\";\nimport { NextEpisodeButton } from \"../nextEpisodeButton/nextEpisodeButton\";\nimport React from \"react\";\nimport { Scene } from \"./scene\";\nimport { HasText } from \"../layout/text\";\n\nexport const BigBrotherVanilla: EpisodeType = {\n    canPlayWith: (n: number) => {\n        return n > 1;\n    },\n    eliminates: 1,\n    arrowsEnabled: true,\n    hasViewsbar: true,\n};\n\n// Refactoring ideas\n/**\n * Might be best to start passing ids instead of houseguests for HoH/nominees/veto winner\n */\n\nexport function evictHouseguest(gameState: MutableGameState, id: number) {\n    const evictee = getById(gameState, id);\n    if (gameState.currentLog) gameState.currentLog.evicted = evictee.id;\n    evictee.isEvicted = true;\n    if (gameState.remainingPlayers - getFinalists() <= finalJurySize()) {\n        evictee.isJury = true;\n    }\n    if (inJury(gameState)) {\n        nonEvictedHouseguests(gameState).forEach((hg) => {\n            hg.superiors.delete(evictee.id);\n        });\n    }\n    gameState.remainingPlayers--;\n}\n\nexport function generateBbVanilla(initialGameState: GameState): BigBrotherVanillaEpisode {\n    let currentGameState;\n    let hohCompScene;\n    let hoh: Houseguest;\n    const scenes = [];\n    [currentGameState, hohCompScene, hoh] = generateHohCompScene(initialGameState);\n    scenes.push(hohCompScene);\n\n    let nomCeremonyScene;\n    let nominees: Houseguest[];\n    [currentGameState, nomCeremonyScene, nominees] = generateNomCeremonyScene(currentGameState, hoh);\n    scenes.push(nomCeremonyScene);\n\n    let vetoCompScene;\n    let povWinner: Houseguest;\n    [currentGameState, vetoCompScene, povWinner] = generateVetoCompScene(\n        currentGameState,\n        hoh,\n        nominees[0],\n        nominees[1]\n    );\n    scenes.push(vetoCompScene);\n    let vetoCeremonyScene;\n\n    [currentGameState, vetoCeremonyScene, nominees] = generateVetoCeremonyScene(\n        currentGameState,\n        hoh,\n        nominees,\n        povWinner\n    );\n    scenes.push(vetoCeremonyScene);\n\n    let evictionScene;\n    [currentGameState, evictionScene] = generateEvictionScene(currentGameState, hoh, nominees);\n    scenes.push(evictionScene);\n\n    const title = `Week ${currentGameState.phase}`;\n    const content = (\n        <HasText>\n            {`Week ${currentGameState.phase}`}\n            <MemoryWall houseguests={initialGameState.houseguests} /> <br />\n            {currentGameState.phase === 1 && <b>Try clicking on houseguests to view their relationships.</b>}\n            <br />\n            <NextEpisodeButton />\n        </HasText>\n    );\n    const gameState = new GameState(currentGameState);\n    return new BigBrotherVanillaEpisode({ title, scenes, content, gameState, type: BigBrotherVanilla });\n}\nexport class BigBrotherVanillaEpisode extends Episode {\n    readonly title: string;\n    readonly scenes: Scene[];\n    readonly content: JSX.Element;\n    readonly gameState: GameState;\n    readonly type = BigBrotherVanilla;\n\n    public constructor(init: InitEpisode) {\n        super(init);\n        this.title = init.title;\n        this.scenes = init.scenes;\n        this.content = init.content;\n        this.gameState = init.gameState;\n    }\n}\n","import { GameState, Houseguest, MutableGameState, randomPlayer } from \"../../../model\";\nimport { Scene } from \"../scene\";\nimport { Portrait } from \"../../playerPortrait/portraits\";\nimport { NextEpisodeButton } from \"../../nextEpisodeButton/nextEpisodeButton\";\nimport React from \"react\";\nimport { Centered, CenteredBold } from \"../../layout/centered\";\nimport { HoHVote } from \"../../../model/logging/voteType\";\n\nexport function generateHohCompScene(initialGameState: GameState): [GameState, Scene, Houseguest] {\n    const newGameState = new MutableGameState(initialGameState);\n\n    const previousHoh = initialGameState.previousHOH ? [initialGameState.previousHOH] : [];\n    const newHoH: Houseguest = randomPlayer(newGameState.houseguests, previousHoh);\n    newGameState.previousHOH = newHoH;\n    newGameState.currentLog.votes[newHoH.id] = new HoHVote();\n\n    newHoH.hohWins += 1;\n\n    const scene = new Scene({\n        title: \"HoH Competition\",\n        gameState: initialGameState,\n        content: (\n            <div>\n                <Centered>\n                    {previousHoh.length > 0 &&\n                        `Houseguests, it's time to find a new Head of Household. As outgoing HoH, ${previousHoh[0].name} will not compete. `}\n                </Centered>\n                <Portrait centered={true} houseguest={newHoH} />\n                <CenteredBold>{newHoH.name} has won Head of Household!</CenteredBold>\n                <br />\n                <NextEpisodeButton />\n            </div>\n        )\n    });\n\n    return [new GameState(newGameState), scene, newHoH];\n}\n","import {\n    GameState,\n    Houseguest,\n    MutableGameState,\n    exclude,\n    nonEvictedHouseguests,\n    getById\n} from \"../../../model\";\nimport { Scene } from \"../scene\";\nimport { shuffle } from \"lodash\";\nimport { Portrait } from \"../../playerPortrait/portraits\";\nimport { NextEpisodeButton } from \"../../nextEpisodeButton/nextEpisodeButton\";\nimport React from \"react\";\nimport { nominateNPlayers } from \"../../../utils/ai/aiApi\";\nimport { Centered, CenteredBold } from \"../../layout/centered\";\nimport { DividerBox } from \"../../layout/box\";\n\nexport function generateNomCeremonyScene(\n    initialGameState: GameState,\n    HoH: Houseguest\n): [GameState, Scene, Houseguest[]] {\n    const newGameState = new MutableGameState(initialGameState);\n    const options = exclude(nonEvictedHouseguests(newGameState), [HoH]);\n    const nom1 = getById(newGameState, nominateNPlayers(HoH, options, newGameState, 2)[0].decision);\n    const nom2 = getById(\n        newGameState,\n        nominateNPlayers(HoH, exclude(options, [nom1]), newGameState, 2)[1].decision\n    );\n    nom1.nominations++;\n    nom2.nominations++;\n    newGameState.currentLog.nominationsPreVeto = [nom1.name, nom2.name];\n    const noms = shuffle([nom1, nom2]);\n    const scene = new Scene({\n        title: \"Nomination Ceremony\",\n        gameState: newGameState,\n        content: (\n            <div>\n                <Centered>\n                    This is the nomination ceremony. It is my responsibility as the Head of Household to\n                    nominate two houseguests for eviction.\n                </Centered>\n                <Portrait centered={true} houseguest={HoH} />\n                <div className=\"columns is-marginless is-centered\">\n                    <DividerBox className=\"column\">\n                        <Centered> My first nominee is...</Centered>\n                        <Portrait centered={true} houseguest={noms[0]} />\n                    </DividerBox>\n                    <DividerBox className=\"column\">\n                        <Centered>My second nominee is...</Centered>\n                        <Portrait centered={true} houseguest={noms[1]} />\n                    </DividerBox>\n                </div>\n                <CenteredBold>{`I have nominated you, ${noms[0].name} and you, ${noms[1].name} for eviction.`}</CenteredBold>\n                <br />\n                <NextEpisodeButton />\n            </div>\n        )\n    });\n    return [new GameState(newGameState), scene, [nom1, nom2]];\n}\n","import {\n    GameState,\n    Houseguest,\n    MutableGameState,\n    nonEvictedHouseguests,\n    randomPlayer,\n    getById\n} from \"../../../model\";\nimport { Scene } from \"../scene\";\nimport { Portraits } from \"../../playerPortrait/portraits\";\nimport { NextEpisodeButton } from \"../../nextEpisodeButton/nextEpisodeButton\";\nimport React from \"react\";\nimport { Centered, CenteredBold } from \"../../layout/centered\";\n\nexport function generateVetoCompScene(\n    initialGameState: GameState,\n    HoH: Houseguest,\n    nom1: Houseguest,\n    nom2: Houseguest\n): [GameState, Scene, Houseguest] {\n    const newGameState = new MutableGameState(initialGameState);\n\n    // pick players\n    const choices = nonEvictedHouseguests(newGameState);\n    let povPlayers: any[] = [];\n    const everyoneWillPlay = choices.length <= 6;\n\n    if (everyoneWillPlay) {\n        povPlayers.push({ ...HoH });\n        povPlayers.push({ ...nom1 });\n        povPlayers.push({ ...nom2 });\n        while (povPlayers.length < choices.length) {\n            povPlayers.push({ ...randomPlayer(choices, povPlayers) });\n        }\n    } else {\n        // TODO: houseguests choice picks\n        povPlayers.push({ ...HoH });\n        povPlayers.push({ ...nom1 });\n        povPlayers.push({ ...nom2 });\n        povPlayers.push({ ...randomPlayer(choices, povPlayers) });\n        povPlayers.push({ ...randomPlayer(choices, povPlayers) });\n        povPlayers.push({ ...randomPlayer(choices, povPlayers) });\n    }\n    let povWinner = randomPlayer(povPlayers);\n    povWinner = getById(newGameState, povWinner.id);\n    povWinner.povWins++;\n    newGameState.currentLog.vetoWinner = povWinner.name;\n    let introText: string;\n    if (everyoneWillPlay) {\n        introText = \"Everyone left in the house will compete in this challenge.\";\n    } else {\n        introText = `${HoH.name}, as Head of Household, and ${nom1.name} and ${nom2.name} as nominees, will compete, as well as 3 others chosen by random draw.`;\n    }\n    const extras = [povPlayers[3]];\n    povPlayers[4] && extras.push(povPlayers[4]);\n    povPlayers[5] && extras.push(povPlayers[5]);\n    const scene = new Scene({\n        title: \"Veto Competition\",\n        gameState: initialGameState,\n        content: (\n            <div>\n                <Centered>It's time to pick players for the veto competition.</Centered>\n                <Portraits centered={true} houseguests={[HoH, nom1, nom2]} />\n                <Centered>{introText}</Centered>\n                <Portraits centered={true} houseguests={extras} />\n                <Centered>...</Centered>\n                <Portraits centered={true} houseguests={[povWinner]} />\n                <CenteredBold>{`${povWinner.name} has won the Golden Power of Veto!`}</CenteredBold>\n                <NextEpisodeButton />\n            </div>\n        )\n    });\n    return [new GameState(newGameState), scene, povWinner];\n}\n","import { GameState, Houseguest, getById, exclude } from \"../../../model\";\nimport { Scene } from \"../scene\";\nimport { useGoldenVeto, nominateNPlayers } from \"../../../utils/ai/aiApi\";\nimport { Portrait } from \"../../playerPortrait/portraits\";\nimport { NextEpisodeButton } from \"../../nextEpisodeButton/nextEpisodeButton\";\nimport React from \"react\";\nimport { Centered, CenteredBold } from \"../../layout/centered\";\nimport { DividerBox } from \"../../layout/box\";\n\nexport function generateVetoCeremonyScene(\n    initialGameState: GameState,\n    HoH: Houseguest,\n    initialNominees: Houseguest[],\n    povWinner: Houseguest\n): [GameState, Scene, Houseguest[]] {\n    let povTarget: Houseguest | null = null;\n    let descisionText = \"\";\n    initialNominees[0] = getById(initialGameState, initialNominees[0].id);\n    initialNominees[1] = getById(initialGameState, initialNominees[1].id);\n    HoH = getById(initialGameState, HoH.id);\n    const vetoChoice = useGoldenVeto(povWinner, initialNominees, initialGameState);\n    povTarget = vetoChoice.decision;\n    if (!povTarget) {\n        descisionText += \"... not to use the power of veto.\";\n    } else if (povWinner.id == initialNominees[0].id || povWinner.id == initialNominees[1].id) {\n        descisionText += \"...to use the power of veto on myself.\";\n    } else {\n        descisionText += `...to use the power of veto on ${povTarget.name}.`;\n    }\n    let replacementSpeech = \"\";\n    let nameAReplacement = \"\";\n    let finalNominees: any[] = [...initialNominees];\n    if (povTarget) {\n        nameAReplacement += ` ${HoH.name}, since I have just vetoed one of your nominations, you must name a replacement nominee.`;\n        const replacementNom = {\n            ...getById(\n                initialGameState,\n                nominateNPlayers(\n                    HoH,\n                    exclude(initialGameState.houseguests, [\n                        HoH,\n                        initialNominees[0],\n                        initialNominees[1],\n                        povWinner\n                    ]),\n                    initialGameState,\n                    1\n                )[0].decision\n            )\n        };\n        const replacementIndex = initialNominees.findIndex(hg => hg.id === vetoChoice.decision!.id);\n        finalNominees[replacementIndex] = replacementNom;\n        replacementNom.nominations++;\n        getById(initialGameState, replacementNom.id).nominations++;\n        replacementSpeech = `My replacement nominee is ${replacementNom.name}.`;\n    }\n    const scene = new Scene({\n        title: \"Veto Ceremony\",\n        gameState: initialGameState,\n        content: (\n            <div>\n                <Centered>This is the Veto Ceremony.</Centered>\n                <Centered>\n                    {`${initialNominees[0].name} and ${initialNominees[1].name} have been nominated for eviction, \n                    but I have the power to veto one of these nominations.`}\n                </Centered>\n                <div className=\"columns is-marginless is-centered\">\n                    <DividerBox className=\"column\">\n                        <Portrait centered={true} houseguest={initialNominees[0]} />\n                    </DividerBox>\n                    <DividerBox className=\"column\">\n                        <Portrait centered={true} houseguest={initialNominees[1]} />\n                    </DividerBox>\n                </div>\n                <CenteredBold>\n                    I have decided... <br />\n                </CenteredBold>\n                <Portrait centered={true} houseguest={{ ...povWinner, tooltip: vetoChoice.reason }} />\n                <CenteredBold noMargin={true}>{descisionText}</CenteredBold>\n                <Centered>{nameAReplacement}</Centered>\n                {replacementSpeech && <Portrait centered={true} houseguest={HoH} />}\n                <CenteredBold>{replacementSpeech}</CenteredBold>\n                <div className=\"columns is-marginless is-centered\">\n                    <DividerBox className=\"column\">\n                        <Portrait centered={true} houseguest={finalNominees[0]} />\n                    </DividerBox>\n                    <DividerBox className=\"column\">\n                        <Portrait centered={true} houseguest={finalNominees[1]} />\n                    </DividerBox>\n                </div>\n                <NextEpisodeButton />\n            </div>\n        )\n    });\n    initialGameState.currentLog.nominationsPostVeto = [finalNominees[0].name, finalNominees[1].name];\n    return [initialGameState, scene, finalNominees];\n}\n","import { GameState, Houseguest, MutableGameState, nonEvictedHouseguests, getById } from \"../../../model\";\nimport { Scene } from \"../scene\";\nimport { shuffle } from \"lodash\";\nimport { ProfileHouseguest } from \"../../memoryWall\";\nimport { castEvictionVote } from \"../../../utils/ai/aiApi\";\nimport { evictHouseguest } from \"../bigBrotherEpisode\";\nimport { Portraits } from \"../../playerPortrait/portraits\";\nimport { NextEpisodeButton } from \"../../nextEpisodeButton/nextEpisodeButton\";\nimport React from \"react\";\nimport { CenteredBold, Centered } from \"../../layout/centered\";\nimport { DividerBox } from \"../../layout/box\";\nimport { NomineeVote, NormalVote, HoHVote } from \"../../../model/logging/voteType\";\n\nexport function generateEvictionScene(\n    initialGameState: GameState,\n    HoH: Houseguest,\n    nominees: Houseguest[]\n): [GameState, Scene] {\n    const newGameState = new MutableGameState(initialGameState);\n    nominees = shuffle(nominees);\n    const votes: Array<ProfileHouseguest[]> = [[], []];\n    let lastVoter: Houseguest;\n    nonEvictedHouseguests(newGameState).forEach(hg => {\n        if (hg.id !== nominees[0].id && hg.id !== nominees[1].id && hg.id !== HoH.id) {\n            const logic = castEvictionVote(hg, nominees, newGameState);\n            const result: ProfileHouseguest = { ...hg };\n            result.tooltip = logic.reason;\n            newGameState.currentLog.votes[hg.id] = new NormalVote(nominees[logic.decision].id);\n            votes[logic.decision].push(result);\n            lastVoter = hg;\n        }\n    });\n    const votesFor0 = votes[0].length;\n    const votesFor1 = votes[1].length;\n    newGameState.currentLog.outOf = votesFor0 + votesFor1;\n    if (votesFor0 + votesFor1 === 1) {\n        newGameState.currentLog.soleVoter = lastVoter!!.name;\n    }\n    let tieVote = votesFor0 === votesFor1;\n    let tieBreaker = { decision: 0, reason: \"Error you should not be seeing this\" };\n    if (tieVote) {\n        newGameState.currentLog.outOf++;\n        tieBreaker = castEvictionVote(HoH, nominees, newGameState);\n        newGameState.currentLog.votes[HoH.id] = new HoHVote(nominees[tieBreaker.decision].id);\n    }\n    let evictee: Houseguest;\n    if (votesFor0 > votesFor1) {\n        evictee = nominees[0];\n        newGameState.currentLog.votesInMajority = votesFor0;\n    } else if (votesFor1 > votesFor0) {\n        evictee = nominees[1];\n        newGameState.currentLog.votesInMajority = votesFor1;\n    } else {\n        evictee = nominees[tieBreaker.decision];\n        newGameState.currentLog.votesInMajority = votesFor1 + 1;\n    }\n    newGameState.currentLog.votes[nominees[0].id] = new NomineeVote(evictee.id === nominees[0].id);\n    newGameState.currentLog.votes[nominees[1].id] = new NomineeVote(evictee.id !== nominees[0].id);\n\n    evictHouseguest(newGameState, evictee.id);\n    const isUnanimous = votesFor0 === 0 || votesFor1 === 0;\n    const voteCountText = isUnanimous\n        ? \"By a unanimous vote...\"\n        : `By a vote of ${votesFor0} to ${votesFor1}...`;\n\n    const displayHoH: ProfileHouseguest = { ...HoH };\n    displayHoH.tooltip = tieBreaker.reason;\n    const scene = new Scene({\n        title: \"Live Eviction\",\n        gameState: initialGameState,\n        content: (\n            <div>\n                <CenteredBold>{voteCountText}</CenteredBold>\n                <div className=\"columns is-centered\">\n                    <DividerBox className=\"column\">\n                        <Portraits houseguests={votes[0]} centered={true} />\n                    </DividerBox>\n                    <DividerBox className=\"column\">\n                        <Portraits houseguests={votes[1]} centered={true} />\n                    </DividerBox>\n                </div>\n                {tieVote && (\n                    <div>\n                        <CenteredBold> We have a tie.</CenteredBold>\n                        <Centered>{`${HoH.name}, as current Head of Household, you must cast the sole vote to evict.`}</Centered>\n                        <Portraits houseguests={[displayHoH]} centered={true} />\n                        <CenteredBold>I vote to evict {`${evictee.name}.`}</CenteredBold>\n                    </div>\n                )}\n                <Portraits\n                    houseguests={[\n                        getById(newGameState, nominees[0].id),\n                        getById(newGameState, nominees[1].id)\n                    ]}\n                    centered={true}\n                />\n                <CenteredBold>{`${evictee.name}... you have been evicted from the Big Brother House.`}</CenteredBold>\n                <NextEpisodeButton />\n            </div>\n        )\n    });\n    return [newGameState, scene];\n}\n","import { Subscription } from \"rxjs\";\nimport { Sidebar } from \"./sidebar\";\nimport { Season } from \"../../model/season\";\nimport { Episode, nonEvictedHouseguests, getById } from \"../../model\";\nimport { Scene } from \"../episode/scene\";\nimport {\n    mainContentStream$,\n    episodes$,\n    switchEpisode$,\n    newEpisode,\n    switchSceneRelative,\n    cast$,\n    getSelectedPlayer,\n    selectedPlayer$,\n    displayMode$,\n} from \"../../subjects/subjects\";\nimport { popularityMode } from \"../../model/portraitDisplayMode\";\n\ninterface IndexedScene {\n    scene: Scene;\n    index: number;\n}\n\nconst LEFT = 37;\nconst RIGHT = 39;\n\nexport class SidebarController {\n    private view: Sidebar;\n    private subscriptions: Subscription[] = [];\n    private season: Season = new Season();\n    private scenes: IndexedScene[] = [];\n    private selectedEpisode: number = 0;\n\n    public constructor(view: Sidebar) {\n        this.view = view;\n        this.subscriptions.push(\n            episodes$.subscribe({\n                next: (episode) => this.onNewEpisode(episode),\n            })\n        );\n        this.subscriptions.push(\n            switchEpisode$.subscribe({\n                next: (value: number) => {\n                    this.switchSceneRelative(value);\n                },\n            })\n        );\n        this.subscriptions.push(\n            cast$.subscribe({\n                next: () => {\n                    this.season = new Season();\n                    this.selectedEpisode = 0;\n                    displayMode$.next(popularityMode);\n                },\n            })\n        );\n    }\n\n    public getSelectedEpisode() {\n        return this.selectedEpisode;\n    }\n\n    public async switchToScene(id: number) {\n        mainContentStream$.next(this.scenes[id].scene.render);\n        this.selectedEpisode = this.scenes[id].index;\n        await this.view.setState({ selectedScene: id });\n        if (getSelectedPlayer() !== null) {\n            selectedPlayer$.next(\n                getById(this.scenes[this.view.state.selectedScene].scene.gameState, getSelectedPlayer()!.id)\n            );\n        }\n    }\n\n    private switchSceneRelative = (delta: number) => {\n        const selectedScene = this.view.state.selectedScene;\n        const renderedScenes = this.scenes.length;\n        const targetScene = selectedScene + delta;\n        if (targetScene < 0) {\n            return;\n        }\n        const lastEpisode = this.view.state.episodes[this.view.state.episodes.length - 1];\n        if (targetScene < renderedScenes) {\n            // Go back to an earlier scene\n            this.switchToScene(targetScene);\n        } else if (targetScene === renderedScenes) {\n            // Generate a new scene, then jump to it\n            const currentGameState = lastEpisode.gameState;\n            const newPlayerCount = nonEvictedHouseguests(lastEpisode.gameState).length;\n            const nextEpisodeType = this.season.whichEpisodeType(newPlayerCount);\n            if (newPlayerCount > 0) {\n                newEpisode(this.season.renderEpisode(currentGameState, nextEpisodeType));\n                this.switchSceneRelative(1);\n            }\n        }\n    };\n\n    get handleKeyDown(): (e: any) => void {\n        return this._handleKeyDown.bind(this);\n    }\n\n    private _handleKeyDown(event: any) {\n        const state = this.view.state;\n        if (\n            state.episodes[this.selectedEpisode] === undefined ||\n            !state.episodes[this.selectedEpisode].type.arrowsEnabled\n        ) {\n            return;\n        }\n        if (event.keyCode === LEFT) {\n            switchSceneRelative(-1);\n        } else if (event.keyCode === RIGHT) {\n            switchSceneRelative(1);\n        }\n    }\n\n    private onNewEpisode(episode: Episode | null) {\n        if (!episode) {\n            this.view.setState({ episodes: [], selectedScene: 0 });\n            this.scenes = [];\n        } else {\n            const newState = { ...this.view.state };\n            // starts at -1: prevent OBOE\n            const latestIndex = this.scenes.length === 0 ? -1 : this.scenes[this.scenes.length - 1].index;\n            const index = latestIndex + 1;\n            this.scenes.push({ scene: episode, index });\n            episode.scenes.forEach((scene) => this.scenes.push({ scene, index }));\n            newState.episodes.push(episode);\n            this.view.setState(newState);\n        }\n    }\n\n    public destroy() {\n        this.subscriptions.forEach((sub) => sub.unsubscribe());\n    }\n}\n","import React from \"react\";\nimport { SidebarController } from \"./sidebarController\";\nimport { PregameEpisode } from \"../episode/pregameEpisode\";\nimport { Episode, GameState } from \"../../model\";\nimport { Scene } from \"../episode/scene\";\nimport { newEpisode } from \"../../subjects/subjects\";\nimport { Box } from \"../layout/box\";\nimport { HasText } from \"../layout/text\";\ninterface SidebarState {\n    episodes: Episode[];\n    selectedScene: number;\n}\n\nexport class Sidebar extends React.Component<{}, SidebarState> {\n    private controller: SidebarController;\n    public constructor(props: {}) {\n        super(props);\n        this.controller = new SidebarController(this);\n        this.state = { episodes: [], selectedScene: 0 };\n        newEpisode(new PregameEpisode(new GameState([])));\n    }\n\n    public componentDidMount() {\n        document.addEventListener(\"keydown\", this.controller.handleKeyDown);\n    }\n\n    public componentWillUnmount() {\n        this.controller.destroy();\n    }\n\n    public render() {\n        return (\n            <Box style={{ minWidth: 180 }}>\n                <HasText>{this.getEpisodes()}</HasText>\n            </Box>\n        );\n    }\n\n    private getHighlight(title: string, key: number) {\n        if (key === this.state.selectedScene) {\n            return <mark>{title}</mark>;\n        }\n        return title;\n    }\n\n    private getEpisodes() {\n        const result: JSX.Element[] = [];\n        // Weird OBOE to make keys start at 0\n        let episodeKey = -1;\n        let breakKey = 0;\n        this.state.episodes.forEach((episode: Episode) => {\n            const id = ++episodeKey;\n            result.push(\n                <b\n                    key={id}\n                    onClick={() => {\n                        this.controller.switchToScene(id);\n                    }}\n                >\n                    {this.getHighlight(episode.title, id)}\n                </b>\n            );\n            result.push(<br key={--breakKey} />);\n            episode.scenes.forEach((scene: Scene) => {\n                const id = ++episodeKey;\n                if (this.controller.getSelectedEpisode() === episode.gameState.phase) {\n                    result.push(\n                        <a key={id} onClick={() => this.controller.switchToScene(id)}>\n                            {this.getHighlight(scene.title, id)}\n                        </a>\n                    );\n                    result.push(<br key={--breakKey} />);\n                }\n            });\n        });\n        return result;\n    }\n}\n","import styled from \"styled-components\";\nimport React from \"react\";\nimport { mainContentStream$ } from \"../../subjects/subjects\";\nimport { Box } from \"../layout/box\";\n\nconst MainContentAreaWrapper = styled(Box)`\n    overflow-x: auto;\n`;\n\nexport class MainContentArea extends React.Component<{}, { content: any }> {\n    // a simple class that displays whatever it gets fed through the main content stream.\n\n    private contentStream: any;\n\n    public constructor(props: any) {\n        super(props);\n        this.state = { content: null };\n    }\n\n    public componentDidMount() {\n        this.contentStream = mainContentStream$.subscribe((content) => {\n            this.setState({ content });\n        });\n    }\n\n    public componentDidUpdate(prevProps: never, prevState: any) {\n        if (prevState.content !== this.state.content) {\n            window.scrollTo(0, 0);\n        }\n    }\n\n    public componentWillUnmount() {\n        this.contentStream.unsubscribe();\n    }\n\n    public render() {\n        return <MainContentAreaWrapper>{this.state.content}</MainContentAreaWrapper>;\n    }\n}\n","import \"./bulma.scss\";\nimport React from \"react\";\nimport { Sidebar } from \"../sidebar/sidebar\";\nimport { Topbar } from \"../topbar/topBar\";\nimport { MainContentArea } from \"./mainContentArea\";\nimport { MainPageController } from \"./mainPageController\";\n\ninterface MainPageProps {\n    controller: MainPageController;\n}\n\ninterface MainPageState {\n    fullscreen: boolean;\n}\n\nexport class MainPage extends React.Component<MainPageProps, MainPageState> {\n    public constructor(props: MainPageProps) {\n        super(props);\n        this.state = { fullscreen: false };\n        props.controller.inject(this);\n    }\n    public componentDidMount() {\n        this.props.controller.subscribe();\n    }\n    public componentWillUnmount() {\n        this.props.controller.unsubscribe();\n    }\n\n    public render() {\n        const fullscreen = this.state.fullscreen;\n        const hideOnFullscreen = { display: fullscreen ? \"none\" : \"\" };\n        const wrapperStyle = fullscreen\n            ? { margin: \"auto\" }\n            : { margin: \"auto\", maxWidth: 1380, overflow: \"hidden\" };\n        return (\n            <div style={wrapperStyle}>\n                <Topbar style={hideOnFullscreen} />\n                <div className=\"columns\">\n                    <div className=\"column is-narrow\" style={hideOnFullscreen}>\n                        <Sidebar />\n                    </div>\n\n                    <div className=\"column\" style={{ overflowX: \"hidden\" }}>\n                        <MainContentArea />\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n","import { MainPage } from \"./mainPage\";\nimport { Subscription } from \"rxjs\";\nimport { isFullscreen$ } from \"../../subjects/subjects\";\n\nexport class MainPageController {\n    private view: MainPage = new MainPage({ controller: this });\n    private subscriptions: Subscription[] = [];\n    public inject(page: MainPage) {\n        this.view = page;\n    }\n\n    public subscribe(): void {\n        this.unsubscribe();\n        this.subscriptions.push(\n            isFullscreen$.subscribe((fullscreen: boolean) => {\n                this.view.setState({ fullscreen });\n            })\n        );\n    }\n\n    public unsubscribe(): void {\n        this.subscriptions.forEach(sub => sub.unsubscribe());\n    }\n}\n","import { createGlobalStyle } from \"styled-components\";\nimport { ColorTheme } from \"./theme\";\n\nexport const GlobalStyles = createGlobalStyle`\n  *,\n  *::after,\n  *::before {\n    box-sizing: border-box;\n  }\n\n  body {\n    background: ${({ theme }: { theme: ColorTheme }) => theme.bg};\n    color: ${({ theme }: { theme: ColorTheme }) => theme.text};\n       transition: all 0.25s linear;\n  }`;\n","import React from \"react\";\nimport { MainPage } from \"./components/mainPage/mainPage\";\nimport { MainPageController } from \"./components/mainPage/mainPageController\";\nimport { ThemeProvider } from \"styled-components\";\nimport { lightTheme, ColorTheme, darkTheme } from \"./theme/theme\";\nimport { GlobalStyles } from \"./theme/globalTheme\";\nimport { theme$ } from \"./subjects/subjects\";\nimport { Subscription } from \"rxjs\";\n\nclass App extends React.Component<{}, { theme: ColorTheme }> {\n    private sub: Subscription | null = null;\n    public constructor(props: any) {\n        super(props);\n        this.state = {\n            theme:\n                window.matchMedia && window.matchMedia(\"(prefers-color-scheme: dark)\").matches\n                    ? darkTheme\n                    : lightTheme,\n        };\n    }\n\n    public componentDidMount() {\n        this.sub = theme$.subscribe((theme) => {\n            this.setState({ theme });\n        });\n    }\n\n    public componentWillUnmount() {\n        if (this.sub) this.sub.unsubscribe();\n    }\n\n    render() {\n        return (\n            <ThemeProvider theme={this.state.theme}>\n                <>\n                    <GlobalStyles />\n                    <MainPage controller={new MainPageController()} />\n                </>\n            </ThemeProvider>\n        );\n    }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {});\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {});\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {});\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}