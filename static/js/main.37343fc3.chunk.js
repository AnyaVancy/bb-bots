(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{34:function(e,t,n){e.exports=n(52)},39:function(e,t,n){},46:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(16),o=n.n(r),s=n(1),c=n(2),u=n(5),l=n(3),h=n(4),m=n(8),d=(n(39),n(6)),p=n(13),v=n.n(p),f=n(14),b=n(7),E=function e(t){Object(s.a)(this,e),this.name="",this.imageURL="",t&&Object.assign(this,t)},g=function(){function e(t,n){if(Object(s.a)(this,e),this.beats=void 0,this.outOf=void 0,0===n)throw new Error("Power ranking attempted to divide by zero");this.beats=t,this.outOf=n}return Object(c.a)(e,[{key:"toFloat",get:function(){return this.beats/this.outOf}}]),e}(),y=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).isEvicted=!1,n.isJury=!1,n.id=0,n.nominations=0,n.hohWins=0,n.povWins=0,n.popularity=0,n.deltaPopularity=0,n.relationships={},n.powerRanking=new g(0,1),n.superiors=new Set,n.getFriendEnemyCount=function(){return{friends:0,enemies:0}},Object.assign(Object(m.a)(Object(m.a)(n)),e),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"relationshipWith",value:function(e){return this.relationships[e.id]}}]),t}(E),w=n(11),O=n.n(w);function j(e){return e?Math.round(100*e):0}function k(e,t){for(var n={},a=0;a<e;a++)a!==t&&(n[a]=0);return n}var S=n(15),x=n(53),C=n(30);function N(e){!e||We()&&We().id===e.id?He.next(null):He.next(e)}var H=n(17);function W(e){var t=Math.round(e).toString(16);return 1==t.length?"0"+t:t}var F=function(){function e(t,n,a){Object(s.a)(this,e),this.r=void 0,this.g=void 0,this.b=void 0,this.r=t,this.g=n,this.b=a}return Object(c.a)(e,[{key:"toHex",value:function(){return"#"+W(this.r)+W(this.g)+W(this.b)}},{key:"toRgba",value:function(){return"rgba(".concat(this.r,", ").concat(this.g,", ").concat(this.b,", 1)")}}]),e}();function R(e,t,n){return new F(e.r+n*(t.r-e.r),e.g+n*(t.g-e.g),e.b+n*(t.b-e.b)).toHex()}var P=new F(51,255,249),I=function(){function e(t){var n=this;Object(s.a)(this,e),this.subs=[],this.view=void 0,this.refreshData=function(e){e?e.id!==n.view.props.id?n.view.setState({popularity:e.relationships[n.view.props.id],powerRanking:n.comparePowerRankings(e)}):n.view.setState({popularity:2,powerRanking:new g(2,1)}):n.view.setState(n.defaultState)},this.view=t}return Object(c.a)(e,[{key:"backgroundColor",value:function(e){var t=We();return null!==t&&t.id===e.id?P.toHex():e.isEvicted?void 0:this.view.state.displayMode.backgroundColor(this.view.state)}},{key:"subscribe",value:function(){var e=this,t=[];t.push(He.subscribe({next:this.refreshData})),t.push(Fe.subscribe({next:function(t){return e.view.setState({displayMode:t})}})),this.subs=t}},{key:"unsubscribe",value:function(){this.subs.forEach(function(e){return e.unsubscribe()})}},{key:"comparePowerRankings",value:function(e){if(!e.superiors)return new g(0,1);var t=void 0===this.view.props.id?-1:this.view.props.id;return e.superiors.has(t)?new g(1,1):new g(0,1)}},{key:"defaultState",get:function(){return{popularity:this.view.props.popularity,displayMode:Fe.value,powerRanking:this.view.props.powerRanking}}}]),e}(),U=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).controller=void 0,n.controller=new I(Object(m.a)(Object(m.a)(n))),n.state=n.controller.defaultState,n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){Object(H.isNullOrUndefined)(this.props.id)||this.controller.subscribe()}},{key:"componentWillUnmount",value:function(){this.controller.unsubscribe()}},{key:"onClick",value:function(){!Object(H.isNullOrUndefined)(this.props.id)&&this.props.relationships&&N({id:this.props.id,relationships:this.props.relationships,isEvicted:!!this.props.isEvicted,popularity:this.props.popularity||0,superiors:this.props.superiors})}},{key:"render",value:function(){var e,t=this,n=this.props,a=function(e){var t=e.isEvicted?"grayscale":"";return t=e.isJury?"sepia":t}(n);e=this.state.displayMode.generateSubtitle(this.props,this.state,!!n.detailed);var r="";return n.isJury?r="jury":n.isEvicted&&(r="evicted"),i.a.createElement("div",{onClick:function(){return t.onClick()},style:{backgroundColor:this.controller.backgroundColor(n)},className:"memory-wall-portrait ".concat(r)},i.a.createElement("img",{className:a,src:n.imageURL,style:{width:100,height:100}}),i.a.createElement("br",null),n.name,i.a.createElement("br",null),i.a.createElement("small",{className:"portrait-history"},e))}}]),t}(i.a.Component);n(46);function D(e,t){return i.a.createElement(U,Object.assign({},e,{key:t,detailed:!1}))}var M=n(24),B=n(25),L=n.n(B);function A(){var e=Object(M.a)(["\n    max-width: 200px;\n    padding: 3px 8px;\n    color: #fff;\n    text-align: center;\n    background-color: #000;\n    border-radius: 4px;\n"]);return A=function(){return e},e}var T=n(26).a.p(A()),J=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={visible:!1},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(L.a,{isOpen:this.state.visible,content:i.a.createElement(T,null,this.props.text)},i.a.createElement("div",{onMouseEnter:function(){return e.setState({visible:!0})},onMouseLeave:function(){return e.setState({visible:!1})}},this.props.children))}}]),t}(i.a.Component),z=-1;function Q(e){var t=i.a.createElement("div",{key:z++,className:"columns is-gapless is-mobile is-multiline ".concat(e.centered&&"is-centered")},D(e.houseguest));return e.houseguest.tooltip?i.a.createElement(J,{text:e.houseguest.tooltip},t):t}function V(e){var t=[];return e.houseguests&&0!==e.houseguests.length?(e.houseguests.forEach(function(n){var a;a=e.detailed?function(e,t){return i.a.createElement(U,Object.assign({},e,{key:t,detailed:!0}))}(n,z++):D(n,z++),n.tooltip&&(a=i.a.createElement(J,{text:n.tooltip},a)),t.push(a)}),i.a.createElement("div",{className:"columns is-gapless is-mobile is-multiline ".concat(e.centered&&"is-centered")},t)):i.a.createElement("div",null)}function $(e){return i.a.createElement("div",{className:"memory-wall"},function(e){if(!e.houseguests||0===e.houseguests.length)return null;return i.a.createElement("div",{style:{margin:"auto",maxWidth:e.houseguests.length<26?700:-1}},i.a.createElement(V,{houseguests:e.houseguests,centered:!0,detailed:!0}))}(e))}function q(){return i.a.createElement("button",{className:"button is-primary",onClick:function(){return xe(1)}},"Continue")}var K,Y=n(29),_=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={name:e.name},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({name:e.name})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"edit-portrait"},i.a.createElement("div",{style:{textAlign:"center"}},i.a.createElement("div",{className:"x-button noselect",onDoubleClick:function(){return e.props.onDelete()}},"\u2718"),i.a.createElement("img",{src:this.props.imageUrl,style:{width:100,height:100}}),i.a.createElement("br",null),i.a.createElement("input",{className:"memory-wall-portrait",contentEditable:!0,onChange:function(){return e.props.onChange},spellCheck:!1,value:this.state.name})))}}]),t}(i.a.Component),G=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).state={text:""},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"onSubmit",value:function(){var e=this.state.text.split(/\r?\n/),t=[];e.forEach(function(e){var n=e.split("/").pop(),a=n?n.split("#")[0].split("?")[0].replace(/\.[^\/.]+$/,"").replace(/[-_]/g," "):null;e.substr(0,e.indexOf(" "))&&(a=e.substr(e.indexOf(" ")+1)),a&&t.push({name:a,imageURL:e})}),this.props.onSubmit(t),this.setState({text:""})}},{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:this.props.className},i.a.createElement("textarea",{className:"textarea",onChange:function(t){e.setState({text:t.target.value})},value:this.state.text}),i.a.createElement("button",{onClick:function(){return e.onSubmit()}},"Import links"))}}]),t}(i.a.Component);!function(e){e.Friend="FRIEND",e.Queen="QUEEN",e.Pawn="PAWN",e.Enemy="ENEMY"}(K||(K={}));var X={FRIEND:"\u2665",ENEMY:"\ud83d\udc94",PAWN:"PAWN",QUEEN:"QUEEN"};function Z(e,t,n){var a=n>e,i=n>t;return a&&i?K.Friend:a&&!i?K.Pawn:!a&&i?K.Queen:K.Enemy}function ee(e,t){var n=0,a=[],r=function(e,t,n){if(e.isEvicted)t.push(i.a.createElement("br",{key:n++,style:{lineHeight:1}}));else{var a=We();if(a&&a.id!==e.id){var r=function(e,t){var n=[];return n.push(X[Z(e.popularity||0,t.popularity,e.relationships[t.id])]),n}(e,a);t=t.concat(r.map(function(e){return i.a.createElement("div",{key:n++},e)}))}else{var o=function(e){var t=[],n=e.getFriendEnemyCount?e.getFriendEnemyCount():{friends:0,enemies:0};return t.push("".concat(n.friends," ").concat(X[K.Friend]," | ").concat(n.enemies," ").concat(X[K.Enemy])),t}(e);t=t.concat(o.map(function(e){return i.a.createElement("div",{key:n++},e)}))}}return{subtitle:t,key:n}}(e,a,n=ne(e,a,n=te(t,e,arguments.length>2&&void 0!==arguments[2]&&arguments[2],a,n)));return a=r.subtitle,n=r.key,a}function te(e,t,n,a,r){var o=e.popularity;if(o&&(o>1||o<-1)&&(o=t.popularity),o&&!t.isEvicted){var s="".concat(j(o),"%"),c=function(e,t){if(j(e.popularity)!==j(t))return 0;return e.deltaPopularity?j(e.deltaPopularity):0}(t,o);if(n&&0!==c)s+="".concat(c>0?" | \u2191":" | \u2193"," ").concat(c,"%");a.push(i.a.createElement("div",{key:r++},s))}return r}function ne(e,t,n){return ae(e)?t.push(i.a.createElement("div",{key:n++},"".concat(ae(e)))):t.push(i.a.createElement("br",{key:n++,style:{lineHeight:1}})),n}function ae(e){return"".concat(e.hohWins?"\u2654 ".concat(e.hohWins):"").concat(e.povWins&&e.hohWins?"|\ud83d\udec7 ".concat(e.povWins):e.povWins?"\ud83d\udec7 ".concat(e.povWins):"").concat((e.hohWins||e.povWins)&&e.nominations?"|":"").concat(e.nominations?"\u2718 ".concat(e.nominations):"")}var ie=new F(252,137,137),re=new F(137,252,137),oe={minColor:ie,maxColor:re,backgroundColor:function(e){var t=function(e){if(!e)return 0;var t=e*e;return e>=0?2*e-t:t+2*e}(e.popularity);return R(ie,re,(t+1)/2)},generateSubtitle:ee},se=new F(255,204,94),ce=new F(192,181,255),ue={minColor:ce,maxColor:se,backgroundColor:function(e){var t=e.powerRanking;return void 0===t?"":0===t.beats&&1===t.outOf?oe.backgroundColor(e):R(ce,se,t.toFloat)},generateSubtitle:function(e,t,n){if(t.powerRanking&&0===t.powerRanking.beats&&1===t.powerRanking.outOf)return ee(e,t,n);var a=0,r=[];if(a=ne(e,r,a=te(t,e,!!n,r,a)),!e.isEvicted&&t.powerRanking){var o=We();o&&o.id!==e.id?r.push(i.a.createElement("div",{key:a++},"".concat(t.powerRanking.beats>0?"LOSE":"WIN"))):o&&o.id===e.id?r.push(i.a.createElement("div",{key:a++},"I WOULD")):r.push(i.a.createElement("div",{key:a++},"WINS ".concat(t.powerRanking.beats,"/").concat(t.powerRanking.outOf)))}return r}};var le=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).sub=null,n.state={selected:e.mode===Fe.value},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.sub=Fe.subscribe({next:function(t){t!==e.props.mode&&e.setState({selected:!1})}})}},{key:"componentWillUnmount",value:function(){this.sub&&this.sub.unsubscribe()}},{key:"render",value:function(){var e,t,n=this,a=(e=this.props).disabled?{}:{background:"linear-gradient(90deg, ".concat(e.mode.minColor.toRgba()," 0%, ").concat(e.mode.maxColor.toRgba()," 100%)"),cursor:"pointer"};return i.a.createElement("span",{className:"level-item tag is-medium is-light",style:a,onClick:function(){var e;!n.props.disabled&&(e=n.props.mode,Fe.next(e)),!n.props.disabled&&n.setState({selected:!0})}},(t=this.props.text,this.state.selected?i.a.createElement("b",null,t):i.a.createElement("i",null,t)))}}]),t}(i.a.Component);var he=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"level box is-mobile",key:"viewsbar"},i.a.createElement(le,{mode:oe,text:"Relationships"}),i.a.createElement(le,{mode:ue,text:"Power Rankings"}),i.a.createElement(le,{mode:ue,disabled:!0,text:"Cliques [Coming Soon\u2122]"}))}}]),t}(i.a.Component),me=function(){function e(t){Object(s.a)(this,e),this.scenes=void 0,this.title=void 0,this.content=void 0,this.gameState=void 0,this.type=void 0,this.scenes=t.scenes,this.title=t.title,this.content=t.content,this.gameState=t.gameState,this.type=t.type}return Object(c.a)(e,[{key:"render",get:function(){return i.a.createElement("div",null,i.a.createElement(he,null),this.content)}}]),e}(),de={eliminates:0,canPlayWith:function(e){return e>2}},pe=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,{title:"Pregame",scenes:[],content:i.a.createElement(we,{cast:e.houseguests}),gameState:e,type:de}))).title="Pregame",n.scenes=[],n.content=void 0,n.gameState=void 0,n.type=de,n.gameState=e,n.content=i.a.createElement(we,{cast:e.houseguests}),n}return Object(h.a)(t,e),t}(me);function ve(e){var t=Object(a.useState)("16"),n=Object(b.a)(t,2),r=n[0],o=n[1];return i.a.createElement("div",null,i.a.createElement("button",{disabled:""===r,className:"button is-primary",onClick:function(){return e.random(parseInt(r))}},"Random"),i.a.createElement(fe,{value:r,onChange:o}))}function fe(e){return i.a.createElement("input",{className:"input",type:"text",style:{width:"3em",marginLeft:5},value:e.value,onChange:function(t){var n=t.target.value;/^\d*$/g.test(n)&&e.onChange(n)}})}var be=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).appendProfiles=function(e){var t=Object(d.a)({},n.state);e.forEach(function(e){return t.players.push(e)}),n.setState(t)},n.submit=Object(f.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.state.players,Ce.next(t),Oe.next(i.a.createElement(we,{cast:n.state.players})),N(null),e.next=5,Se(null);case 5:return e.next=7,Se(new pe(new Te(n.state.players)));case 7:case"end":return e.stop()}var t},e)})),n.random=function(e){var t=n.state.players;t=(t=Object(w.shuffle)(t)).slice(0,e),n.setState({players:t})},n.handleUpload=function(e){n.handleFiles(e.target.files)},n.handleDrop=function(e,t){e&&n.handleFiles(e)},n.state={players:e.cast||[]},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"handleChange",value:function(e){var t=this;return function(n){var a=n.target.value.replace(/\r?\n|\r/g,""),i=Object(d.a)({},t.state);i.players[e]=new E({imageURL:i.players[e].imageURL,name:a}),t.setState(i)}}},{key:"deleteMethod",value:function(e){var t=this;return function(){var n=Object(d.a)({},t.state);n.players.splice(e,1),t.setState(n)}}},{key:"getFiles",value:function(){var e=this,t=this.state.players;if(t){var n=[],a=0;return t.forEach(function(t){return n.push(i.a.createElement(_,{name:t.name,imageUrl:t.imageURL,onDelete:e.deleteMethod(a),onChange:e.handleChange(a),key:(++a).toString()}))}),i.a.createElement("div",{className:"columns is-gapless is-mobile is-multiline is-centered"},n)}}},{key:"render",value:function(){var e=this;return i.a.createElement(Y.a,{onDrop:this.handleDrop},i.a.createElement("div",{className:"level"},i.a.createElement(G,{onSubmit:this.appendProfiles}),i.a.createElement("div",{className:"level-item"},i.a.createElement("button",{className:"button is-danger",onClick:function(){return e.setState({players:[]})}},"Delete all")),i.a.createElement("div",{className:"level-item"},i.a.createElement(ve,{random:this.random})),i.a.createElement("div",{className:"level-item"},i.a.createElement("button",{className:"button is-primary",disabled:this.state.players.length<3,onClick:this.submit},"Submit"))),"~ Drop images ~",i.a.createElement("input",{type:"file",multiple:!0,onChange:this.handleUpload}),this.getFiles())}},{key:"handleFiles",value:function(e){for(var t=Object(d.a)({},this.state),n=0;n<e.length;n++){var a=e[n];a.type.match(/image\/*/)&&t.players.push(new E({name:a.name.substr(0,a.name.lastIndexOf("."))||a.name,imageURL:URL.createObjectURL(a)}))}this.setState(t)}}]),t}(i.a.Component);n(51);function Ee(){return i.a.createElement("div",{className:"topbar-link",onClick:function(){Oe.next(i.a.createElement(be,{cast:Ne()}))}},"Edit Cast")}function ge(){return i.a.createElement("div",{className:"topbar-link",onClick:function(){Oe.next(i.a.createElement(be,{cast:Ne()}))}},"Edit Season")}function ye(){return i.a.createElement("div",{className:"level box is-mobile",style:{marginTop:30}},i.a.createElement("div",{className:"level-item"},i.a.createElement(Ee,null)),i.a.createElement("div",{className:"level-item"},i.a.createElement(ge,null)))}function we(e){return 0===e.cast.length?i.a.createElement("div",null,"Cast is empty. ",i.a.createElement(Ee,null)):i.a.createElement("div",null,"Welcome to Big Brother!",i.a.createElement($,{houseguests:e.cast}),i.a.createElement(q,null))}var Oe=new x.a(i.a.createElement(we,{cast:[]})),je=new x.a(null),ke=new C.a;function Se(e){je.next(e)}function xe(e){ke.next(e)}var Ce=new x.a([]);function Ne(){return Ce.value}var He=new x.a(null);function We(){return He.value}var Fe=new x.a(oe),Re=function(){function e(t){Object(s.a)(this,e),this.rng=void 0,this.rng=S.a.xorshift128plus(t)}return Object(c.a)(e,[{key:"randomFloat",value:function(){var e,t=this.rng.next(),n=Object(b.a)(t,2);return e=n[0],this.rng=n[1],e/2147483647}},{key:"randomInt",value:function(e,t){var n,a=S.a.uniformIntDistribution(e,t,this.rng),i=Object(b.a)(a,2);return n=i[0],this.rng=i[1],n}},{key:"flipCoin",value:function(){var e,t=this.rng.next(),n=Object(b.a)(t,2);return e=n[0],this.rng=n[1],e%2===0}},{key:"seed",value:function(e){this.rng=S.a.xorshift128plus(e)}}]),e}();function Pe(){return Ie.value}var Ie=new x.a(new Re(0));Ce.subscribe({next:function(e){var t="";e.forEach(function(e){return t+=e.name}),Ie.next(new Re(function(e){var t,n=0;if(0===e.length)return n;for(t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return n}(t)))}});function Ue(e,t){var n=e.houseguests.find(function(e){return e.id===t});if(!n)throw new Error("Failed to find houseguest with id ".concat(t));return n}function De(e,t){var n=t.map(function(e){return e.id});return e.filter(function(e){return!n.includes(e.id)&&!e.isEvicted})}function Me(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===e.length)throw new Error("Tried to get a random player from a list of 0 players.");var n=De(e,t);return n[Pe().randomInt(0,n.length-1)]}function Be(e){return e.houseguests.filter(function(e){return!e.isEvicted})}function Le(e){return e.houseguests.filter(function(e){return e.isJury})}function Ae(e){return e.remainingPlayers-2<=st()}var Te=function e(t){var n=this;if(Object(s.a)(this,e),this.houseguests=[],this.remainingPlayers=0,this.phase=0,this.previousHOH=void 0,t instanceof Array){var a=t;this.remainingPlayers=a.length;var i=-1;a.forEach(function(e){n.houseguests.push(new y(Object(d.a)({},e,{id:++i,relationships:k(a.length,i)})))})}else Object.assign(this,t)},Je=function e(t){Object(s.a)(this,e),this.houseguests=[],this.remainingPlayers=0,this.phase=0,this.previousHOH=void 0;var n=O.a.cloneDeep(t);Object.assign(this,n)},ze=function e(t){Object(s.a)(this,e),this.title="",this.gameState=new Te([]),this.content=i.a.createElement("div",null,"Error while rendering ".concat(this.title)),this.render=void 0,Object.assign(this,t),this.render=i.a.createElement("div",null,i.a.createElement(he,null),this.content)};var Qe=function(e,t){return e.relationships[t.id]};function Ve(e,t){return function(e,t,n){var a=0,i=-1/0;return t.forEach(function(t,r){var o=n(e,t);o>i&&(a=r,i=o)}),a}(e,t,Qe)}function $e(e,t,n){var a=0,i=1/0;return t.forEach(function(t,r){var o=n(e,t);o<i&&(a=r,i=o)}),a}function qe(e,t){var n=e.hero,a=e.villain,i=0,r=0;return t.forEach(function(e){e.id!==n.id&&e.id!==a.id&&(Qe(n,e)>Qe(a,e)?i++:r++)}),i>r}function Ke(e,t){return e.superiors.size>=t.remainingPlayers-1-e.superiors.size}function Ye(e,t,n){return Ae(n)?function(e,t,n){var a=t[0],i=t[1],r=!e.superiors.has(a.id),o=!e.superiors.has(i.id);if(r===o)return _e(e,t);if(n.remainingPlayers-e.superiors.size-1===1&&(r||o)){var s=r?0:1;return{vote:r?1:0,reason:"I can't evict ".concat(t[s].name,", because they are the last person I can beat.")}}var c=Ke(e,n)===o?0:1,u=c?0:1,l=Ke(e,n)?"I can't beat ".concat(t[c].name," in the end."):"I need to keep ".concat(t[u].name," around as a shield."),h=Z(e.popularity,t[c].popularity,e.relationships[t[c].id])===K.Friend,m=Z(e.popularity,t[u].popularity,e.relationships[t[u].id])!==K.Friend,d=!m,p=!h;return h&&m?{vote:u,reason:"".concat(t[u].name," is my enemy.")}:h&&d?{vote:c,reason:"Both noms are my friends, but ".concat(l)}:p&&m?{vote:c,reason:"Neither of the noms are my friends, but ".concat(l)}:{vote:c,reason:"".concat(l)}}(e,t,n):_e(e,t)}function _e(e,t){var n=t[0],a=t[1],i=Z(e.popularity,n.popularity,e.relationships[n.id]),r=Z(e.popularity,a.popularity,e.relationships[a.id]);if(i===K.Enemy&&r===K.Enemy)return{vote:n.popularity>a.popularity?0:1,reason:"Both noms are my enemies, so I voted for the more popular one."};if(i===K.Enemy&&r!==K.Enemy||r===K.Enemy&&i!==K.Enemy){var o=i===K.Enemy?0:1;return{vote:o,reason:"".concat(t[o].name," is my enemy.")}}if(i!==K.Friend&&r===K.Friend||r!==K.Friend&&i===K.Friend){var s=i!==K.Friend?0:1;return{vote:s,reason:"".concat(t[0===s?1:0].name," is my friend.")}}var c=$e(e,t,Qe);return{vote:c,reason:"Both noms are my friends. but I like ".concat(t[0===c?1:0].name," more.")}}function Ge(e,t,n){var a=function(e,t,n){var a=t;return Ae(n)&&Ke(e,n)&&(a=2*e.superiors.size<n.remainingPlayers-1?t.filter(function(t){return!e.superiors.has(t.id)}):t.filter(function(t){return e.superiors.has(t.id)})),new Set(a.map(function(e){return e.id}))}(e,t,n),i=t.filter(function(e){return a.has(e.id)});return 0===i.length&&(i=t),i[$e(e,i,Qe)].id}function Xe(e,t){var n=-1,a=Z(e.popularity,t[0].popularity,e.relationshipWith(t[0])),i=Z(e.popularity,t[1].popularity,e.relationshipWith(t[1]));return a===K.Friend&&i!==K.Friend?n=0:i===K.Friend&&a!==K.Friend?n=1:a===K.Friend&&i===K.Friend&&(n=Math.max(t[0].popularity,t[1].popularity)===t[0].popularity?0:1),t[n]}function Ze(e){for(var t=Le(e),n=Be(e),a=[0,0],r=t.map(function(e){var t=function(e,t){return Ve(e,t)}(e,n);return a[t]++,t}),o=[],s=0;s<r.length;s++)o.push(i.a.createElement("div",{className:"columns",key:"jury-vote".concat(s)},i.a.createElement(Q,{houseguest:t[s]}),i.a.createElement("p",null,i.a.createElement("b",null,"".concat(t[s].name," has voted for..."))),i.a.createElement(Q,{houseguest:n[r[s]]})));var c=a[0]>a[1]?n[0]:n[1];return new ze({title:"Jury Votes",gameState:e,content:i.a.createElement("div",null,o,i.a.createElement(Q,{houseguest:c}),"Congratulations, ".concat(c.name,", you are the winner of Big Brother!!!"))})}var et={canPlayWith:function(e){return 3===e},eliminates:2};function tt(e){var t,n,a,r,o=i.a.createElement("div",null,"Finale Night",i.a.createElement($,{houseguests:e.houseguests})," ",i.a.createElement("br",null),i.a.createElement(q,null)),s=[],c=function(e){var t=new Je(e),n=Be(e),a=Me(n),r=n.filter(function(e){return e.id!==a.id}),o=Me(n,[a]),s=Ue(t,Me([a,o]).id);s.hohWins++;var c=new ze({title:"Final HoH Competition",gameState:t,content:i.a.createElement("div",null,i.a.createElement("p",null,"The final 3 houseguests compete in the endurance competition."),i.a.createElement(V,{houseguests:n}),i.a.createElement(Q,{houseguest:a}),i.a.createElement("p",null,i.a.createElement("b",null,"".concat(a.name," has won the endurance competition!"))),i.a.createElement("hr",null),i.a.createElement("p",null,"".concat(r[0].name," and ").concat(r[1].name," compete in the skill competition.")),i.a.createElement(V,{houseguests:r}),i.a.createElement(Q,{houseguest:o}),i.a.createElement("p",null,i.a.createElement("b",null,"".concat(o.name," has won the skill competition!"))),i.a.createElement("hr",null),i.a.createElement("p",null,"".concat(a.name," and ").concat(o.name," compete in the quiz competition.")),i.a.createElement(V,{houseguests:[a,o]}),i.a.createElement(Q,{houseguest:s}),i.a.createElement("p",null,i.a.createElement("b",null,"Congratulations ".concat(s.name,", you are the final Head of Household!"))),i.a.createElement(q,null))});return t.phase++,[new Te(t),c,s]}(e),u=Object(b.a)(c,3);t=u[0],n=u[1],a=u[2],s.push(n);var l=function(e,t){var n=new Je(e),a=Be(n).filter(function(e){return e.id!==t.id}),r=Ye(t,a,n),o=r.vote,s=r.reason,c=a[o],u=Object(d.a)({},t);u.tooltip=s,rt(n,c.id);var l=new ze({title:"Final Eviction",gameState:n,content:i.a.createElement("div",null,i.a.createElement("div",{style:{textAlign:"center"}},"As the final HoH of the season, ".concat(t.name,", you may now cast the sole vote to evict."),i.a.createElement(Q,{houseguest:u,centered:!0}),i.a.createElement("b",null,i.a.createElement("p",null,"I vote to evict ".concat(c.name,"."))),i.a.createElement(V,{houseguests:a,centered:!0}),i.a.createElement("p",null,"It's official... ",c.name,", you will be the final person leaving the Big Brother House.")),i.a.createElement(q,null))});return[new Te(n),l]}(t,a),h=Object(b.a)(l,2);return t=h[0],r=h[1],s.push(r),s.push(Ze(t)),new nt({gameState:t,content:o,title:"Finale",scenes:s,type:et})}var nt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).title=void 0,n.scenes=void 0,n.content=void 0,n.gameState=void 0,n.type=et,n.title=e.title,n.scenes=e.scenes,n.content=e.content,n.gameState=e.gameState,n}return Object(h.a)(t,e),t}(me);var at=function(){function e(){Object(s.a)(this,e)}return Object(c.a)(e,[{key:"nextEpisode",value:function(e,t){var n,a=new Je(e);0===e.phase&&function(e){for(var t=0;t<e.length;t++)for(var n=e[t].relationships,a=t+1;a<e.length;a++){var i=e[a].relationships,r=Pe().randomFloat();i[t]=r,n[a]=r}}(a.houseguests),Ae(e)&&0===Le(e).length&&function(e){for(var t=0;t<e.length;t++)for(var n=e[t],a=t+1;a<e.length;a++){var i=e[a];qe({hero:n,villain:i},e)?i.superiors.add(n.id):n.superiors.add(i.id)}}(Be(a)),Ae(e)&&(n=Be(a)).forEach(function(e){e.powerRanking=new g(n.length-1-e.superiors.size,n.length-1)}),function(e){Be(e).forEach(function(t){var n=function(e,t){var n=0,a=0,i=e.id;return t.forEach(function(e){e.id!==i&&(a++,n+=e.relationships[i])}),0===a?0:n/a}(t,Be(e));t.deltaPopularity=(j(n)-j(t.popularity))/100,t.popularity=n})}(a),function(e){var t=Be(e);t.forEach(function(e){e.getFriendEnemyCount=function(){var n=0,a=0;return t.forEach(function(t){var i=Z(e.popularity,t.popularity,e.relationshipWith(t));e.id!==t.id&&(i===K.Friend?n++:i===K.Enemy&&a++)}),{friends:n,enemies:a}}})}(a);var r=new Te(a);switch(t){case it:return function(e){var t,n,a,r,o,s=[],c=function(e){var t=new Je(e),n=e.previousHOH?[e.previousHOH]:[],a=Me(t.houseguests,n);t.previousHOH=a,t.phase++,a.hohWins+=1;var r=new ze({title:"HoH Competition",gameState:e,content:i.a.createElement("div",null,n.length>0&&"Houseguests, it's time to find a new Head of Household. As outgoing HoH, ".concat(n[0].name," will not compete. "),i.a.createElement(Q,{houseguest:a}),a.name," has won Head of Household!",i.a.createElement("br",null),i.a.createElement(q,null))});return[new Te(t),r,a]}(e),u=Object(b.a)(c,3);t=u[0],n=u[1],a=u[2],s.push(n);var l,h,m=function(e,t){var n=new Je(e),a=De(Be(n),[t]),r=Ue(n,Ge(t,a,n)),o=Ue(n,Ge(t,De(a,[r]),n));r.nominations++,o.nominations++;var s=Object(w.shuffle)([r,o]),c=new ze({title:"Nomination Ceremony",gameState:n,content:i.a.createElement("div",null,i.a.createElement(Q,{houseguest:t}),i.a.createElement("br",null),"This is the nomination ceremony. It is my responsibility as the Head of Household to nominate two houseguests for eviction.",i.a.createElement("br",null),i.a.createElement("b",null,"My first nominee is...",i.a.createElement("br",null),i.a.createElement(Q,{houseguest:s[0]}),i.a.createElement("br",null),"My second nominee is...",i.a.createElement("br",null),i.a.createElement(Q,{houseguest:s[1]}),"I have nominated you, ".concat(s[0].name," and you, ").concat(s[1].name," for eviction."),i.a.createElement("br",null)),i.a.createElement(q,null))});return[new Te(n),c,[r,o]]}(t,a),p=Object(b.a)(m,3);t=p[0],r=p[1],o=p[2],s.push(r);var v,f=function(e,t,n,a){var r=new Je(e),o=Be(r),s=[],c=o.length<=6;if(c)for(s.push(Object(d.a)({},t)),s.push(Object(d.a)({},n)),s.push(Object(d.a)({},a));s.length<o.length;)s.push(Object(d.a)({},Me(o,s)));else s.push(Object(d.a)({},t)),s.push(Object(d.a)({},n)),s.push(Object(d.a)({},a)),s.push(Object(d.a)({},Me(o,s))),s.push(Object(d.a)({},Me(o,s))),s.push(Object(d.a)({},Me(o,s)));var u,l=Me(s);(l=Ue(r,l.id)).povWins++,u=c?"Everyone left in the house will compete in this challenge.":"".concat(t.name,", as Head of Household, and ").concat(n.name," and ").concat(a.name," as nominees, will compete, as well as 3 others chosen by random draw.");var h=[s[3]];s[4]&&h.push(s[4]),s[5]&&h.push(s[5]);var m=new ze({title:"Veto Competition",gameState:e,content:i.a.createElement("div",null,"It's time to pick players for the veto competition.",i.a.createElement("br",null),i.a.createElement(V,{houseguests:[t,n,a]}),i.a.createElement("br",null),u,i.a.createElement("br",null),i.a.createElement(V,{houseguests:h}),"...",i.a.createElement(V,{houseguests:[l]}),"".concat(l.name," has won the Golden Power of Veto!"),i.a.createElement("br",null),i.a.createElement(q,null))});return[new Te(r),m,l]}(t,a,o[0],o[1]),E=Object(b.a)(f,3);t=E[0],l=E[1],h=E[2],s.push(l);var g,y=function(e,t,n,a){var r=null,o="";n[0]=Ue(e,n[0].id),n[1]=Ue(e,n[1].id),t=Ue(e,t.id),(r=function(e,t,n){var a=null;return e.id==t[0].id||e.id==t[1].id?a=e:(Ae(n),a=Xe(e,t),4===Be(n).length&&(a=null)),a||null}(a,n,e))?a.id==n[0].id||a.id==n[1].id?o+="...to use the power of veto on myself.":o+="...to use the power of veto on ".concat(r.name,"."):o+="... not to use the power of veto.";var s="",c="",u=n;if(r){u=n.filter(function(e){return e.id!=r.id}),c+=" ".concat(t.name,", since I have just vetoed one of your nominations, you must name a replacement nominee.");var l=Object(d.a)({},Ue(e,Ge(t,De(e.houseguests,[t,n[0],n[1],a]),e)));l.nominations++,u.push(l),Ue(e,l.id).nominations++,s="My replacement nominee is ".concat(l.name,".")}return[new ze({title:"Veto Ceremony",gameState:e,content:i.a.createElement("div",null,"This is the Veto Ceremony.",i.a.createElement("br",null),"".concat(n[0].name," and ").concat(n[1].name," have been nominated for eviction."),i.a.createElement(V,{houseguests:n}),"But I have the power to veto one of these nominations.",i.a.createElement("br",null),i.a.createElement("b",null,"I have decided...",i.a.createElement(Q,{houseguest:a}),o),c,s&&i.a.createElement(Q,{houseguest:t}),i.a.createElement("b",null,s),i.a.createElement(V,{houseguests:u}),i.a.createElement(q,null))}),u]}(t,a,o,h),O=Object(b.a)(y,2);v=O[0],o=O[1],s.push(v);var j=function(e,t,n){var a=new Je(e);n=Object(w.shuffle)(n);var r=[[],[]];Be(a).forEach(function(e){if(e.id!==n[0].id&&e.id!==n[1].id&&e.id!==t.id){var i=Ye(e,n,a),o=Object(d.a)({},e);o.tooltip=i.reason,r[i.vote].push(o)}});var o,s=r[0].length,c=r[1].length,u=s===c,l={vote:0,reason:"Error you should not be seeing this"};u&&(l=Ye(t,n,a));o=s>c?n[0]:c>s?n[1]:n[l.vote];rt(a,o.id);var h=0===s||0===c?"By a unanimous vote...":"By a vote of ".concat(s," to ").concat(c,"..."),m=Object(d.a)({},t);m.tooltip=l.reason;var p=new ze({title:"Live Eviction",gameState:e,content:i.a.createElement("div",null,i.a.createElement("p",{style:{textAlign:"center"}},i.a.createElement("b",null,h," ")),i.a.createElement("div",{className:"columns is-centered"},i.a.createElement("div",{className:"column box"},i.a.createElement(V,{houseguests:r[0],centered:!0})),i.a.createElement("div",{className:"column box"},i.a.createElement(V,{houseguests:r[1],centered:!0}))),u&&i.a.createElement("div",null,i.a.createElement("p",{style:{textAlign:"center"}},i.a.createElement("b",null," We have a tie.")," ",i.a.createElement("br",null),"".concat(t.name,", as current Head of Household, you must cast the sole vote to evict.")),i.a.createElement(V,{houseguests:[m],centered:!0}),i.a.createElement("p",{style:{textAlign:"center"}},i.a.createElement("b",null,"I vote to evict ","".concat(o.name,".")))),i.a.createElement(V,{houseguests:[Ue(a,n[0].id),Ue(a,n[1].id)],centered:!0}),i.a.createElement("p",{style:{textAlign:"center"}},i.a.createElement("b",null,"".concat(o.name,"... you have been evicted from the Big Brother House."))),i.a.createElement(q,null))});return[a,p]}(t,a,o),k=Object(b.a)(j,2);t=k[0],g=k[1],s.push(g);var S="Week ".concat(t.phase),x=i.a.createElement("div",null,"Week ".concat(t.phase),i.a.createElement($,{houseguests:e.houseguests})," ",i.a.createElement("br",null),i.a.createElement(q,null)),C=new Te(t);return new ot({title:S,scenes:s,content:x,gameState:C,type:it})}(r);case et:return tt(r);default:throw new Error("Unsupported Episode Type")}}}]),e}();var it={canPlayWith:function(e){return e>1},eliminates:1};function rt(e,t){var n=Ue(e,t);n.isEvicted=!0,e.remainingPlayers-2<=st()&&(n.isJury=!0),Ae(e)&&Be(e).forEach(function(e){e.superiors.delete(n.id)}),e.remainingPlayers--}var ot=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).title=void 0,n.scenes=void 0,n.content=void 0,n.gameState=void 0,n.type=it,n.title=e.title,n.scenes=e.scenes,n.content=e.content,n.gameState=e.gameState,n}return Object(h.a)(t,e),t}(me);function st(){return ct}var ct=7;Ce.subscribe({next:function(e){var t=e.length;(t=Math.round(.55*t))%2===0&&t--,ct=t}});var ut=function(){function e(){Object(s.a)(this,e),this.factory=void 0,this.factory=new at}return Object(c.a)(e,[{key:"renderEpisode",value:function(e,t){return this.factory.nextEpisode(e,t)}},{key:"whichEpisodeType",value:function(e){return 3===e?et:it}}]),e}(),lt=function(){function e(t){var n=this;Object(s.a)(this,e),this.view=void 0,this.subscriptions=[],this.season=new ut,this.scenes=[],this.selectedEpisode=0,this.switchSceneRelative=function(e){var t=n.view.state.selectedScene,a=n.scenes.length,i=t+e;if(!(i<0)){var r=n.view.state.episodes[n.view.state.episodes.length-1];if(i<a)n.switchToScene(i);else if(i===a){var o=r.gameState,s=Be(r.gameState).length,c=n.season.whichEpisodeType(s);s>2&&(Se(n.season.renderEpisode(o,c)),n.switchSceneRelative(1))}}},this.view=t,this.subscriptions.push(je.subscribe({next:function(e){return n.onNewEpisode(e)}})),this.subscriptions.push(ke.subscribe({next:function(e){n.switchSceneRelative(e)}})),this.subscriptions.push(Ce.subscribe({next:function(){return n.season=new ut}}))}return Object(c.a)(e,[{key:"getSelectedEpisode",value:function(){return this.selectedEpisode}},{key:"switchToScene",value:function(){var e=Object(f.a)(v.a.mark(function e(t){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Oe.next(this.scenes[t].scene.render),this.selectedEpisode=this.scenes[t].index,e.next=4,this.view.setState({selectedScene:t});case 4:null!==We()&&He.next(Ue(this.scenes[this.view.state.selectedScene].scene.gameState,We().id));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleKeyDown",value:function(e){37===e.keyCode?xe(-1):39===e.keyCode&&xe(1)}},{key:"onNewEpisode",value:function(e){var t=this;if(e){var n=Object(d.a)({},this.view.state),a=(0===this.scenes.length?-1:this.scenes[this.scenes.length-1].index)+1;this.scenes.push({scene:e,index:a}),e.scenes.forEach(function(e){return t.scenes.push({scene:e,index:a})}),n.episodes.push(e),this.view.setState(n)}else this.view.setState({episodes:[],selectedScene:0}),this.scenes=[]}},{key:"destroy",value:function(){this.subscriptions.forEach(function(e){return e.unsubscribe()})}}]),e}(),ht=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).controller=void 0,n.controller=new lt(Object(m.a)(Object(m.a)(n))),n.state={episodes:[],selectedScene:0},Se(new pe(new Te([]))),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.controller.handleKeyDown)}},{key:"componentWillUnmount",value:function(){this.controller.destroy()}},{key:"render",value:function(){return i.a.createElement("div",{className:"box",style:{minWidth:140}},this.getEpisodes())}},{key:"getHighlight",value:function(e,t){return t===this.state.selectedScene?i.a.createElement("mark",null,e):e}},{key:"getEpisodes",value:function(){var e=this,t=[],n=-1,a=0;return this.state.episodes.forEach(function(r){var o=++n;t.push(i.a.createElement("b",{key:o,onClick:function(){e.controller.switchToScene(o)}},e.getHighlight(r.title,o))),t.push(i.a.createElement("br",{key:--a})),r.scenes.forEach(function(o){var s=++n;e.controller.getSelectedEpisode()===r.gameState.phase&&(t.push(i.a.createElement("a",{key:s,onClick:function(){return e.controller.switchToScene(s)}},e.getHighlight(o.title,s))),t.push(i.a.createElement("br",{key:--a})))})}),t}}]),t}(i.a.Component),mt=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(l.a)(t).call(this,e))).contentStream=void 0,n.state={content:null},n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.contentStream=Oe.subscribe(function(t){e.setState({content:t})})}},{key:"componentDidUpdate",value:function(e,t){t.content!==this.state.content&&window.scrollTo(0,0)}},{key:"componentWillUnmount",value:function(){this.contentStream.unsubscribe()}},{key:"render",value:function(){return i.a.createElement("div",{className:"box"},this.state.content)}}]),t}(i.a.Component),dt=function(e){function t(e){var n;return Object(s.a)(this,t),n=Object(u.a)(this,Object(l.a)(t).call(this,e)),e.controller.inject(Object(m.a)(Object(m.a)(n))),n}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"main-page"},i.a.createElement(ye,null),i.a.createElement("div",{className:"columns"},i.a.createElement("div",{className:"column is-narrow"},i.a.createElement(ht,null)),i.a.createElement("div",{className:"column"},i.a.createElement(mt,null))))}}]),t}(i.a.Component),pt=function(){function e(){Object(s.a)(this,e),this.view=new dt({controller:this})}return Object(c.a)(e,[{key:"inject",value:function(e){this.view=e}}]),e}(),vt=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return i.a.createElement(dt,{controller:new pt})}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(vt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[34,1,2]]]);
//# sourceMappingURL=main.37343fc3.chunk.js.map